(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(jQuery&&!jQuery.fn.hoverIntent){a(jQuery)}}})(function(f){var b={interval:100,sensitivity:6,timeout:0};var d=0;var h,g;var a=function(i){h=i.pageX;g=i.pageY};var e=function(l,j,k,i){if(Math.sqrt((k.pX-h)*(k.pX-h)+(k.pY-g)*(k.pY-g))<i.sensitivity){j.off("mousemove.hoverIntent"+k.namespace,a);delete k.timeoutId;k.isActive=true;delete k.pX;delete k.pY;return i.over.apply(j[0],[l])}else{k.pX=h;k.pY=g;k.timeoutId=setTimeout(function(){e(l,j,k,i)},i.interval)}};var c=function(l,j,k,i){delete j.data("hoverIntent")[k.id];return i.apply(j[0],[l])};f.fn.hoverIntent=function(m,n,i){var l=d++;var k=f.extend({},b);if(f.isPlainObject(m)){k=f.extend(k,m)}else{if(f.isFunction(n)){k=f.extend(k,{over:m,out:n,selector:i})}else{k=f.extend(k,{over:m,out:m,selector:n})}}var j=function(t){var r=f.extend({},t);var p=f(this);var o=p.data("hoverIntent");if(!o){p.data("hoverIntent",(o={}))}var s=o[l];if(!s){o[l]=s={id:l}}if(s.timeoutId){s.timeoutId=clearTimeout(s.timeoutId)}var q=s.namespace=".hoverIntent"+l;if(t.type==="mouseenter"){if(s.isActive){return}s.pX=r.pageX;s.pY=r.pageY;p.on("mousemove.hoverIntent"+q,a);s.timeoutId=setTimeout(function(){e(r,p,s,k)},k.interval)}else{if(!s.isActive){return}p.off("mousemove.hoverIntent"+q,a);s.timeoutId=setTimeout(function(){c(r,p,s,k.out)},k.timeout)}};return this.on({"mouseenter.hoverIntent":j,"mouseleave.hoverIntent":j},k.selector)}});(function(a){jQuery.fn.shopbMegaMenu=function(v){var x;var g;var l=a(this);a.extend(x={showSpeed:300,hideSpeed:300,trigger:"hover",showDelay:0,hideDelay:0,effect:"fade",align:"left",responsive:true,animation:"none",indentChildren:true,indicatorFirstLevel:"+",indicatorSecondLevel:"+",showOverlay:false},v);var z=a(this);var A=a(z).children(".shopbMegaMenu-menu");var B=a(A).find("li");var C;var D=768;var E=2000;var w=200;a(A).children("li").children("a").each(function(){if(a(this).siblings(".dropdown, .megamenu")["length"]>0){a(this).append("<span class='indicator'>"+x.indicatorFirstLevel+"</span>")}});a(A).find(".dropdown").children("li").children("a").each(function(){if(a(this).siblings(".dropdown")["length"]>0){a(this).append("<span class='indicator'>"+x.indicatorSecondLevel+"</span>")}});a(A).find(".megamenu").find("li ul li a").each(function(){if(a(this).siblings(".dropdown")["length"]>0){a(this).append("<span class='indicator'>"+x.indicatorSecondLevel+"</span>")}});if(x.align=="right"){a(A).addClass("shopbMegaMenu-right")}if(x.indentChildren){a(A).addClass("shopbMegaMenu-indented")}if(x.responsive){a(z).addClass("shopbMegaMenu-responsive").prepend("<a href='javascript:void(0)' class='showhide'><em></em><em></em><em></em></a>");C=a(z).children(".showhide")}function f(i,h){i=i||"hover";if(i!="click"){h=a(this)}var j=h.children(".dropdown, .megamenu");if(j.length){j.delay(x.showDelay).addClass(x.animation);if(x.showOverlay==true){g.show()}if(x.effect=="fade"){j.fadeIn(x.showSpeed)}else{j.slideDown(x.showSpeed)}}}function y(h,i){h=h||"hover";if(h!="click"){i=a(this)}var j=i.children(".dropdown, .megamenu");if(j.length){j.delay(x.hideDelay).removeClass(x.animation);if(x.effect=="fade"){j.fadeOut(x.hideSpeed)}else{j.slideUp(x.hideSpeed)}if(x.showOverlay==true&&g!=undefined){g.hide()}}}function n(){a(A).find(".dropdown, .megamenu").hide(0);if(navigator.userAgent.match(/Mobi/i)||window.navigator.msMaxTouchPoints>0||x.trigger=="click"){a(".shopbMegaMenu-menu > li > a, .shopbMegaMenu-menu ul.dropdown li a").bind("click touchstart",function(h){h.stopPropagation();h.preventDefault();a(this).parent("li").siblings("li").find(".dropdown, .megamenu").stop(true,true).fadeOut(300);if(a(this).siblings(".dropdown, .megamenu").css("display")=="none"){f("click",a(this).parent("li"));return false}else{y("click",a(this).parent("li"))}window.location.href=a(this)["attr"]("href")});a(document).bind("click.menu touchstart.menu",function(h){if(a(h.target)["closest"](".shopbMegaMenu")["length"]==0){a(".shopbMegaMenu-menu").find(".dropdown, .megamenu").fadeOut(300)}})}else{a(B).hoverIntent(f,y)}}function G(){a(A).find(".dropdown, .megamenu").hide(0);a(A).find(".indicator").each(function(){if(a(this).parent("a").siblings(".dropdown, .megamenu")["length"]>0){a(this).bind("click",function(h){if(a(this).parent().prop("tagName")=="A"){h.preventDefault()}if(a(this).parent("a").siblings(".dropdown, .megamenu").css("display")=="none"){a(this).parent("a").siblings(".dropdown, .megamenu").delay(x.showDelay).slideDown(x.showSpeed);a(this).parent("a").parent("li").siblings("li").find(".dropdown, .megamenu").slideUp(x.hideSpeed)}else{a(this).parent("a").siblings(".dropdown, .megamenu").slideUp(x.hideSpeed)}})}})}function q(){var i=a(A).children("li").children(".dropdown");if(a(window).innerWidth()>D){var j=a(z).outerWidth(true);for(var h=0;h<i.length;h++){if(a(i[h]).parent("li").position.left+a(i[h]).outerWidth()>j){a(i[h]).css("right",0)}else{if(j==a(i[h]).outerWidth()||(j-a(i[h]).outerWidth())<20){a(i[h]).css("left",0)}if(a(i[h]).parent("li").position.left+a(i[h]).outerWidth()<j){a(i[h]).css("right","auto")}}}}}function F(){a(A).hide(0);a(C).show(0).click(function(){if(a(A).css("display")=="none"){a(A).slideDown(x.showSpeed)}else{a(A).slideUp(x.hideSpeed).find(".dropdown, .megamenu").hide(x.hideSpeed)}})}function c(){a(A).show(0);a(C).hide(0)}function e(){a(z).find("li, a").unbind();a(document).unbind("click.menu touchstart.menu")}function u(){function h(k){var m=a(k).find(".shopbMegaMenu-tabs-nav > li");var o=a(k).find(".shopbMegaMenu-tabs-content");a(m).bind("click touchstart",function(p){p.stopPropagation();p.preventDefault();a(m).removeClass("active");a(this).addClass("active");a(o).hide(0);a(o[a(this).index()]).show(0)})}if(a(A).find(".shopbMegaMenu-tabs")["length"]>0){var j=a(A).find(".shopbMegaMenu-tabs");for(var i=0;i<j.length;i++){h(j[i])}}}function d(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function b(){q();var k=a(".megamenu");k.css({left:"0px",width:"100%"});var j=-(document.body.clientWidth-k.width())/2;k.css({left:j+"px",width:(document.body.clientWidth)+"px"});if(d()<=D&&E>D){e();if(x.responsive){F();G()}else{n()}}if(d()>D&&w<=D){e();c();n()}E=d();w=d();u();if(/MSIE (d+.d+);/["test"](navigator.userAgent)&&d()<D){var i=new Number(RegExp.$1);if(i==8){a(C).hide(0);a(A).show(0);e();n()}}a(".shopbMegaMenu").on("click",".accordion-toggle",function(){var m=a(this).parent().parent().find(".collapse");if(m.hasClass("in")){m.css({overflow:"hidden"})}}).on("hidden.bs.collapse",".accordion",function(m){a(m.target).css({overflow:"hidden"})}).on("shown.bs.collapse",".accordion",function(m){a(m.target).css({overflow:"visible"})});if(x.showOverlay==true){var h=l.offset().bottom;g=a("<div>").css({position:"fixed",top:h+"px",left:0,width:"100%",height:"100%","background-color":"#000","z-index":1,opacity:0.75,display:"none"});g.appendTo(l).hide()}}b();a(window).resize(function(){b();q()})}}(jQuery));