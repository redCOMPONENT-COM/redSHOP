clone:
    default:
        image: plugins/git
        recursive: false

pipeline:
    00-cache:
        group: 00-setup
        image: redwebaps/redshop-cache:latest
        pull: true
        commands:
            # redSHOP Composer cache
            - mv /opt/cache/redSHOP/vendor .
            - touch tests/.cache.composer.tmp
            # redSHOP Composer cache for libraries
            - mv /opt/cache/redSHOP/libraries/redshop/vendor libraries/redshop
            - touch tests/.cache.libraries.redshop.composer.tmp
            # redSHOP Composer cache for redshopb_pdf plugin
            - mv /opt/cache/redSHOP/plugins/redshop_pdf/tcpdf/helper/vendor plugins/redshop_pdf/tcpdf/helper
            - touch tests/.cache.plugins.redshop_pdf.composer.tmp
            # redSHOP npm cache
            - mv /opt/cache/redSHOP/node_modules .
            - touch tests/.cache.npm.tmp
            # Joomla CMS
            # - mv /opt/cache/joomla-cms tests
            # - touch tests/.cache.joomla-cms.tmp

    00-setup:
        group: 00-setup
        image: redwebaps/testbox-chromedriver:2.38
        pull: true
        commands:
            # Composer setup
            - while [ ! -f tests/.cache.composer.tmp ]; do sleep 1; done                        # Comment if not using composer cache
            - composer config --global --auth github-oauth.github.com 4281d0ba7e8f1caded4c8b949a1c115902e30113
            # - composer install --prefer-dist                                                  # Uncomment if not using composer cache
            - while [ ! -f tests/.cache.libraries.redshop.composer.tmp ]; do sleep 1; done      # Comment if not using composer cache for libraries
            # - composer install --prefer-dist -d libraries/redshop                             # Uncomment if not using composer cache for libraries
            - while [ ! -f tests/.cache.plugins.redshop_pdf.composer.tmp ]; do sleep 1; done    # Comment if not using composer cache for redshopb_pdf plugin
            # - composer install --prefer-dist -d plugins/redshop_pdf/tcpdf/helper              # Uncomment if not using composer cache for redshopb_pdf plugin

            # npm setup
            - while [ ! -f tests/.cache.npm.tmp ]; do sleep 1; done                             # Comment if not using npm cache
            # - npm install gulp                                                                # Uncomment if not using npm cache

            - mv gulp-config.json.dist gulp-config.json
            - gulp release --skip-version
            # Codeception setup
            - cp tests/acceptance.suite.yml.dist.drone tests/acceptance.suite.yml
            # Test setup
            # - while [ ! -f tests/.cache.joomla-cms.tmp ]; do sleep 1; done                      # Comment if not using Joomla CMS cache
            - vendor/bin/robo tests:site-preparation 0 0
            # Ownership for uid 82
            - chown -R www-data:www-data .
            # Touching temp file to start the setup of each installation (in each PHP version - via services)
            - touch tests/.setup.tmp

    00-setup-56:
        group: 00-setup
        image: redwebaps/testbox-chromedriver:2.38
        pull: true
        environment:
            - tests_user=admin
            - tests_suite=00-setup
            - tests_db=setup
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-00-setup
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &

            # Waiting for setup to be done
            - while [ ! -f tests/.setup.tmp ]; do sleep 1; done

            # Creating first clone for tests setup
            - mkdir -p tests/$tests_suite$php_version/joomla-cms
            - rsync -a tests/joomla-cms/ tests/$tests_suite$php_version/joomla-cms
            # Creates the database (required because of the Codeception Db module)
            - mysql -u root -proot -h db -e "CREATE DATABASE $tests_db$php_version"
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs the setup and installation routine
            - su www-data -c 'vendor/bin/robo tests:setup 0 0'
            # Touching temp file to start the environment cloning (see setup-stages service)
            - touch tests/.setup$php_version.tmp

    00-setup-71:
        group: 00-setup
        image: redwebaps/testbox-chromedriver:2.38
        pull: true
        environment:
            - tests_user=admin
            - tests_suite=00-setup
            - tests_db=setup
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-00-setup
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &

            # Waiting for setup to be done
            - while [ ! -f tests/.setup.tmp ]; do sleep 1; done

            # Creating first clone for tests setup
            - mkdir -p tests/$tests_suite$php_version/joomla-cms
            - rsync -a tests/joomla-cms/ tests/$tests_suite$php_version/joomla-cms
            # Creates the database (required because of the Codeception Db module)
            - mysql -u root -proot -h db -e "CREATE DATABASE $tests_db$php_version"
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs the setup and installation routine
            - su www-data -c 'vendor/bin/robo tests:setup 0 0'
            # Touching temp file to start the environment cloning (see setup-stages service)
            - touch tests/.setup$php_version.tmp

    01-Uninstall-56:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=01-Uninstall
            - tests_db=Uninstall
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-01-Uninstall-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/uninstall/ 0 0'

    01-Uninstall-71:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=01-Uninstall
            - tests_db=Uninstall
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-01-Uninstall-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance//administrator/g15/Products/Manufacturer 0 0'

    02-Price_Product-56:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=02-Price_Product
            - tests_db=Price_Product
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-02-Price_Product-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g01/Products/Price_Product 0 0'

    02-Price_Product-71:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=02-Price_Product
            - tests_db=Price_Product
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-02-Price_Product-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g16/Products/ProductManagement 0 0'

    03-ProductNotForSaleOnFrontend-56:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=03-ProductNotForSaleOnFrontend
            - tests_db=ProductNotForSaleOnFrontend
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-03-ProductNotForSaleOnFrontend-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g01/ProductNotForSaleOnFrontend 0 0'

    03-ProductNotForSaleOnFrontend-71:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=03-ProductNotForSaleOnFrontend
            - tests_db=ProductNotForSaleOnFrontend
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-03-ProductNotForSaleOnFrontend-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g01/ProductNotForSaleOnFrontend 0 0'

    04-State-56:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=04-State
            - tests_db=State
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-04-State-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g02/Customizations/State 0 0'

    04-State-71:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=04-State
            - tests_db=State
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-04-State-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g02/Customizations/State 0 0'

    05-CheckoutDiscountOnProduct-56:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=05-CheckoutDiscountOnProduct
            - tests_db=CheckoutDiscountOnProduct
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-05-CheckoutDiscountOnProduct-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g02/Discounts/CheckoutDiscountOnProduct 0 0'

    05-CheckoutDiscountOnProduct-71:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=05-CheckoutDiscountOnProduct
            - tests_db=CheckoutDiscountOnProduct
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-05-CheckoutDiscountOnProduct-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g02/Discounts/CheckoutDiscountOnProduct 0 0'

    06-CheckoutDiscountTotal-56:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=06-CheckoutDiscountTotal
            - tests_db=CheckoutDiscountTotal
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-06-CheckoutDiscountTotal-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g02/Discounts/CheckoutDiscountTotal 0 0'

    06-CheckoutDiscountTotal-71:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=06-CheckoutDiscountTotal
            - tests_db=CheckoutDiscountTotal
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-06-CheckoutDiscountTotal-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g02/Discounts/CheckoutDiscountTotal 0 0'

    07-Shipping-56:
        group: 03-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=07-Shipping
            - tests_db=Shipping
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-07-Shipping-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g03/Shippings/Shipping 0 0'

    07-Shipping-71:
        group: 03-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=07-Shipping
            - tests_db=Shipping
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-07-Shipping-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g03/Shippings/Shipping 0 0'

    08-VoucherCheckoutProduct-56:
        group: 03-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=08-VoucherCheckoutProduct
            - tests_db=VoucherCheckoutProduct
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-08-VoucherCheckoutProduct-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g03/Discounts/VoucherCheckoutProduct 0 0'

    08-VoucherCheckoutProduct-71:
        group: 03-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=08-VoucherCheckoutProduct
            - tests_db=VoucherCheckoutProduct
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-08-VoucherCheckoutProduct-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g03/Discounts/VoucherCheckoutProduct 0 0'

    09-Notices-56:
        group: 03-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=09-Notices
            - tests_db=Notices
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-09-Notices-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run  acceptance/administrator/g03/Notices 0 0'

#    09-Notices-71:
#        group: 03-tests
#        image: redwebaps/testbox-chromedriver:2.38
#        environment:
#            - tests_user=admin
#            - tests_suite=09-Notices
#            - tests_db=Notices
#            - build_path=/drone/src/github.com/${DRONE_REPO}
#            - output_append=-09-Notices-71
#            - php_version=71
#        commands:
#            # Regular entry point
#            - /entrypoint.sh &
#            # Performs test after ensuring that the scenario has been fully set up
#            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
#            # Waits until Chromedriver is up and running
#            - while ! nc -z localhost 9515; do sleep 1; done
#            # Performs test
#            - su www-data -c 'vendor/bin/robo tests:run  acceptance/administrator/g03/Notices 0 0'

    10-Wrapper-56:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=10-Wrapper
            - tests_db=Wrapper
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-10-Wrapper-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/Shippings/Wrapper 0 0'

    10-Wrapper-71:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=10-Wrapper
            - tests_db=Wrapper
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-10-Wrapper-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/Shippings/Wrapper 0 0'

    11-Stockroom-56:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=11-Stockroom
            - tests_db=Stockroom
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-11-Stockroom-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/Stockrooms/StockRoom 0 0'

    11-Stockroom-71:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=11-Stockroom
            - tests_db=Stockroom
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-11-Stockroom-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/Stockrooms/StockRoom 0 0'

    12-Stock_Image-56:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=12-Stock_Image
            - tests_db=Stock_Image
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-12-Stock_Image-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/Stockrooms/Stock_Image 0 0'

    12-Stock_Image-71:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=12-Stock_Image
            - tests_db=Stock_Image
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-12-Stock_Image-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/Stockrooms/Stock_Image 0 0'

    13-Template-56:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=13-Template
            - tests_db=Template
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-13-Template-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g05/Customizations/Template 0 0'

    13-Template-71:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=13-Template
            - tests_db=Template
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-13-Template-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g05/Customizations/Template 0 0'

    14-Quotation_FrontEnd-56:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=14-Quotation_FrontEnd
            - tests_db=Quotation_FrontEnd
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-14-Quotation_FrontEnd-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g05/Quotations 0 0'

    14-Quotation_FrontEnd-71:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=14-Quotation_FrontEnd
            - tests_db=Quotation_FrontEnd
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-14-Quotation_FrontEnd-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g05/Quotations 0 0'

    15-Quotation-56:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=15-Quotation
            - tests_db=Quotations
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-15-Quotation-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g05/Orders/Quotation 0 0'

    15-Quotation-71:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=15-Quotation
            - tests_db=Quotations
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-15-Quotation-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g05/Orders/Quotation 0 0'

    16-MassDiscountCheckout-56:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=16-MassDiscountCheckout
            - tests_db=MassDiscountCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-16-MassDiscountCheckout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g06/Discounts/MassDiscountCheckout 0 0'

    16-MassDiscountCheckout-71:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=16-MassDiscountCheckout
            - tests_db=MassDiscountCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-16-MassDiscountCheckout-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g06/Discounts/MassDiscountCheckout 0 0'

    17-Country-56:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=17-Country
            - tests_db=Country
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-17-Country-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g06/Customizations/Country 0 0'

    17-Country-71:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=17-Country
            - tests_db=Country
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-17-Country-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g06/Customizations/Country 0 0'

    18-Discount_Product-56:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=18-Discount_Product
            - tests_db=Discount_Product
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-18-Discount_Product-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g06/Discount_Groups/Discounts/Discount_Product 0 0'

    18-Discount_Product-71:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=18-Discount_Product
            - tests_db=Discount_Product
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-18-Discount_Product-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g06/Discount_Groups/Discounts/Discount_Product 0 0'

    19-Currency-56:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=19-Currency
            - tests_db=Currency
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-19-Currency-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/Customizations/Currency 0 0'

    19-Currency-71:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=19-Currency
            - tests_db=Currency
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-19-Currency-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/Customizations/Currency 0 0'

    20-Configuration-56:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=20-Configuration
            - tests_db=Configuration
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-20-Configuration-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/Configuration/ 0 0'

    20-Configuration-71:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=20-Configuration
            - tests_db=Configuration
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-20-Configuration-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/Configuration/ 0 0'

    21-Shopper_Group-56:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=21-Shopper_Group
            - tests_db=Shopper_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-21-Shopper_Group-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/Users/Shopper_Group 0 0'

    21-Shopper_Group-71:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=21-Shopper_Group
            - tests_db=Shopper_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-21-Shopper_Group-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/Users/Shopper_Group 0 0'

    22-Custom_Field-56:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=22-Custom_Field
            - tests_db=Custom_Field
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-22-Custom_Field-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g08/Customizations/Custom_Field 0 0'

    22-Custom_Field-71:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=22-Custom_Field
            - tests_db=Custom_Field
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-22-Custom_Field-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g08/Customizations/Custom_Field 0 0'

    23-Compare_Products-56:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=23-Compare_Products
            - tests_db=Compare_Products
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-23-Compare_Products-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g08/Compare_Products 0 0'

    23-Compare_Products-71:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=23-Compare_Products
            - tests_db=Compare_Products
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-23-Compare_Products-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g08/Compare_Products 0 0'

    24-Discount-56:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=24-Discount
            - tests_db=Discount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-24-Discount-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g08/Discount_Groups/Discounts/Discount 0 0'

    24-Discount-71:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=24-Discount
            - tests_db=Discount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-24-Discount-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g08/Discount_Groups/Discounts/Discount 0 0'

    25-Checkout_Quantity-56:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=25-Checkout_Quantity
            - tests_db=Checkout_Quantity
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-25-Checkout_Quantity-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Checkout_Quantity 0 0'

    25-Checkout_Quantity-71:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=25-Checkout_Quantity
            - tests_db=Checkout_Quantity
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-25-Checkout_Quantity-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Checkout_Quantity 0 0'

    26-Shopper_Groups_Checkout-56:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=26-Shopper_Groups_Checkout
            - tests_db=Shopper_Groups_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-26-Shopper_Groups_Checkout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Shopper_Groups 0 0'

    26-Shopper_Groups_Checkout-71:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=26-Shopper_Groups_Checkout
            - tests_db=Shopper_Groups_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-26-Shopper_Groups_Checkout-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Shopper_Groups 0 0'

    27-Order_Checkout-56:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=27-Order_Checkout
            - tests_db=Order_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-27-Order_Checkout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Order 0 0'

    27-Order_Checkout-71:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=27-Order_Checkout
            - tests_db=Order_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-27-Order_Checkout-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Order 0 0'

    28-Product_Attribute-56:
        group: 10-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=28-Product_Attribute
            - tests_db=Product_Attribute
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-28-Product_Attribute-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g10/Product_Attribute 0 0'

#    28-Product_Attribute-71:
#        group: 10-tests
#        image: redwebaps/testbox-chromedriver:2.38
#        environment:
#            - tests_user=admin
#            - tests_suite=28-Product_Attribute
#            - tests_db=Product_Attribute
#            - build_path=/drone/src/github.com/${DRONE_REPO}
#            - output_append=-28-Product_Attribute-71
#            - php_version=71
#        commands:
#            # Regular entry point
#            - /entrypoint.sh &
#            # Performs test after ensuring that the scenario has been fully set up
#            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
#            # Waits until Chromedriver is up and running
#            - while ! nc -z localhost 9515; do sleep 1; done
#            # Performs test
#            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g10/Product_Attribute 0 0'

    29-Tax_Group-56:
        group: 10-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=29-Tax_Group
            - tests_db=Tax_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-29-Tax_Group-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g10/Products/Tax_Group 0 0'

    29-Tax_Group-71:
        group: 10-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=29-Tax_Group
            - tests_db=Tax_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-29-Tax_Group-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g10/Products/Tax_Group 0 0'

    30-GiftCardCheckout-56:
        group: 10-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=30-GiftCardCheckout
            - tests_db=GiftCardCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-30-GiftCardCheckout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g10/Discounts/GiftCardCheckout 0 0'

    30-GiftCardCheckout-71:
        group: 10-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=30-GiftCardCheckout
            - tests_db=GiftCardCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-30-GiftCardCheckout-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g10/Discounts/GiftCardCheckout 0 0'

    31-Giftcard-56:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=31-Giftcard
            - tests_db=Giftcard
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-31-Giftcard-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g11/Discount_Groups/Rewards/Giftcard 0 0'

    31-Giftcard-71:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=31-Giftcard
            - tests_db=Giftcard
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-31-Giftcard-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g11/Discount_Groups/Rewards/Giftcard 0 0'

    32-CheckoutDiscountBeforeToday-56:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=32-CheckoutDiscountBeforeToday
            - tests_db=Giftcard
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-32-CheckoutDiscountBeforeToday-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g11/Discounts/CheckoutDiscountBeforeToday 0 0'

    32-CheckoutDiscountBeforeToday-71:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=32-CheckoutDiscountBeforeToday
            - tests_db=Giftcard
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-32-CheckoutDiscountBeforeToday-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g11/Discounts/CheckoutDiscountBeforeToday 0 0'

    33-Tax_Rate-56:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=33-Tax_Rate
            - tests_db=Tax_Rate
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-33-Tax_Rate-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g11/Products/Tax_Rate 0 0'

    33-Tax_Rate-71:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=33-Tax_Rate
            - tests_db=Tax_Rate
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-33-Tax_Rate-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g11/Products/Tax_Rate 0 0'

    34-Coupon-56:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=34-Coupon
            - tests_db=Coupon
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-34-Coupon-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12/Discount_Groups/Rewards/Coupon 0 0'

    34-Coupon-71:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=34-Coupon
            - tests_db=Coupon
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-34-Coupon-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12/Discount_Groups/Rewards/Coupon 0 0'

    35-Mail-56:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=35-Mail
            - tests_db=Mail
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-35-Mail-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12/Communications/Mail 0 0'

    35-Mail-71:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=35-Mail
            - tests_db=Mail
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-35-Mail-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12/Communications/Mail 0 0'

    36-User-56:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=36-User
            - tests_db=User
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-36-User-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12/Users/User 0 0'

    36-User-71:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=36-User
            - tests_db=User
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-36-User-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12/Users/User 0 0'

    37-Field_Group-56:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=37-Field_Group
            - tests_db=Field_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-37-Field_Group-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g13/Customizations/Field_Group 0 0'

    37-Field_Group-71:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=37-Field_Group
            - tests_db=Field_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-37-Field_Group-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g13/Customizations/Field_Group 0 0'

    38-Mass_Discount-56:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=38-Mass_Discount
            - tests_db=Mass_Discount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-38-Mass_Discount-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g13/Discount_Groups/Discounts/Mass_Discount 0 0'

    38-Mass_Discount-71:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=38-Mass_Discount
            - tests_db=Mass_Discount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-38-Mass_Discount-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g13/Discount_Groups/Discounts/Mass_Discount 0 0'

    39-VAT-56:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=39-VAT
            - tests_db=VAT
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-39-VAT-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g13/VAT 0 0'

    39-VAT-71:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=39-VAT
            - tests_db=VAT
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-39-VAT-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g13/VAT 0 0'

    40-Voucher-56:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=40-Voucher
            - tests_db=Voucher
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-40-Voucher-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14/Discount_Groups/Rewards/Voucher 0 0'

    40-Voucher-71:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=40-Voucher
            - tests_db=Voucher
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-40-Voucher-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14/Discount_Groups/Rewards/Voucher 0 0'

    41-Text-56:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=41-Text
            - tests_db=Text
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-41-Text-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14/Customizations/Text 0 0'

    41-Text-71:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=41-Text
            - tests_db=Text
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-41-Text-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14/Customizations/Text 0 0'

    42-Supplier-56:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=42-Supplier
            - tests_db=Supplier
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-42-Supplier-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14/Products/Supplier 0 0'

    42-Supplier-71:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=42-Supplier
            - tests_db=Supplier
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-42-Supplier-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14/Products/Supplier 0 0'

    43-Manufacturer-71:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=43-Manufacturer
            - tests_db=Manufacturer
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-43-Manufacturer-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g15/Products/Manufacturer 0 0'

    44-One_Step_Checkout-56:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=44-One_Step_Checkout
            - tests_db=One_Steps_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-44-One_Step_Checkout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g15/One_Step_Checkout 0 0'

    44-One_Step_Checkout-71:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=44-One_Step_Checkout
            - tests_db=One_Steps_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-44-One_Step_Checkout-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g15/One_Step_Checkout 0 0'

    45-Category-56:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
        - tests_user=admin
        - tests_suite=45-Category
        - tests_db=Category
        - build_path=/drone/src/github.com/${DRONE_REPO}
        - output_append=-45-Category-56
        - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g15/Products/Category 0 0'

    45-Category-71:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
        - tests_user=admin
        - tests_suite=45-Category
        - tests_db=Category
        - build_path=/drone/src/github.com/${DRONE_REPO}
        - output_append=-45-Category-71
        - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g15/Products/Category 0 0'

    46-ProductManagement-56:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=46-ProductManagement
            - tests_db=ProductManagement
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-46-ProductManagement-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g16/Products/ProductManagement 0 0'

    46-ProductManagement-71:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=46-ProductManagement
            - tests_db=ProductManagement
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-46-ProductManagement-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g16/Products/ProductManagement 0 0'

    47-CouponVoucherMixCheckout-56:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=47-CouponVoucherMixCheckout
            - tests_db=CouponVoucherMixCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-47-CouponVoucherMixCheckout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g16/Discounts/CouponVoucherMixCheckout 0 0'

    47-CouponVoucherMixCheckout-12:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=47-CouponVoucherMixCheckout
            - tests_db=CouponVoucherMixCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-47-CouponVoucherMixCheckout-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g16/Discounts/CouponVoucherMixCheckout 0 0'

    48-Product_Quantity-56:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=48-Product_Quantity
            - tests_db=Product_Quantity
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-48-Product_Quantity-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Product_Quantity 0 0'

    48-Product_Quantity-71:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=48-Product_Quantity
            - tests_db=Product_Quantity
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-48-Product_Quantity-71
            - output_append=-48-Product_Quantity-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09/Product_Quantity 0 0'

    49-Oder_Backend-56:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=49-Oder_Backend
            - tests_db=Oder_Backend
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-49-Oder_Backend-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/Oder_Backend 0 0'

    49-Oder_Backend-71:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=49-Oder_Backend
            - tests_db=Oder_Backend
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-49-Oder_Backend-71
            - php_version=71
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/Oder_Backend/Orders 0 0'

    slack:
        image: plugins/slack
        webhook: https://hooks.slack.com/services/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
        channel: redshop-builds
        when:
            status: [ success, failure ]
        template: >
            {{#success build.status}}
              {{repo.name}} PR #{{build.pull}} succeeded in {{since build.started}}. Good job {{build.author}}!  Here is the build log: {{build.link}}.  Link to the PR: https://github.com/{{repo.owner}}/{{repo.name}}/pull/{{build.pull}}
            {{else}}
              {{repo.name}} PR #{{build.pull}} failed in {{since build.started}}. Fix me please {{build.author}}!  Here is the build log: {{build.link}}.  Link to the PR: https://github.com/{{repo.owner}}/{{repo.name}}/pull/{{build.pull}}
            {{/success}}

    error-report:
        image: redwebaps/testbox-chromedriver:2.38
        commands:
        - if [ -z "${CI_PULL_REQUEST}" ]; then export CI_PULL_REQUEST=1; fi
        - vendor/bin/robo send:build-report-error-slack redcomponent 365447364384436 Q94UM5kjZkZIrau8MIL93m0dN6U "$CI_REPO" "$CI_PULL_REQUEST" "https://hooks.slack.com/services/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" "#redshop-builds" "$CI_BUILD_URL"
        when:
            status: [ failure ]

services:
    db:
        image: mysql/mysql-server:5.7
        pull: true
        environment:
            - MYSQL_ROOT_PASSWORD=root
            - MYSQL_ROOT_HOST=%

    php56:
        image: redwebaps/php-apache:5.6
        pull: true
        environment:
            - WEB_DOCUMENT_ROOT=/drone/src/github.com/${DRONE_REPO}
            - JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=1

    php71:
        image: redwebaps/php-apache:7.2
        pull: true
        environment:
            - WEB_DOCUMENT_ROOT=/drone/src/github.com/${DRONE_REPO}
            - JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=1

    setup-stages:
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_suite=00-setup
            - tests_db=setup
            - php_versions=56,71
        commands:
            # Base installation
            - sh tests/drone/setup-base-install.sh  $tests_db                       $tests_suite                        $php_versions
            # Stages setup
            - sh tests/drone/setup-stages.sh        "Uninstall"                     "01-Uninstall"                      $php_versions
            - sh tests/drone/setup-stages.sh        "Price_Product"                 "02-Price_Product"                  $php_versions
            - sh tests/drone/setup-stages.sh        "ProductNotForSaleOnFrontend"   "03-ProductNotForSaleOnFrontend"    $php_versions
            - sh tests/drone/setup-stages.sh        "State"                         "04-State"                          $php_versions
            - sh tests/drone/setup-stages.sh        "CheckoutDiscountOnProduct"     "05-CheckoutDiscountOnProduct"      $php_versions
            - sh tests/drone/setup-stages.sh        "CheckoutDiscountTotal"         "06-CheckoutDiscountTotal"          $php_versions
            - sh tests/drone/setup-stages.sh        "Shipping"                      "07-Shipping"                       $php_versions
            - sh tests/drone/setup-stages.sh        "VoucherCheckoutProduct"        "08-VoucherCheckoutProduct"         $php_versions
            - sh tests/drone/setup-stages.sh        "Notices"                       "09-Notices"                        $php_versions
            - sh tests/drone/setup-stages.sh        "Wrapper"                       "10-Wrapper"                        $php_versions
            - sh tests/drone/setup-stages.sh        "Stockroom"                     "11-Stockroom"                      $php_versions
            - sh tests/drone/setup-stages.sh        "Stock_Image"                   "12-Stock_Image"                    $php_versions
            - sh tests/drone/setup-stages.sh        "Template"                      "13-Template"                       $php_versions
            - sh tests/drone/setup-stages.sh        "Quotation_FrontEnd"            "14-Quotation_FrontEnd"             $php_versions
            - sh tests/drone/setup-stages.sh        "Quotations"                    "15-Quotation"                      $php_versions
            - sh tests/drone/setup-stages.sh        "MassDiscountCheckout"          "16-MassDiscountCheckout"           $php_versions
            - sh tests/drone/setup-stages.sh        "Country"                       "17-Country"                        $php_versions
            - sh tests/drone/setup-stages.sh        "Discount_Product"              "18-Discount_Product"               $php_versions
            - sh tests/drone/setup-stages.sh        "Currency"                      "19-Currency"                       $php_versions
            - sh tests/drone/setup-stages.sh        "Configuration"                 "20-Configuration"                  $php_versions
            - sh tests/drone/setup-stages.sh        "Shopper_Group"                 "21-Shopper_Group"                  $php_versions
            - sh tests/drone/setup-stages.sh        "Custom_Field"                  "22-Custom_Field"                   $php_versions
            - sh tests/drone/setup-stages.sh        "Compare_Products"              "23-Compare_Products"               $php_versions
            - sh tests/drone/setup-stages.sh        "Discount"                      "24-Discount"                       $php_versions
            - sh tests/drone/setup-stages.sh        "Checkout_Quantity"             "25-Checkout_Quantity"              $php_versions
            - sh tests/drone/setup-stages.sh        "Shopper_Groups_Checkout"       "26-Shopper_Groups_Checkout"        $php_versions
            - sh tests/drone/setup-stages.sh        "Order_Checkout"                "27-Order_Checkout"                 $php_versions
            - sh tests/drone/setup-stages.sh        "Product_Attribute"             "28-Product_Attribute"              $php_versions
            - sh tests/drone/setup-stages.sh        "Tax_Group"                     "29-Tax_Group"                      $php_versions
            - sh tests/drone/setup-stages.sh        "GiftCardCheckout"              "30-GiftCardCheckout"               $php_versions
            - sh tests/drone/setup-stages.sh        "Giftcard"                      "31-Giftcard"                       $php_versions
            - sh tests/drone/setup-stages.sh        "CheckoutDiscountBeforeToday"   "32-CheckoutDiscountBeforeToday"    $php_versions
            - sh tests/drone/setup-stages.sh        "Tax_Rate"                      "33-Tax_Rate"                       $php_versions
            - sh tests/drone/setup-stages.sh        "Coupon"                        "34-Coupon"                         $php_versions
            - sh tests/drone/setup-stages.sh        "Mail"                          "35-Mail"                           $php_versions
            - sh tests/drone/setup-stages.sh        "User"                          "36-User"                           $php_versions
            - sh tests/drone/setup-stages.sh        "Field_Group"                   "37-Field_Group"                    $php_versions
            - sh tests/drone/setup-stages.sh        "Mass_Discount"                 "38-Mass_Discount"                  $php_versions
            - sh tests/drone/setup-stages.sh        "VAT"                           "39-VAT"                            $php_versions
            - sh tests/drone/setup-stages.sh        "Voucher"                       "40-Voucher"                        $php_versions
            - sh tests/drone/setup-stages.sh        "Text"                          "41-Text"                           $php_versions
            - sh tests/drone/setup-stages.sh        "Supplier"                      "42-Supplier"                       $php_versions
            - sh tests/drone/setup-stages.sh        "Manufacturer"                  "43-Manufacturer"                   71
            - sh tests/drone/setup-stages.sh        "One_Steps_Checkout"            "44-One_Step_Checkout"              $php_versions
            - sh tests/drone/setup-stages.sh        "Category"                      "45-Category"                       $php_versions
            - sh tests/drone/setup-stages.sh        "ProductManagement"             "46-ProductManagement"              $php_versions
            - sh tests/drone/setup-stages.sh        "CouponVoucherMixCheckout"      "47-CouponVoucherMixCheckout"       $php_versions
            - sh tests/drone/setup-stages.sh        "Product_Quantity"              "48-Product_Quantity"               $php_versions
            - sh tests/drone/setup-stages.sh        "Oder_Backend"                  "49-Oder_Backend"                   $php_versions
branches:
    exclude: [ crowdin ]
