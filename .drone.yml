clone:
    default:
        image: plugins/git
        recursive: false

pipeline:
    00-cache:
        group: 00-setup
        image: redwebaps/redshop-cache:latest
        pull: true
        commands:
            # redSHOP Composer cache
            - mv /opt/cache/redSHOP/vendor .
            - touch tests/.cache.composer.tmp
            # redSHOP Composer cache for libraries
            - mv /opt/cache/redSHOP/libraries/redshop/vendor libraries/redshop
            - touch tests/.cache.libraries.redshop.composer.tmp
            # redSHOP Composer cache for redshopb_pdf plugin
            - mv /opt/cache/redSHOP/plugins/redshop_pdf/tcpdf/helper/vendor plugins/redshop_pdf/tcpdf/helper
            - touch tests/.cache.plugins.redshop_pdf.composer.tmp
            # redSHOP npm cache
            - mv /opt/cache/redSHOP/node_modules .
            - touch tests/.cache.npm.tmp
            # Joomla CMS
            # - mv /opt/cache/joomla-cms tests
            # - touch tests/.cache.joomla-cms.tmp

    00-setup:
        group: 00-setup
        image: redwebaps/testbox-chromedriver:2.38
        pull: true
        commands:
            # Composer setup
            - while [ ! -f tests/.cache.composer.tmp ]; do sleep 1; done                        # Comment if not using composer cache
            - composer config --global --auth github-oauth.github.com 4281d0ba7e8f1caded4c8b949a1c115902e30113
            # - composer install --prefer-dist                                                  # Uncomment if not using composer cache
            - while [ ! -f tests/.cache.libraries.redshop.composer.tmp ]; do sleep 1; done      # Comment if not using composer cache for libraries
            # - composer install --prefer-dist -d libraries/redshop                             # Uncomment if not using composer cache for libraries
            - while [ ! -f tests/.cache.plugins.redshop_pdf.composer.tmp ]; do sleep 1; done    # Comment if not using composer cache for redshopb_pdf plugin
            # - composer install --prefer-dist -d plugins/redshop_pdf/tcpdf/helper              # Uncomment if not using composer cache for redshopb_pdf plugin

            # npm setup
            - while [ ! -f tests/.cache.npm.tmp ]; do sleep 1; done                             # Comment if not using npm cache
            # - npm install gulp                                                                # Uncomment if not using npm cache

            - mv gulp-config.json.dist gulp-config.json
            - gulp release --skip-version
            # Codeception setup
            - cp tests/acceptance.suite.yml.dist.drone tests/acceptance.suite.yml
            # Test setup
            # - while [ ! -f tests/.cache.joomla-cms.tmp ]; do sleep 1; done                      # Comment if not using Joomla CMS cache
            - vendor/bin/robo tests:site-preparation 0 0
            # Ownership for uid 82
            - chown -R www-data:www-data .
            # Touching temp file to start the setup of each installation (in each PHP version - via services)
            - touch tests/.setup.tmp

    00-setup-56:
        group: 00-setup
        image: redwebaps/testbox-chromedriver:2.38
        pull: true
        environment:
            - tests_user=admin
            - tests_suite=00-setup
            - tests_db=setup
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-00-setup
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &

            # Waiting for setup to be done
            - while [ ! -f tests/.setup.tmp ]; do sleep 1; done

            # Creating first clone for tests setup
            - mkdir -p tests/$tests_suite$php_version/joomla-cms
            - rsync -a tests/joomla-cms/ tests/$tests_suite$php_version/joomla-cms
            # Creates the database (required because of the Codeception Db module)
            - mysql -u root -proot -h db -e "CREATE DATABASE $tests_db$php_version"
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs the setup and installation routine
            - su www-data -c 'vendor/bin/robo tests:setup 0 0'
            # Touching temp file to start the environment cloning (see setup-stages service)
            - touch tests/.setup$php_version.tmp

    00-setup-73:
        group: 00-setup
        image: redwebaps/testbox-chromedriver:2.38
        pull: true
        environment:
            - tests_user=admin
            - tests_suite=00-setup
            - tests_db=setup
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-00-setup
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &

            # Waiting for setup to be done
            - while [ ! -f tests/.setup.tmp ]; do sleep 1; done

            # Creating first clone for tests setup
            - mkdir -p tests/$tests_suite$php_version/joomla-cms
            - rsync -a tests/joomla-cms/ tests/$tests_suite$php_version/joomla-cms
            # Creates the database (required because of the Codeception Db module)
            - mysql -u root -proot -h db -e "CREATE DATABASE $tests_db$php_version"
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs the setup and installation routine
            - su www-data -c 'vendor/bin/robo tests:setup 0 0'
            # Touching temp file to start the environment cloning (see setup-stages service)
            - touch tests/.setup$php_version.tmp
            - vendor/bin/robo tests:paid-extensions-for-integration-tests 1 1
            - cd tests/extension/
            - ls
            - cd paid-extensions
            - mv gulp-config.sample.json gulp-config.json
            - npm install
            - gulp release --skip-version

    01-Uninstall-56:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=01-Uninstall
            - tests_db=Uninstall
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-01-Uninstall-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/uninstall/ 0 0'

    01-Uninstall-73:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=01-Uninstall
            - tests_db=Uninstall
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-01-Uninstall-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/uninstall/ 0 0'

    02-PriceProduct_ProductNotForSale-56:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=02-PriceProduct_ProductNotForSale
            - tests_db=PriceProduct_ProductNotForSale
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-02-PriceProduct_ProductNotForSale-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g01/ 0 0'

    02-PriceProduct_ProductNotForSale-73:
        group: 01-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=02-PriceProduct_ProductNotForSale
            - tests_db=PriceProduct_ProductNotForSale
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-02-PriceProduct_ProductNotForSale-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g01/ 0 0'

    03-State_Notices_Shipping-56:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=03-State_Notices_Shipping
            - tests_db=State_Notices_Shipping
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-03-State_Notices_Shipping-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g02 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g03 0 0'

    03-State_Notices_Shipping-73:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=03-State_Notices_Shipping
            - tests_db=State_Notices_Shipping
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-03-State_Notices_Shipping-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g02 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g03 0 0'

    04-integration_Discounts-56:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=04-integration_Discounts
            - tests_db=integration_Discounts
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-04-integration_Discounts-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g02 0 0'

    04-integration_Discounts-73:
        group: 02-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=04-integration_Discounts
            - tests_db=integration_Discounts
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-04-integration_Discounts-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g02 0 0'

    05-Voucher_Quotations_MassDiscount-56:
        group: 03-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=05-Voucher_Quotations_MassDiscount
            - tests_db=Voucher_Quotations_MassDiscount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-05-Voucher_Quotations_MassDiscount-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g03 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g05 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g06 0 0'

    05-Voucher_Quotations_MassDiscount-73:
        group: 03-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=05-Voucher_Quotations_MassDiscount
            - tests_db=Voucher_Quotations_MassDiscount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-05-Voucher_Quotations_MassDiscount-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g03 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g05 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g06 0 0'

    06-Wrapper_Stockroom-56:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=06-Wrapper_Stockroom
            - tests_db=Wrapper_Stockroom
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-06-Wrapper_Stockroom-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/ 0 0'

    06-Wrapper_Stockroom-73:
        group: 04-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=06-Wrapper_Stockroom
            - tests_db=Wrapper_Stockroom
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-06-Wrapper_Stockroom-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g04/ 0 0'

    07-Template_Quotation-56:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=07-Template_Quotation
            - tests_db=Template_Quotation
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-07-Template_Quotation-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g05 0 0'

    07-Template_Quotation-73:
        group: 05-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=07-Template_Quotation
            - tests_db=Template_Quotation
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-07-Template_Quotation-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g05 0 0'

    08-Country_DiscountProduct-56:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=08-Country_DiscountProduct
            - tests_db=Country_DiscountProduct
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-08-Country_DiscountProduct-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g06 0 0'

    08-Country_DiscountProduct-73:
        group: 06-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=08-Country_DiscountProduct
            - tests_db=Country_DiscountProduct
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-08-Country_DiscountProduct-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g06 0 0'

    09-Configuration_Currency_ShopperGroup-56:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=09-Configuration_Currency_ShopperGroup
            - tests_db=Configuration_Currency_ShopperGroup
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-09-Configuration_Currency_ShopperGroup-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/ 0 0'

    09-Configuration_Currency_ShopperGroup-73:
        group: 07-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=09-Configuration_Currency_ShopperGroup
            - tests_db=Configuration_Currency_ShopperGroup
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-09-Configuration_Currency_ShopperGroup-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g07/ 0 0'

    10-Custom_Field_Discount-56:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=10-Custom_Field_Discount
            - tests_db=Custom_Field_Discount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-10-Custom_Field_Discount-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g08/ 0 0'

    10-Custom_Field_Discount-73:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=10-Custom_Field_Discount
            - tests_db=Custom_Field_Discount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-10-Custom_Field_Discount-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g08 0 0'

    11-Compare_Attribute_GiftCard-56:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=11-Compare_Attribute_GiftCard
            - tests_db=Compare_Attribute_GiftCard
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-11-Compare_Attribute_GiftCard-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g08 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g10 0 0'

    11-Compare_Attribute_GiftCard-73:
        group: 08-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=11-Compare_Attribute_GiftCard
            - tests_db=Compare_Attribute_GiftCard
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-11-Compare_Attribute_GiftCard-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g08 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g10 0 0'

    12-Multi_checkout-56:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=12-Multi_checkout
            - tests_db=Multi_checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-12-Multi_checkout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09 0 0'

    12-Multi_checkout-73:
        group: 09-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=12-Multi_checkout
            - tests_db=Multi_checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-12-Multi_checkout-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g09 0 0'

    13-Tax_Group-56:
        group: 10-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=13-Tax_Group
            - tests_db=Tax_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-13-Tax_Group-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g10/Products/Tax_Group 0 0'

    13-Tax_Group-73:
        group: 10-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=13-Tax_Group
            - tests_db=Tax_Group
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-13-Tax_Group-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g10/Products/Tax_Group 0 0'

    14-Giftcard_Tax_Rate-56:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=14-Giftcard_Tax_Rate
            - tests_db=Giftcard_Tax_Rate
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-14-Giftcard_Tax_Rate-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g11 0 0'

    14-Giftcard_Tax_Rate-73:
        group: 11-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=14-Giftcard_Tax_Rate
            - tests_db=Giftcard_Tax_Rate
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-14-Giftcard_Tax_Rate-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g11 0 0'

    15-Mail_Coupon_User-56:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=15-Mail_Coupon_User
            - tests_db=Mail_Coupon_User
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-15-Mail_Coupon_User-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12 0 0'

    15-Mail_Coupon_User-73:
        group: 12-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=15-Mail_Coupon_User
            - tests_db=Mail_Coupon_User
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-15-Mail_Coupon_User-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g12 0 0'

    16-FieldGroup_MassDiscount-56:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=16-FieldGroup_MassDiscount
            - tests_db=FieldGroup_MassDiscount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-16-FieldGroup_MassDiscount-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g13 0 0'

    16-FieldGroup_MassDiscount-73:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=16-FieldGroup_MassDiscount
            - tests_db=FieldGroup_MassDiscount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-16-FieldGroup_MassDiscount-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g13 0 0'

    17-VAT_CheckoutDiscount-56:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=17-VAT_CheckoutDiscount
            - tests_db=VAT_CheckoutDiscount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-17-VAT_CheckoutDiscount-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g11 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g13 0 0'

    17-VAT_CheckoutDiscount-73:
        group: 13-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=17-VAT_CheckoutDiscount
            - tests_db=VAT_CheckoutDiscount
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-17-VAT_CheckoutDiscount-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g11 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g13 0 0'

    18-Voucher_Text_Supplier-56:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=18-Voucher_Text_Supplier
            - tests_db=Voucher_Text_Supplier
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-18-Voucher_Text_Supplier-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14 0 0'

    18-Voucher_Text_Supplier-73:
        group: 14-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=18-Voucher_Text_Supplier
            - tests_db=Voucher_Text_Supplier
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-18-Voucher_Text_Supplier-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g14 0 0'

    19-Manufacturer-73:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=19-Manufacturer
            - tests_db=Manufacturer
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-19-Manufacturer-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g15/Products/Manufacturer 0 0'

    20-One_Step_Checkout-56:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=20-One_Step_Checkout
            - tests_db=One_Steps_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-20-One_Step_Checkout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g15/One_Step_Checkout 0 0'

    20-One_Step_Checkout-73:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=20-One_Step_Checkout
            - tests_db=One_Steps_Checkout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-20-One_Step_Checkout-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g15/One_Step_Checkout 0 0'

    21-Category_ProductManagement-56:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
        - tests_user=admin
        - tests_suite=21-Category_ProductManagement
        - tests_db=Category_ProductManagement
        - build_path=/drone/src/github.com/${DRONE_REPO}
        - output_append=-21-Category_ProductManagement-56
        - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g15/Products/Category 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g16/Products/ProductManagement 0 0'

    21-Category_ProductManagement-73:
        group: 15-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
        - tests_user=admin
        - tests_suite=21-Category_ProductManagement
        - tests_db=Category_ProductManagement
        - build_path=/drone/src/github.com/${DRONE_REPO}
        - output_append=-21-Category_ProductManagement-73
        - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g15/Products/Category 0 0'
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/g16/Products/ProductManagement 0 0'

    22-CouponVoucherMixCheckout-56:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=22-CouponVoucherMixCheckout
            - tests_db=CouponVoucherMixCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-22-CouponVoucherMixCheckout-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g16/Discounts/CouponVoucherMixCheckout 0 0'

    22-CouponVoucherMixCheckout-73:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=22-CouponVoucherMixCheckout
            - tests_db=CouponVoucherMixCheckout
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-22-CouponVoucherMixCheckout-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/integration/g16/Discounts/CouponVoucherMixCheckout 0 0'

    23-Oder_Backend-56:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=23-Oder_Backend
            - tests_db=Oder_Backend
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-23-Oder_Backend-56
            - php_version=56
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/Oder_Backend/Orders 0 0'

    23-Oder_Backend-73:
        group: 16-tests
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_user=admin
            - tests_suite=23-Oder_Backend
            - tests_db=Oder_Backend
            - build_path=/drone/src/github.com/${DRONE_REPO}
            - output_append=-23-Oder_Backend-73
            - php_version=73
        commands:
            # Regular entry point
            - /entrypoint.sh &
            # Performs test after ensuring that the scenario has been fully set up
            - while [ ! -f tests/.cache.setup.$tests_suite$php_version.tmp ]; do sleep 1; done
            # Waits until Chromedriver is up and running
            - while ! nc -z localhost 9515; do sleep 1; done
            # Performs test
            - su www-data -c 'vendor/bin/robo tests:run acceptance/administrator/Oder_Backend/Orders 0 0'

    slack:
        image: plugins/slack
        webhook: https://hooks.slack.com/services/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
        channel: redshop-builds
        when:
            status: [ success, failure ]
        template: >
            {{#success build.status}}
              {{repo.name}} PR #{{build.pull}} succeeded in {{since build.started}}. Good job {{build.author}}!  Here is the build log: {{build.link}}.  Link to the PR: https://github.com/{{repo.owner}}/{{repo.name}}/pull/{{build.pull}}
            {{else}}
              {{repo.name}} PR #{{build.pull}} failed in {{since build.started}}. Fix me please {{build.author}}!  Here is the build log: {{build.link}}.  Link to the PR: https://github.com/{{repo.owner}}/{{repo.name}}/pull/{{build.pull}}
            {{/success}}

    error-report:
        image: redwebaps/testbox-chromedriver:2.38
        commands:
        - if [ -z "${CI_PULL_REQUEST}" ]; then export CI_PULL_REQUEST=1; fi
        - vendor/bin/robo send:build-report-error-slack redcomponent 365447364384436 Q94UM5kjZkZIrau8MIL93m0dN6U "$CI_REPO" "$CI_PULL_REQUEST" "https://hooks.slack.com/services/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" "#redshop-builds" "$CI_BUILD_URL"
        when:
            status: [ failure ]

services:
    db:
        image: mysql/mysql-server:5.7
        pull: true
        environment:
            - MYSQL_ROOT_PASSWORD=root
            - MYSQL_ROOT_HOST=%

    php56:
        image: redwebaps/php-apache:5.6
        pull: true
        environment:
            - WEB_DOCUMENT_ROOT=/drone/src/github.com/${DRONE_REPO}
            - JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=1

    php73:
        image: redwebaps/php-apache:7.3
        pull: true
        environment:
            - WEB_DOCUMENT_ROOT=/drone/src/github.com/${DRONE_REPO}
            - JOOMLA_INSTALLATION_DISABLE_LOCALHOST_CHECK=1

    setup-stages:
        image: redwebaps/testbox-chromedriver:2.38
        environment:
            - tests_suite=00-setup
            - tests_db=setup
            - php_versions=56,73
        commands:
            # Base installation
            - sh tests/drone/setup-base-install.sh  $tests_db                              $tests_suite                             $php_versions
            # Stages setup
            - sh tests/drone/setup-stages.sh        "Uninstall"                            "01-Uninstall"                           $php_versions
            - sh tests/drone/setup-stages.sh        "PriceProduct_ProductNotForSale"       "02-PriceProduct_ProductNotForSale"      $php_versions
            - sh tests/drone/setup-stages.sh        "State_Notices_Shipping"               "03-State_Notices_Shipping"              $php_versions
            - sh tests/drone/setup-stages.sh        "integration_Discounts"                "04-integration_Discounts"               $php_versions
            - sh tests/drone/setup-stages.sh        "Voucher_Quotations_MassDiscount"      "05-Voucher_Quotations_MassDiscount"     $php_versions
            - sh tests/drone/setup-stages.sh        "Wrapper_Stockroom"                    "06-Wrapper_Stockroom"                   $php_versions
            - sh tests/drone/setup-stages.sh        "Template_Quotation"                   "07-Template_Quotation"                  $php_versions
            - sh tests/drone/setup-stages.sh        "Country_DiscountProduct"              "08-Country_DiscountProduct"             $php_versions
            - sh tests/drone/setup-stages.sh        "Configuration_Currency_ShopperGroup"  "09-Configuration_Currency_ShopperGroup" $php_versions
            - sh tests/drone/setup-stages.sh        "Custom_Field_Discount"                "10-Custom_Field_Discount"               $php_versions
            - sh tests/drone/setup-stages.sh        "Compare_Attribute_GiftCard"           "11-Compare_Attribute_GiftCard"          $php_versions
            - sh tests/drone/setup-stages.sh        "Multi_checkout"                       "12-Multi_checkout"                      $php_versions
            - sh tests/drone/setup-stages.sh        "Tax_Group"                            "13-Tax_Group"                           $php_versions
            - sh tests/drone/setup-stages.sh        "Giftcard_Tax_Rate"                    "14-Giftcard_Tax_Rate"                   $php_versions
            - sh tests/drone/setup-stages.sh        "Mail_Coupon_User"                     "15-Mail_Coupon_User"                    $php_versions
            - sh tests/drone/setup-stages.sh        "FieldGroup_MassDiscount"              "16-FieldGroup_MassDiscount"             $php_versions
            - sh tests/drone/setup-stages.sh        "VAT_CheckoutDiscount"                 "17-VAT_CheckoutDiscount"               $php_versions
            - sh tests/drone/setup-stages.sh        "Voucher_Text_Supplier"                "18-Voucher_Text_Supplier"               $php_versions
            - sh tests/drone/setup-stages.sh        "Manufacturer"                         "19-Manufacturer"                        73
            - sh tests/drone/setup-stages.sh        "One_Steps_Checkout"                   "20-One_Step_Checkout"                   $php_versions
            - sh tests/drone/setup-stages.sh        "Category_ProductManagement"           "21-Category_ProductManagement"          $php_versions
            - sh tests/drone/setup-stages.sh        "CouponVoucherMixCheckout"             "22-CouponVoucherMixCheckout"            $php_versions
            - sh tests/drone/setup-stages.sh        "Oder_Backend"                         "23-Oder_Backend"                        $php_versions
branches:
    exclude: [ crowdin ]