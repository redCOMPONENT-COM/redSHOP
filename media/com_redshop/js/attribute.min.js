function getHTTPObject(){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e}function productaddprice(e,t){var r=1;if(prefix=0!=t?t:e,document.getElementById("accessory_data"))var a=document.getElementById("accessory_data").value;if(document.getElementById("acc_quantity_data"))var d=document.getElementById("acc_quantity_data").value;if(document.getElementById("acc_attribute_data"))var n=document.getElementById("acc_attribute_data").value.replace("##","::");if(document.getElementById("acc_property_data"))var i=document.getElementById("acc_property_data").value.replace("##","::");if(document.getElementById("acc_subproperty_data"))var o=document.getElementById("acc_subproperty_data").value.replace("##","::");if(document.getElementById("quantity"+prefix)&&document.getElementById("quantity"+prefix)&&(r=document.getElementById("quantity"+prefix).value),document.getElementById("attribute_data"))var c=document.getElementById("attribute_data").value.replace("##","::");if(document.getElementById("property_data"))var u=document.getElementById("property_data").value.replace("##","::");if(document.getElementById("subproperty_data"))var l=document.getElementById("subproperty_data").value.replace("##","::");var _=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=product&task=displayProductaddprice&tmpl=component&qunatity="+r;_=_+"&product_id="+e+"&attribute_data="+c+"&property_data="+u+"&subproperty_data="+l,_=_+"&accessory_data="+a+"&acc_quantity_data="+d+"&acc_attribute_data="+n+"&acc_property_data="+i+"&acc_subproperty_data="+o,request=getHTTPObject(),request.onreadystatechange=function(){if(4==request.readyState){var t=request.responseText.split(":"),a=0,d=0;document.getElementById("wrapper_price")&&(a=parseFloat(document.getElementById("wrapper_price").value)),document.getElementById("wrapper_price_withoutvat")&&(d=parseFloat(document.getElementById("wrapper_price_withoutvat").value)),document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix).innerHTML=number_format(parseFloat(t[0])+a*r,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_discount_price"+prefix)&&(document.getElementById("display_product_discount_price"+prefix).innerHTML=number_format(t[4],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_without_vat"+prefix)&&(document.getElementById("display_product_price_without_vat"+prefix).innerHTML=number_format(parseFloat(t[5])+d*r,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_no_vat"+prefix)&&(document.getElementById("display_product_price_no_vat"+prefix).innerHTML=number_format(parseFloat(t[5])+d*r,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_old_price"+prefix)&&(document.getElementById("display_product_old_price"+prefix).innerHTML=number_format(t[2],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_saving_price"+prefix)&&(document.getElementById("display_product_saving_price"+prefix).innerHTML=number_format(t[3],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("main_price"+prefix)&&(document.getElementById("main_price"+prefix).value=t[0]),document.getElementById("product_price_no_vat"+prefix)&&(document.getElementById("product_price_no_vat"+prefix).value=t[5],document.getElementById("main_price"+e)&&(document.getElementById("main_price"+e).value=t[0]),document.getElementById("product_price_no_vat"+e)&&(document.getElementById("product_price_no_vat"+e).value=t[5]),document.getElementById("product_old_price"+e)&&(document.getElementById("product_old_price"+e).value=t[2])),document.getElementById("product_old_price"+prefix)&&(document.getElementById("product_old_price"+prefix).value=t[2])}},request.open("GET",_,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function changePropertyDropdown(e,t,r,a,d,n,o){var c,u=arguments,l=[],_=[],m="",p="",s="",y="",g="";document.getElementById("isAjaxBoxOpen")&&(g=document.getElementById("isAjaxBoxOpen").value);var E="";"viewajaxdetail"==g&&(E="ajax_"),c=0!=t?E+"acc_":0!=r?E+"rel_":E+"prd_";var v=c+e+"_"+t+"_"+a;if(document.getElementById("subattdata_"+v)&&(y=document.getElementById("subattdata_"+v).value),s=s+"&subatthtml="+y,s=s+"&product_id="+e,s=s+"&attribute_id="+a,s=s+"&accessory_id="+t,s=s+"&relatedprd_id="+r,document.getElementsByName("property_id_"+v+"[]")){for(var I=document.getElementsByName("property_id_"+v+"[]"),f=0,S=0;S<I.length;S++)"checkbox"==I[S].type||"radio"==I[S].type?I[S].checked&&(l[f++]=I[S].value):I[S].selectedIndex&&(l[f++]=I[S].options[I[S].selectedIndex].value);for(var h=0;h<l.length;h++){var B='[name="subproperty_id_'+v+"_"+l[h]+'[]"]';jQuery(B).length&&("radio"==jQuery(B).attr("type")||"checkbox"==jQuery(B).attr("type")?_.push(jQuery(B+":checked").val()):_.push(jQuery(B).val()))}m=l.join(","),p=_.join(","),s=s+"&property_id="+m,s=s+"&subproperty_id="+p}var R=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=product&task=displaySubProperty&tmpl=component&isAjaxBox="+g;R+=s,request=getHTTPObject(),request.onreadystatechange=function(){if(document.getElementById("property_responce"+v)&&(document.getElementById("property_responce"+v).style.display="none"),4!=request.readyState&&document.getElementById("rs_image_loader")&&(document.getElementById("rs_image_loader").style.display="block"),4==request.readyState){var a=l.length>0?l[0]:0;if(document.getElementById("property_responce"+v)){document.getElementById("property_responce"+v).innerHTML=request.responseText,document.getElementById("property_responce"+v).style.display="";for(var d=0;d<l.length;d++){a=l[d];var c=v+"_"+a;if(document.getElementById("divsubimgscroll"+c)){var _=document.getElementById("divsubimgscroll"+c).innerHTML;if(""!=_){var m=_.split("#_#"),p="isFlowers"+c;p=new ImageScroller("isFlowersFrame"+c,"isFlowersImageRow"+c);var s="subproperty_id_"+c,y="";for(i=0;i<m.length;i++){y=m[i].match(/\d+/g);var g=y[0],E=document.getElementById(s+"_name"+g).value;p.addThumbnail(m[i],"javascript:isFlowers"+c+".scrollImageCenter('"+i+"');setSubpropImage('"+e+"','"+s+"','"+g+"');calculateTotalPrice('"+e+"','"+r+"');displayAdditionalImage('"+e+"','"+t+"','"+r+"','"+a+"','"+g+"');",E,"",s+"_subpropimg_"+g,"")}o>n?o:n,p.setThumbnailHeight(parseInt(redSHOP.RSConfig._("ATTRIBUTE_SCROLLER_THUMB_HEIGHT"))),p.setThumbnailWidth(parseInt(redSHOP.RSConfig._("ATTRIBUTE_SCROLLER_THUMB_WIDTH"))),p.setThumbnailPadding(5),p.setScrollType(0),p.enableThumbBorder(!1),p.setClickOpenType(1),p.setThumbsShown(redSHOP.RSConfig._("NOOF_SUBATTRIB_THUMB_FOR_SCROLLER")),p.setNumOfImageToScroll(1),p.renderScroller(),window["isFlowers"+c]=p}}}}if(displayAdditionalImage(e,t,r,a,0),calculateTotalPrice(e,r),jQuery('select:not(".disableBootstrapChosen")').select2(),redSHOP.onChangePropertyDropdown.length>0)for(var I=0,f=redSHOP.onChangePropertyDropdown.length;I<f;I++)new redSHOP.onChangePropertyDropdown[I](u,l)}},request.open("GET",R,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function display_image(e,t,r){redSHOP.RSConfig._("PRODUCT_DETAIL_IS_LIGHTBOX")||(document.getElementById("a_main_image"+t).href=r),document.getElementById("main_image"+t).src=e}function display_image_out(e,t,r){document.getElementById("main_image"+t).src=r}function display_image_add(e,t){document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=e)}function display_image_add_out(e,t){document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=""!=subproperty_main_image?subproperty_main_image:e)}function collectAttributes(e,t,r){var a,d=[],n=[],i=[],o=0,c=0,u=0,l=!0,_="",m="",p=jQuery("#isAjaxBoxOpen").val(),s=jQuery("#product_preorder"+e).val(),y=jQuery("#product_stock"+e).val(),g=jQuery("#preorder_product_stock"+e).val(),E="";jQuery("#accquantity_"+e+"_"+t).length&&jQuery("#accquantity_"+e+"_"+t).val(),"viewajaxdetail"==p&&(E="ajax_"),0!=t?(a=E+"acc_",o=parseFloat(jQuery("#accessory_id_"+e+"_"+t).attr("accessoryprice")),c=parseFloat(jQuery("#accessory_id_"+e+"_"+t).attr("accessorywithoutvatprice")),u=o):(a=0!=r?E+"rel_":E+"prd_",o=parseFloat(jQuery("#main_price"+e).val()),u=parseFloat(jQuery("#product_old_price"+e).val()),jQuery("#product_price_excluding_price"+e).length?c=parseFloat(jQuery("#product_price_excluding_price"+e).val()):jQuery("#product_price_no_vat"+e).length&&(c=parseFloat(jQuery("#product_price_no_vat"+e).val())));var v=a+e+"_"+t,I=a+e;l&&(l=checkProductStockRoom(y,I,s,g));var f=jQuery('[name="attribute_id_'+v+'[]"]');f.length<=0&&1==redSHOP.RSConfig._("AJAX_CART_BOX")&&(_=jQuery("#requiedAttribute").val(),m=jQuery("#requiedProperty").val()),f.each(function(r,o){var p=o.value;v=a+e+"_"+t+"_"+p,d.push(p);var y=jQuery('[name="property_id_'+v+'[]"]');if(y.length){setPropertyImage(e,"property_id_"+v);var g=[],E=[];y.each(function(e,t){"checkbox"==t.type||"radio"==t.type?t.checked&&0!=t.value&&E.push(t.value):t.selectedIndex&&0!=t.options[t.selectedIndex].value&&E.push(t.options[t.selectedIndex].value),t.required&&g.push(t.getAttribute("attribute_name"))}),E.length&&n.push(E.join(",,")),g.length&&!E.length&&(_+=Joomla.JText._("COM_REDSHOP_ATTRIBUTE_IS_REQUIRED")+" "+unescape(g.join("<br>"))+"\n");var f="property_id_"+v+"_oprand",S="property_id_"+v+"_proprice_withoutvat";priceOldElementId="property_id_"+v+"_prooldprice",u=calculateSingleProductPrice(u,f,priceOldElementId,E),c=calculateSingleProductPrice(c,f,S,E);var h=!1,B=[];E.each(function(r){var d="property_id_"+v+"_stock"+r,n="property_id_"+v+"_preorderstock"+r;jQuery("#"+d).length>0&&jQuery("#"+n).length>0&&l&&0==t&&(l=checkProductStockRoom(jQuery("#"+d).val(),I,s,jQuery("#"+n).val()));var o=a+e+"_"+t+"_"+p+"_"+r,_='[name="subproperty_id_'+o+'[]"]';if(jQuery(_).length){setSubpropertyImage(e,"subproperty_id_"+o),h=!0;var y=[];"radio"==jQuery(_).attr("type")||"checkbox"==jQuery(_).attr("type")?y.push(jQuery(_+":checked").val()):y.push(jQuery(_).val()),y.each(function(e){var r="#subproperty_id_"+o+"_stock"+e,a="#subproperty_id_"+o+"_preOrderStock"+e;1==redSHOP.RSConfig._("USE_STOCKROOM")&&jQuery(r).length&&0==t&&(l=checkProductStockRoom(jQuery(r).val(),I,s,jQuery(a).val()))}),1==jQuery(_).attr("required")&&y.length&&(m+=jQuery("#subprop_lbl").html()+" "+unescape(jQuery(_).attr("subpropName"))+"\n");var g="subproperty_id_"+o+"_oprand",E="subproperty_id_"+o+"_proprice_withoutvat";priceOldElementId="subproperty_id_"+o+"_prooldprice",u=calculateSingleProductPrice(u,g,priceOldElementId,y),c=calculateSingleProductPrice(c,g,E,y),B.push(y.join("::"))}i.push(B.join(",,"))})}}),o=c,o>0&&(o*=1+redSHOP.RSConfig._("BASE_TAX")),0==n.length&&(d=[]),0!=t?(jQuery("#acc_attribute_data").val(d.join("##")),jQuery("#acc_property_data").val(n.join("##")),jQuery("#acc_subproperty_data").val(i.join("##")),jQuery("#accessory_price").val(o),jQuery("#accessory_price_withoutvat").val(c)):(jQuery("#attribute_data").val(d.join("##")),jQuery("#property_data").val(n.join("##")),jQuery("#subproperty_data").val(i.join("##")),jQuery("#tmp_product_price").val(o),jQuery("#productprice_notvat").val(c),jQuery("#tmp_product_old_price").val(u)),jQuery("#requiedAttribute").val(_),jQuery("#requiedProperty").val(m)}function checkProductStockRoom(e,t,r,a){var d="instock";return e>0?d=1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"instock":0==e&&(d="global"==r&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||""==r&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||"no"==r?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"instock":"outofstock":0==a?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"preorder":"outofstock":1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"preorder"),redSHOP.updateStockStatusMessage(d,t),"instock"==d}function calculateSingleProductPrice(e,t,r,a){e=parseFloat(e);for(var d=0;d<a.length&&0!=a[d];d++){var n=a[d],i=jQuery("#"+t+n).val(),o=parseFloat(jQuery("#"+r+n).val());if("-"==i)e-=o;else if("+"==i)e+=o;else if("*"==i)e*=o;else if("/"==i)e/=o;else if("="==i){e=o,!1;break}}return e}function calculateTotalPrice(e,t){if(0==e||""==e)return!1;var r=0,a=0,d=0,n=0,i=0,o=parseFloat(collectAccessory(e,t)),c=0!=t?t:e,u=0,l=0;collectAttributes(e,0,t),jQuery("#tmp_product_old_price").length&&(i=parseFloat(jQuery("#tmp_product_old_price").val())),jQuery("#accessory_price_withoutvat").length&&(n=parseFloat(jQuery("#accessory_price_withoutvat").val())),jQuery("#quantity"+c).length&&jQuery("#quantity"+c).val(),jQuery("#tmp_product_price").length&&(r=parseFloat(jQuery("#tmp_product_price").val())),jQuery("#hidden_subscription_prize").length&&(r+=parseFloat(jQuery("#hidden_subscription_prize").val())),jQuery("#productprice_notvat").length&&(a=parseFloat(jQuery("#productprice_notvat").val())),jQuery("#tmp_product_old_price").length&&(d=parseFloat(jQuery("#tmp_product_old_price").val())),setWrapperComboBox(),jQuery("#wrapper_price").length&&(u=parseFloat(jQuery("#wrapper_price").val())),jQuery("#wrapper_price_withoutvat").length&&(l=parseFloat(jQuery("#wrapper_price_withoutvat").val())),final_price_f=r+o+u,product_price_without_vat=a+n+l,i=d+o+u,savingprice=parseFloat(i)-parseFloat(final_price_f),"1"==redSHOP.RSConfig._("SHOW_PRICE")?!final_price_f||"1"==redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&"1"!=redSHOP.RSConfig._("SHOW_QUOTATION_PRICE")?(final_price=getPriceReplacement(final_price_f),final_price_novat=getPriceReplacement(product_price_without_vat)):(final_price=number_format(final_price_f,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),final_price_novat=number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))):(final_price=getPriceReplacement(final_price_f),final_price_novat=getPriceReplacement(product_price_without_vat)),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))&&("1"==redSHOP.RSConfig._("SHOW_PRICE_WITHOUT_VAT")?(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price_novat),jQuery("#display_product_discount_price"+e).html(final_price_novat)):(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price),jQuery("#display_product_discount_price"+e).html(final_price)),product_price_without_vat?product_price_without_vat=number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):product_price_without_vat=getPriceReplacement(product_price_without_vat),jQuery("#display_product_price_without_vat"+e).html(product_price_without_vat),jQuery("#display_product_price_no_vat"+e).html(product_price_without_vat),jQuery("#display_product_old_price"+e).length&&(i=i?number_format(i,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):getPriceReplacement(i),jQuery("#display_product_old_price"+e).html(i)),jQuery("#display_product_saving_price"+e).length&&(savingprice=number_format(savingprice,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),jQuery("#display_product_saving_price"+e).html(savingprice)),jQuery("#rs_selected_accessory_price").html(final_price))}function collectAccessory(e,t){if(0==e||""==e)return!1;var r="",a="",d=0,n=0,i=0,o=0,c=0,u=[],l=[],_=[],m=[],p=[];if(document.getElementById("isAjaxBoxOpen")&&(r=document.getElementById("isAjaxBoxOpen").value),"viewajaxdetail"==r&&(a="ajax_"),document.getElementsByName("accessory_id_"+a+e+"[]")){if(dcatt=document.getElementsByName("accessory_id_"+a+e+"[]"),document.getElementById("giftcard_id")&&document.getElementById("giftcard_id").value>0&&0==dcatt.length)return!0;var s=dcatt.length;for(j=0;j<s;j++){var y=0,g=0,E=dcatt[j].value,v=a+e+"_"+E,I=0;acc_chk=document.getElementById("accessory_id_"+v),document.getElementById("attribute_id_"+v)&&document.getElementById("attribute_id_"+v),I=dcatt[j].checked;var f=1;qid=0!=t?t:e,f=document.getElementById("accquantity_"+v)?document.getElementById("accquantity_"+v).value:document.getElementById("quantity"+qid)&&"select-one"==document.getElementById("quantity"+qid).type?document.getElementById("quantity"+qid).value:1,I?(u[c]=E,l[c]=f,collectAttributes(e,E,t),document.getElementById("accessory_price")&&(y=parseFloat(document.getElementById("accessory_price").value)),document.getElementById("accessory_price_withoutvat")&&(g=parseFloat(document.getElementById("accessory_price_withoutvat").value)),document.getElementById("acc_attribute_data")&&(_[c]=document.getElementById("acc_attribute_data").value),document.getElementById("acc_property_data")&&(m[c]=document.getElementById("acc_property_data").value),document.getElementById("acc_subproperty_data")&&(p[c]=document.getElementById("acc_subproperty_data").value),document.getElementById("divaccstatus"+v)&&(document.getElementById("divaccstatus"+v).className="accessorystatus added"),c++):document.getElementById("divaccstatus"+v)&&(document.getElementById("divaccstatus"+v).className="accessorystatus"),n+=parseFloat(y)*f,i+=parseFloat(g)*f}d+=parseFloat(n),o+=parseFloat(i),document.getElementById("accessory_data")&&(document.getElementById("accessory_data").value=u.join("@@")),document.getElementById("acc_quantity_data")&&(document.getElementById("acc_quantity_data").value=l.join("@@")),document.getElementById("acc_attribute_data")&&(document.getElementById("acc_attribute_data").value=_.join("@@")),document.getElementById("acc_property_data")&&(document.getElementById("acc_property_data").value=m.join("@@")),document.getElementById("acc_subproperty_data")&&(document.getElementById("acc_subproperty_data").value=p.join("@@")),document.getElementById("accessory_price")&&(document.getElementById("accessory_price").value=d),document.getElementById("accessory_price_withoutvat")&&(document.getElementById("accessory_price_withoutvat").value=o)}return d}function number_format(e,t,r,a){var d=e,n=t;d*=redSHOP.RSConfig._("CURRENCY_CONVERT");var i=function(e,t){var r=Math.pow(10,t);return(Math.round(e*r)/r).toString()};d=isFinite(+d)?+d:0,n=isFinite(+n)?Math.abs(n):0;var o,c,u=void 0===a?",":a,l=void 0===r?".":r,_=n>0?i(d,n):i(Math.round(d),n),m=i(Math.abs(d),n);m>=1e3?(o=m.split(/\D/),c=o[0].length%3||3,o[0]=_.slice(0,c+(d<0))+o[0].slice(c).replace(/(\d{3})/g,u+"$1"),_=o.join(l)):_=_.replace(".",l);var p=_.indexOf(l);n>=1&&-1!==p&&_.length-p-1<n?_+=new Array(n-(_.length-p-1)).join(0)+"0":n>=1&&-1===p&&(_+=l+new Array(n).join(0)+"0");return"front"==redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION")?redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+_:"behind"==redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION")?_+redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT"):"none"==redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION")?_:redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+_}function getPriceReplacement(e){var t="";return"0"==redSHOP.RSConfig._("SHOW_PRICE")&&(url=redSHOP.RSConfig._("PRICE_REPLACE_URL"),""==url&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("PRICE_REPLACE")+"</a>"),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&0==e&&(url=redSHOP.RSConfig._("ZERO_PRICE_REPLACE_URL"),""==url&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("ZERO_PRICE_REPLACE")+"</a>",null===url&&null===redSHOP.RSConfig._("ZERO_PRICE_REPLACE"))?"":t}function setWrapper(e,t,r,a){document.getElementById("wrapper_id")&&(document.getElementById("wrapper_id").value=e),document.getElementById("sel_wrapper_id")&&(document.getElementById("sel_wrapper_id").value=e),document.getElementById("wrapper_price").value=t,document.getElementById("wrapper_price_withoutvat").value=r,calculateTotalPrice(a,0)}function setPropImage(e,t,r){var a=document.getElementById(t);if(a)if("checkbox"==a.type||"radio"==a.type)for(var d=document.getElementsByName(t+"[]"),n=0;n<d.length;n++){var i=d[n].value;i==r&&(d[n].checked=!0)}else for(var n=0;n<a.options.length;n++){var i=a.options[n].value;i==r&&(a.options[n].selected=!0)}}function setSubpropImage(e,t,r){var a=document.getElementById(t);if(a)if("checkbox"==a.type||"radio"==a.type)for(var d=document.getElementsByName(t+"[]"),n=0;n<d.length;n++){d[n].value;d[n].value==r&&(d[n].checked=!0)}else for(var n=0;n<a.options.length;n++){a.options[n].value;a.options[n].value==r&&(a.options[n].selected=!0)}}function setPropertyImage(e,t){var r=0,a=document.getElementById(t);if(a)if("checkbox"==a.type||"radio"==a.type)for(var d=document.getElementsByName(t+"[]"),n=0;n<d.length;n++){var i="";r=d[n].value,d[n].checked&&(i="1px solid"),document.getElementById(t+"_propimg_"+r)&&(document.getElementById(t+"_propimg_"+r).style.border=i)}else for(var n=0;n<a.length;n++){var i="";r=a[n].value,a[a.selectedIndex].value==r&&(i="1px solid"),document.getElementById(t+"_propimg_"+r)&&(document.getElementById(t+"_propimg_"+r).style.border=i)}}function setSubpropertyImage(e,t,r){var r=0,a=document.getElementById(t);if(a)if("checkbox"==a.type||"radio"==a.type)for(var d=document.getElementsByName(t+"[]"),n=0;n<d.length;n++){var i="";r=d[n].value,d[n].checked&&(i="1px solid"),document.getElementById(t+"_subpropimg_"+r)&&(document.getElementById(t+"_subpropimg_"+r).style.border=i)}else for(var n=0;n<a.length;n++){var i="";r=a[n].value,a[a.selectedIndex].value==r&&(i="1px solid"),document.getElementById(t+"_subpropimg_"+r)&&(document.getElementById(t+"_subpropimg_"+r).style.border=i)}}function displayAdditionalImage(e,t,r,a,d){var n="&product_id="+e;n=n+"&accessory_id="+t,n=n+"&relatedprd_id="+r,n=n+"&property_id="+a,n=n+"&subproperty_id="+d;var i="";if(0!=t?(prefix="acc_",e=t):prefix=0!=r?"rel_":"prd_",collectAttributes(e,0,r),document.getElementById("property_data")){var o=document.getElementById("property_data").value;n=n+"&property_data="+encodeURIComponent(o)}if(document.getElementById("subproperty_data")){var c=document.getElementById("subproperty_data").value;n=n+"&subproperty_data="+encodeURIComponent(c)}document.getElementById(prefix+"main_imgwidth")&&(n=n+"&main_imgwidth="+parseInt(document.getElementById(prefix+"main_imgwidth").value)),document.getElementById(prefix+"main_imgheight")&&(n=n+"&main_imgheight="+parseInt(document.getElementById(prefix+"main_imgheight").value));var u=0;if(document.getElementById("a_main_image"+e)||document.getElementById("main_image"+e)){var l="";if(document.getElementById("a_main_image"+e)){var _=document.getElementById("a_main_image"+e).href;void 0!==_&&(_=_.split(""),l=_.reverse(),l=l.join(""),_=l.split("."),_=_[0].split(""),l=_.reverse(),l=l.join(""))}else{var _=document.getElementById("main_image"+e).src;void 0!==_&&(_=_.split(""),l=_.reverse(),l=l.join(""),_=l.split("."),_=_[0].split(""),l=_.reverse(),l=l.join(""),l=l.split("&"),l=l[0])}l=l.toLowerCase(),"jpg"!=l&&"jpeg"!=l&&"png"!=l&&"gif"!=l&&"bmp"!=l||(u=1)}var m=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=product&task=displayAdditionImage&redview="+redSHOP.RSConfig._("REDSHOP_VIEW")+"&redlayout="+redSHOP.RSConfig._("REDSHOP_LAYOUT")+"&tmpl=component";m+=n,request=getHTTPObject(),request.onreadystatechange=function(){if(4==request.readyState){i=request.responseText;var t=i.split("`_`");""!=t[9]&&document.getElementById("product_number_variable"+e)&&(document.getElementById("product_number_variable"+e).innerHTML=t[9]),subproperty_main_image=t[4],document.getElementById("a_main_image"+e)&&(""!=t[2]&&1==u&&(document.getElementById("a_main_image"+e).href=t[2]),""!=t[3]&&(document.getElementById("a_main_image"+e).title=t[3])),document.getElementById("main_image"+e).src=t[4],document.getElementsByClassName("product_more_videos")[0].innerHTML=t[16],document.getElementById("additional_images"+e)&&""!=t[1]&&(document.getElementById("additional_images"+e).innerHTML=t[1]),document.getElementById("hidden_attribute_cartimage"+e)&&(document.getElementById("hidden_attribute_cartimage"+e).value=t[12]),document.getElementById("stockImage"+e)&&""!=t[5]&&(document.getElementById("stockImage"+e).src=t[5]),document.getElementById("stockImageTooltip"+e)&&""!=t[6]&&(document.getElementById("stockImageTooltip"+e).innerHTML=t[6]),document.getElementById("displayProductInStock"+e)&&""!=t[10]&&(document.getElementById("displayProductInStock"+e).innerHTML=t[10]),document.getElementById("ProductAttributeMinDelivery"+e)&&""!=t[7]&&(document.getElementById("ProductAttributeMinDelivery"+e).innerHTML=t[7]),document.getElementById("stock_status_div"+e)&&""!=t[11]&&(document.getElementById("stock_status_div"+e).innerHTML=t[11]),document.getElementById("notify_stock"+e)&&(document.getElementById("notify_stock"+e).innerHTML=t[13]),document.getElementById("stock_availability_date_lbl"+e)&&(document.getElementById("stock_availability_date_lbl"+e).innerHTML=t[14]),document.getElementById("stock_availability_date"+e)&&(document.getElementById("stock_availability_date"+e).innerHTML=t[15]);preloadSlimbox({isenable:!0,mainImage:!1})}},request.open("GET",m,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function preloadSlimbox(e){if(e.isenable){var t={handler:"image"},r={handler:"iframe",size:{x:800,y:500}};redBOX.initialize({}),e.mainImage?redBOX.assign($$("a[rel='myallimg']"),t):(redBOX.assign($$(".additional_image > a[rel='myallimg']"),t),redBOX.assign($$("[id^='additional_vids_'] > a.modal"),r))}}function setWrapperComboBox(){document.getElementById("wrapper_id")&&document.getElementById("sel_wrapper_id")&&(document.getElementById("sel_wrapper_id").value=document.getElementById("wrapper_id").value);var e=document.getElementsByName("w_price"),t=0;document.getElementById("sel_wrapper_id")&&(t=document.getElementById("sel_wrapper_id").value);var r=0,a=0;for(document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&0!=t&&(r=document.getElementById("w_price"+t).value,a=document.getElementById("w_price_withoutvat"+t).value),document.getElementById("wrapper_price")&&(document.getElementById("wrapper_price").value=r),document.getElementById("wrapper_price_withoutvat")&&(document.getElementById("wrapper_price_withoutvat").value=a),i=0;i<e.length;i++){var d=e[i].id.substr(7);document.getElementById("wrappertd"+d)&&(d==t?(document.getElementById("wrappertd"+d).style.border="1px solid",document.getElementById("wrappertd"+d).style.padding="7px"):(document.getElementById("wrappertd"+d).style.border="",document.getElementById("wrappertd"+d).style.padding=""))}}function discountCalculation(e){var t=0,r=0,a=0,d=0,n="cm",i="",o=0,c=0,u="",l=0;if(document.getElementById("calc_height")&&""==(t=document.getElementById("calc_height").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;if(document.getElementById("calc_width")&&""==(r=document.getElementById("calc_width").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;if(document.getElementById("calc_depth")&&""==(a=document.getElementById("calc_depth").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;if(document.getElementById("calc_radius")&&""==(d=document.getElementById("calc_radius").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;if(document.getElementById("discount_calc_unit")&&0==(n=document.getElementById("discount_calc_unit").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;document.getElementById("calc_unit")&&document.getElementById("calc_unit").value;var _=[];if(document.getElementsByName("pdc_option_name[]"))for(var m=document.getElementsByName("pdc_option_name[]"),p=0,s=0;s<m.length;s++){var y=m[s];y.checked&&(_[p]=y.value,p++)}if(_=_.join(","),http=getHTTPObject(),null==http)return void alert("Your browser does not support XMLHTTP!");http.onreadystatechange=function(){if(4==http.readyState){var t=http.responseText;if("fail"==(t=t.replace(/^\s+|\s+$/g,"")))return alert(Joomla.JText._("COM_REDSHOP_NOT_AVAILABLE")),!1;t=t.split("\n");for(var r=document.getElementsByName("quantity"),a=1,d=0;d<r.length;d++)r[d].id=="ajax_quantity"+e?a=r[d].value:r[d].id=="quantity"+e&&(a=r[d].value);i=t[0],o=t[1],c=t[2],price_excl_vat=t[7];var n=number_format(o,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),_=number_format(c,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));a<=0&&(a=1),l=parseFloat(c)*a;var m=number_format(l,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));if(u=t[3]+i+"<br />",u+=t[4]+n+"<br />",u+=t[5]+_+"<br />",u+=t[6]+m,document.getElementById("discount_cal_final_price")&&(document.getElementById("discount_cal_final_price").innerHTML=u),document.getElementById("main_price"+e)){var p=document.getElementById("main_price"+e).value;if("1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))){var s=parseFloat(p)+parseFloat(l);if(1==t[8])var y=l+price_excl_vat*a;else var y=l*a;m=number_format(s,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),formatted_product_price_excl_vat=number_format(y,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),document.getElementById("produkt_kasse_hoejre_pris_indre"+e)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+e).innerHTML=formatted_product_price_excl_vat,document.getElementById("display_product_price_no_vat"+e)&&(document.getElementById("display_product_price_no_vat"+e).innerHTML=m),document.getElementById("product_price_no_vat"+e)&&(document.getElementById("product_price_no_vat"+e).value=s)),document.getElementById("product_price_incl_vat"+e)&&(document.getElementById("product_price_incl_vat"+e).innerHTML=formatted_product_price_excl_vat),document.getElementById("main_price"+e).value=y}calculateTotalPrice(e,0)}}},http.open("GET",redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=cart&task=discountCalculator&product_id="+e+"&calcHeight="+t+"&calcWidth="+r+"&calcDepth="+a+"&calcRadius="+d+"&calcUnit="+n+"&pdcextraid="+_+"&tmpl=component",!0),http.setRequestHeader("X-Requested-With","XMLHttpRequest"),http.send(null)}function setProductUserFieldImage(e,t,r,a){for(var d=document.getElementsByClassName("imgClass_"+t),n=0;n<d.length;n++)removeClass(d[n],"selectedimg");document.getElementById(e+"_"+t)&&(document.getElementById(e+"_"+t).value=r,a.className+=" selectedimg"),document.getElementById("ajax"+e+"_"+t)&&(document.getElementById("ajax"+e+"_"+t).value=r),document.getElementById(e)&&(document.getElementById(e).value=r)}function removeClass(e,t){if(hasClass(e,t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function hasClass(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function RedgetElementsByClassName(e){var t=[],r=document.all?document.all:document.getElementsByTagName("*");for(i=0,j=0;i<r.length;i++)r[i].className==e&&(t[j]=r[i],j++);return t}function getElementsByClassName(e){
var t=[],r=document.all?document.all:document.getElementsByTagName("*");for(i=0,j=0;i<r.length;i++)r[i].className==e&&(t[j]=r[i],j++);return t}function displayAddtocartForm(e,t,r,a,d){return 0!=t&&""!=t&&(redSHOP.updateCartExtraFields(jQuery("#"+d+" :input:not(:button, :hidden)"),t,"#"+e),jQuery("#requiedAttribute").val(jQuery("#"+e+" [name=requiedAttribute]").attr("reattribute")),jQuery("#requiedProperty").val(jQuery("#"+e+" [name=requiedProperty]").attr("reproperty")),0==a&&calculateTotalPrice(t,r),!!setAddtocartForm(e,t))}function setAddtocartForm(e,t){var r=document.getElementById(e);document.getElementById("Itemid")&&(r.Itemid.value=document.getElementById("Itemid").value),document.getElementById("attribute_data")&&(r.attribute_data.value=document.getElementById("attribute_data").value),document.getElementById("property_data")&&(r.property_data.value=document.getElementById("property_data").value),document.getElementById("subproperty_data")&&(r.subproperty_data.value=document.getElementById("subproperty_data").value),document.getElementById("accessory_data")&&(r.accessory_data.value=document.getElementById("accessory_data").value),document.getElementById("acc_quantity_data")&&(r.acc_quantity_data.value=document.getElementById("acc_quantity_data").value),document.getElementById("acc_attribute_data")&&(r.acc_attribute_data.value=document.getElementById("acc_attribute_data").value),document.getElementById("acc_property_data")&&(r.acc_property_data.value=document.getElementById("acc_property_data").value),document.getElementById("acc_subproperty_data")&&(r.acc_subproperty_data.value=document.getElementById("acc_subproperty_data").value),document.getElementById("accessory_price")&&(r.accessory_price.value=document.getElementById("accessory_price").value),document.getElementById("requiedAttribute")&&(r.requiedAttribute.value=document.getElementById("requiedAttribute").value),document.getElementById("requiedProperty")&&(r.requiedProperty.value=document.getElementById("requiedProperty").value);var a=1;if(document.getElementById("quantity"+t).value&&(a=document.getElementById("quantity"+t).value),document.getElementById("hidden_attribute_cartimage"+t)&&(r.hidden_attribute_cartimage.value=document.getElementById("hidden_attribute_cartimage"+t).value),0!=parseInt(r.min_quantity.value)&&parseInt(r.min_quantity.value)>a)return alert(r.min_quantity.getAttribute("requiredtext")+" "+parseInt(r.min_quantity.value)),!1;if(0!=parseInt(r.max_quantity.value)&&parseInt(r.max_quantity.value)<a)return alert(r.max_quantity.getAttribute("requiredtext")+" "+parseInt(r.max_quantity.value)),!1;if(document.getElementById("calc_height")){var d=document.getElementById("calc_height").value;if(""==d)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;r.calcHeight.value=d}if(document.getElementById("calc_width")){var n=document.getElementById("calc_width").value;if(""==n)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;r.calcWidth.value=n}if(document.getElementById("calc_depth")){var i=document.getElementById("calc_depth").value;if(""==i)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;r.calcDepth.value=i}if(document.getElementById("calc_radius")){var o=document.getElementById("calc_radius").value;if(""==o)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;r.calcRadius.value=o}if(document.getElementById("discount_calc_unit")){if(calUnit=document.getElementById("discount_calc_unit").value,0==calUnit)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;r.calcUnit.value=calUnit}var c=[];if(document.getElementsByName("pdc_option_name[]"))for(var u=document.getElementsByName("pdc_option_name[]"),l=0,_=0;_<u.length;_++){var m=u[_];m.checked&&(c[l]=m.value,l++)}if(c=c.join(","),r.pdcextraid.value=c,document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;r.subscription_id.value=subId}return!0}function checkAddtocartValidation(e,t,r,a,d,n,i,o){if(0==t||""==t)return!1;if(0==redSHOP.RSConfig._("AJAX_CART_BOX")){var c=userfieldValidation("extrafields"+t);if(!c)return!1;var u=document.getElementById(e).requiedAttribute.value,l=document.getElementById(e).requiedProperty.value;if(""!=u)return alert(u),!1;if(""!=l)return alert(l),!1;if(redShopAddtocartValidationJsTrigger.length>0)for(var _=0,m=redShopAddtocartValidationJsTrigger.length;_<m;_++)if(0==redShopAddtocartValidationJsTrigger[_](arguments))return!1;document.getElementById(e).submit()}else{var p=parseInt(n)+parseInt(i)+parseInt(o);if(0!=a)submitAjaxCartdetail(e,t,r,a,n,i,o);else{var s=!0,c=userfieldValidation("extrafields"+t);c||(s=!1);var u=document.getElementById(e).requiedAttribute.value,l=document.getElementById(e).requiedProperty.value;if(""!=u&&(s=!1),""!=l&&(s=!1),redShopAddtocartValidationJsTrigger.length>0)for(var _=0,m=redShopAddtocartValidationJsTrigger.length;_<m;_++)if(0==redShopAddtocartValidationJsTrigger[_](arguments))return;p>0&&0==s?displayAjaxCartdetail(e,t,r,a,n,i,o):submitAjaxCartdetail(e,t,r,a,n,i,o)}}}function displayAjaxCartdetail(e,t,r,a,d,o,c){if(0==t||""==t)return!1;var u="";document.getElementById("isAjaxBoxOpen")&&(u=document.getElementById("isAjaxBoxOpen").value);for(var l=(document.getElementById(e),document.getElementsByName("extrafields"+t+"[]")),_="",m="",p="",s=!1,y="",g="",E=!1,v="",I="",f=0;f<l.length;f++)if(l[f].value||"text"!=l[f].type)if(l[f].value||"select-one"!=l[f].type)if(l[f].value||"hidden"!=l[f].type){if("checkbox"==l[f].type){if(p=redSHOP.filterExtraFieldName(l[f].id),""!=m&&m!=p&&0==s&&(_+=m+","),m!=p&&(m=p,s=!1),l[f].checked||1==s){s=!0;continue}(f==l.length-1&&0==s||"checkbox"!=l[f+1].type&&0==s)&&(_+=m+",")}else if("radio"==l[f].type){if(g=redSHOP.filterExtraFieldName(l[f].id),""!=y&&y!=g&&0==E&&(_+=y+","),y!=g&&(y=g,E=!1),l[f].checked||1==E){E=!0;continue}(f==l.length-1&&0==E||"radio"!=l[f+1].type&&0==E)&&(_+=y+",")}else if("select-multiple"==l[f].type){if(I=redSHOP.filterExtraFieldName(l[f].id),l[f].value)continue;_+=I+","}}else v=redSHOP.filterExtraFieldName(l[f].id),_+=v,l.length-1!=f&&(_+=",");else _+=l[f].id,l.length-1!=f&&(_+=",");else _+=l[f].id,l.length-1!=f&&(_+=",");var S=RedgetElementsByClassName("calendar"),h="";for(cal_i=0;cal_i<S.length;cal_i++){var B=S[cal_i].id;arr=B.split("_img"),n=arr.length;var R=arr[0];""!=R&&""==document.getElementById(R).value&&(h=redSHOP.filterExtraFieldName(R),_+=","+h+",")}var P="";if(document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;P="&subscription_id="+subId}var O=1,T="";request=getHTTPObject(),document.getElementById("quantity"+t).value&&(O=document.getElementById("quantity"+t).value);var C=document.getElementById(e).requiedAttribute.value,b=document.getElementById(e).requiedProperty.value,H=document.getElementById(e).accessory_data.value;0==_&&(c=0),""==C&&""==b&&(d=0);var x=[];o>0&&""!=H&&0!=H&&(x=H.split("@@"),o==x.length&&(o=0));var A=parseInt(d)+parseInt(o)+parseInt(c),j=parseInt(d)+parseInt(c);if(o>0&&0==j&&x.length>0||0==A||"viewajaxdetail"==u)submitAjaxCartdetail(e,t,r,a,d,o,c);else{var q="&property_data="+encodeURIComponent(document.getElementById(e).property_data.value);q=q+"&subproperty_data="+encodeURIComponent(document.getElementById(e).subproperty_data.value),q=q+"&accessory_data="+encodeURIComponent(document.getElementById(e).accessory_data.value),q=q+"&acc_quantity_data="+encodeURIComponent(document.getElementById(e).acc_quantity_data.value),q=q+"&acc_property_data="+encodeURIComponent(document.getElementById(e).acc_property_data.value),q=q+"&acc_subproperty_data="+encodeURIComponent(document.getElementById(e).acc_subproperty_data.value);var T="option=com_redshop&view=product&pid="+t+"&relatedprd_id="+r+"&layout=viewajaxdetail&product_quantity="+O+"&tmpl=component&nextrafield="+c+"&extrafieldNames="+_+P+q,w=redSHOP.RSConfig._("SITE_URL")+"index.php?"+T;request.onreadystatechange=function(){if(4==request.readyState&&200==request.status){var e=request.responseText,t={url:w,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_HEIGHT"))},htmldata:e};redBOX.initialize({}),document.attbox=redBOX.open(null,t);preloadSlimbox({isenable:!1,mainImage:!1});var r=RedgetElementsByClassName("calendar");for(i=0;i<r.length;i++){var a=r[i].id;arr=a.split("_img"),n=arr.length;var d=arr[0],o=d.split("ajax");-1!=a.search("ajax")&&-1!=_.search(o[0])&&window.addEvent("domready",function(){Calendar.setup({inputField:d,ifFormat:"%d-%m-%Y",button:r[i].id,align:"Tl",singleClick:!0})})}}},request.open("POST",w,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(T)}}function submitAjaxCartdetail(e,t,r,a,d,n,i){var o=document.getElementById(e),c="";if(!userfieldValidation("extrafields"+t))return!1;var u=jQuery("#"+e+" [name=requiedAttribute]").val(),l=jQuery("#"+e+" [name=requiedProperty]").val();if(0!=u&&""!=u)return alert(u),!1;if(0!=l&&""!=l)return alert(l),!1;extraFieldPost=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+t+'"]'),t).join("&");var _="";if(document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;_="&subscription_id="+subId}document.getElementById("giftcard_id")?(c="&giftcard_id="+t,document.getElementById("reciver_email")&&(c+="&reciver_email="+document.getElementById("reciver_email").value),document.getElementById("reciver_name")&&(c+="&reciver_name="+document.getElementById("reciver_name").value),document.getElementById("customer_amount")&&(c+="&customer_amount="+document.getElementById("customer_amount").value)):c="&product_id="+t,request=getHTTPObject();var m="ajax_cart_box=1";if(m=m+"&Itemid="+o.Itemid.value+c,m=m+"&category_id="+o.category_id.value,m=m+"&attribute_data="+o.attribute_data.value,m=m+"&property_data="+o.property_data.value,m=m+"&subproperty_data="+o.subproperty_data.value,m=m+"&requiedAttribute="+o.requiedAttribute.value,m=m+"&requiedProperty="+o.requiedProperty.value,m=m+"&accessory_data="+o.accessory_data.value,m=m+"&acc_quantity_data="+o.acc_quantity_data.value,m=m+"&acc_attribute_data="+o.acc_attribute_data.value,m=m+"&acc_property_data="+o.acc_property_data.value,m=m+"&acc_subproperty_data="+o.acc_subproperty_data.value,m=m+"&accessory_price="+o.accessory_price.value,document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&(m=m+"&sel_wrapper_id="+o.sel_wrapper_id.value),m=m+"&quantity="+o.quantity.value,m=m+"&hidden_attribute_cartimage="+o.hidden_attribute_cartimage.value,document.getElementById("calc_height")&&(m=m+"&calcHeight="+o.calcHeight.value),document.getElementById("calc_width")&&(m=m+"&calcWidth="+o.calcWidth.value),document.getElementById("calc_depth")&&(m=m+"&calcDepth="+o.calcDepth.value),document.getElementById("calc_radius")&&(m=m+"&calcRadius="+o.calcRadius.value),document.getElementById("calc_unit")&&(m=m+"&calcUnit="+o.calcUnit.value),m=m+"&pdcextraid="+o.pdcextraid.value,m=m+_+"&"+extraFieldPost,redShopJsTrigger.length>0)for(var p=0,s=redShopJsTrigger.length;p<s;p++)new redShopJsTrigger[p](arguments);if("object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)m+="&"+key+"="+getExtraParamsArray[key];request.open("POST",redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=cart&task=add&tmpl=component",!1),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("X-Requested-With","XMLHttpRequest");var y=!0;request.onreadystatechange=function(){if(4==request.readyState){var e=request.responseText;if(e=e.split("`"),"0"==e[1])return alert(e[2]),!1;document.attbox&&document.attbox.close(),document.getElementById("mod_cart_total")&&e[1]&&(document.getElementById("mod_cart_total").innerHTML=e[1]),document.getElementById("rs_promote_free_shipping_div")&&e[2]&&(document.getElementById("rs_promote_free_shipping_div").innerHTML=e[2]),document.getElementById("mod_cart_checkout_ajax")&&(document.getElementById("mod_cart_checkout_ajax").style.display="");var r=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=product&pid="+t+"&r_template=cartbox&tmpl=component";request_inner=getHTTPObject(),request_inner.onreadystatechange=function(){if(4==request_inner.readyState&&200==request_inner.status&&y){var e=request_inner.responseText;y=!1;var t={url:r,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_BOX_HEIGHT"))},htmldata:e,onOpen:function(){if(redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME")>0){(function(){this.close()}).bind(this).delay(redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME"))}}};redBOX.initialize({}),document.ajaxbox=redBOX.open(null,t)}},request_inner.open("GET",r,!0),request_inner.setRequestHeader("X-Requested-With","XMLHttpRequest"),request_inner.send(null)}},request.send(m)}function displayAddtocartProperty(e,t,r,a){return document.getElementById("attribute_data")&&(document.getElementById("attribute_data").value=r),document.getElementById("property_data")&&(document.getElementById("property_data").value=a),document.getElementById("subproperty_data")&&(document.getElementById("subproperty_data").value=""),!!setAddtocartForm(e,t)}function showallreviews(){document.getElementById("showreviews")&&("none"==document.getElementById("showreviews").style.display?document.getElementById("showreviews").style.display="":document.getElementById("showreviews").style.display="none")}function checkAddtocartwishlistValidation(e,t,r,a,d,n,i,o,c){if(0==t||""==t)return!1;if(1==c){if(!userfieldValidation("extrafields"+t))return!1;var u=document.getElementById(e).requiedAttribute.value,l=document.getElementById(e).requiedProperty.value;return""!=u?(alert(u),!1):""==l||(alert(l),!1)}return submitAjaxCartdetail(e,t,r,a,n,i,o),!0}function productalladdprice(e){mainpro_id=document.frm.product_id.value.split(","),totatt=document.frm.totacc_id.value.split(","),totcount_no_user_field=document.frm.totcount_no_user_field.value.split(","),mainpro_id.length=mainpro_id.length-1;for(var t=0;t<mainpro_id.length;t++)if(""!=mainpro_id[t]&&displayAddtocartForm("addtocart_prd_"+mainpro_id[t],mainpro_id[t],"0","0","user_fields_form")&&!checkAddtocartwishlistValidation("addtocart_prd_"+mainpro_id[t],mainpro_id[t],"0","0","user_fields_form",totatt[t],"",totcount_no_user_field[t],1))return!1;submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[0],mainpro_id[0],0,0,totatt[0],0,totcount_no_user_field[0],e)}function submitAjaxwishlistCartdetail(e,t,r,a,n,i,o,c){displayAddtocartForm("addtocart_prd_"+mainpro_id[d],mainpro_id[d],"0","0","user_fields_form");var u=document.getElementById(e),l=[],_=jQuery("#"+e+' [name="requiedAttribute"]').val(),m=jQuery("#"+e+' [name="requiedProperty"]').val();if(!userfieldValidation("extrafields"+t))return!1;if(0!=_&&""!=_)return alert(_),!1;if(0!=m&&""!=m)return alert(m),!1;var p=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+t+'"]'),t).join("&");if(jQuery("#hidden_subscription_id").length>0){if(subId=jQuery("#hidden_subscription_id").val(),0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;l.push("subscription_id="+subId)}jQuery("#giftcard_id").length>0?(l.push("giftcard_id="+t),l.push("reciver_email="+jQuery("#reciver_email").val()),l.push("reciver_name="+jQuery("#reciver_name").val()),l.push("customer_amount="+jQuery("#customer_amount").val())):l.push("product_id="+t),request=getHTTPObject(),l.push("Itemid="+u.Itemid.value),l.push("category_id="+u.category_id.value),l.push("attribute_data="+u.attribute_data.value),l.push("property_data="+u.property_data.value),l.push("subproperty_data="+u.subproperty_data.value),l.push("requiedAttribute="+u.requiedAttribute.value),l.push("requiedProperty="+u.requiedProperty.value),l.push("accessory_data="+u.accessory_data.value),l.push("acc_quantity_data="+u.acc_quantity_data.value),l.push("acc_attribute_data="+u.acc_attribute_data.value),l.push("acc_property_data="+u.acc_property_data.value),l.push("acc_subproperty_data="+u.acc_subproperty_data.value),l.push("accessory_price="+u.accessory_price.value),l.push("sel_wrapper_id="+u.sel_wrapper_id.value),l.push("quantity=1"),l.push("pdcextraid="+u.pdcextraid.value),document.getElementById("calc_height")&&l.push("calcHeight="+u.calcHeight.value),document.getElementById("calc_width")&&l.push("calcWidth="+u.calcWidth.value),document.getElementById("calc_depth")&&l.push("calcDepth="+u.calcDepth.value),document.getElementById("calc_radius")&&l.push("calcRadius="+u.calcRadius.value),document.getElementById("calc_unit")&&l.push("calcUnit="+u.calcUnit.value);var s=l.join("&")+"&"+p;if(redShopJsTrigger.length>0)for(var y=0,g=redShopJsTrigger.length;y<g;y++)new redShopJsTrigger[y](arguments);if("object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)s+="&"+key+"="+getExtraParamsArray[key];var E=redSHOP.RSConfig._("SITE_URL")+"index.php";E+=1==c||2==c?"?option=com_redshop&view=product&task=addtowishlist&wid=1&ajaxon=1&tmpl=component":"?option=com_redshop&view=cart&task=add&tmpl=component&ajax_cart_box=1",/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",E,!0):request.open("POST",E,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",s.length),request.setRequestHeader("Connection","close"),request.onreadystatechange=function(){if(request.readyState<4&&jQuery("#saveid, #allcart").html('<font size="1" color="red">Processing...</font>'),4==request.readyState){var e=request.responseText;if(e=e.split("`"),"0"==e[1])return!1;document.attbox&&document.attbox.close(),d++;var t=mainpro_id.length;if(d<t)""!=mainpro_id[d]&&submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[d],mainpro_id[d],0,0,totatt[d],0,totcount_no_user_field[d]);else if(1==c)window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?wishlist=1&option=com_redshop&view=login";else{if(2==c)return!1;window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=cart"}jQuery("#saveid, #allcart").html(""),e[1]&&jQuery("#mod_cart_total").html(e[1]),e[2]&&jQuery("#rs_promote_free_shipping_div").html(e[2]),jQuery("#mod_cart_checkout_ajax").hide()}},request.send(s)}function addmywishlist(e,t,r){for(var a=document.getElementsByName("extrafields"+t+"[]"),d="",i="",o="",c="",u="",l="",_="",m=!1,p="",s=0;s<a.length;s++)if("checkbox"==a[s].type)u=redSHOP.filterExtraFieldName(a[s].id),""!=c&&c!=u&&""!=i&&(o+="&"+c+"="+i),c!=u&&(i="",c=u),a[s].checked&&(""!=i&&(i+=","),i+=a[s].value),s==a.length-1&&""!=i&&(o+="&"+u+"="+i),s<a.length-1&&"checkbox"!=a[s+1].type&&""!=i&&(o+="&"+u+"="+i);else if("radio"==a[s].type){if(_=redSHOP.filterExtraFieldName(a[s].id),""!=l&&l!=_&&0==m&&(o+="&"+l+"="+i),l!=_){if(i="",l=_,m=!1,a[s].checked||1==m){m=!0,o+="&"+l+"="+a[s].value;continue}}else if(a[s].checked){m=!0,o+="&"+_+"="+a[s].value;continue}}else if("select-multiple"==a[s].type){var y=a[s];i="",p=redSHOP.filterExtraFieldName(a[s].id);for(var g=0;g<y.options.length;g++)if(y.options[g].selected){var E=i;-1==E.search(String(y.options[g].value))&&(""!=i&&(i+=","),i+=String(y.options[g].value))}i&&(o+="&"+p+"="+i)}else if("hidden"==a[s].type)imgfieldNamefrmId=redSHOP.filterExtraFieldName(a[s].id),d=imgfieldNamefrmId,i=a[s].value,o+="&"+d+"="+i,i="";else if("text"==a[s].type)d=a[s].id,i=a[s].value,o+="&"+d+"="+i;else{if(-1!=a[s].id.search("ajax")){var v=a[s].id.split("ajax"),I="";I=redSHOP.filterExtraFieldName(v[1]),a[s].id=I}d=a[s].id,i=a[s].value,o+="&"+d+"="+i}var f=RedgetElementsByClassName("calendar"),I="";for(cal_i=0;cal_i<f.length;cal_i++){var S=f[cal_i].id;arr=S.split("_img"),n=arr.length;var h=arr[0];""!=h&&h.search(t)&&""!=document.getElementById(h).value&&(I=redSHOP.filterExtraFieldName(h),o+="&"+I+"="+document.getElementById(h).value)}request=getHTTPObject();var B="option=com_redshop&view=product&task=addtowishlist&json=1&ajaxon=1&tmpl=component";B=B+"&Itemid="+r,B=B+"&product_id="+t,B=B+"&userfield_id="+a.length,B+=o;var R=redSHOP.RSConfig._("SITE_URL")+"index.php?"+B;/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",R,!0):request.open("POST",R,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",B.length),request.setRequestHeader("Connection","close");request.onreadystatechange=function(){if(request.readyState<4&&(document.getElementById("myprohide_"+t).innerHTML='<font size="1" color="red">Loading...</font>'),4==request.readyState&&200==request.status){var e=(request.responseText,document.getElementById("mypid").innerHTML),r=request.responseText;sp=r.split(":-:"),-1==e.search(sp[1])&&(document.getElementById("mypid").innerHTML+=sp[0],document.getElementById("wid").style.display="block",document.getElementById("myprohide_"+t).innerHTML="")}},request.send(B)}function getStocknotify(e,t,r){var a=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=product&task=addNotifystock&tmpl=component&product_id="+e;a=a+"&property_id="+t+"&subproperty_id="+r,request=getHTTPObject(),request.onreadystatechange=function(){if(4==request.readyState){var t=request.responseText;document.getElementById("notify_stock"+e)&&(document.getElementById("notify_stock"+e).innerHTML=t)}},request.open("GET",a,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest")}redSHOP=window.redSHOP||{},redSHOP.setProductTax=function(e){e.id=e.id||0,e.price=e.price||0,e.userId=e.userId||0,e.taxExempt=e.taxExempt||!1,e.option="com_redshop",e.view="cart",e.task="cart.ajaxGetProductTax",e.tmpl="component",jQuery.ajax({url:redSHOP.RSConfig._("AJAX_BASE_URL"),type:"POST",dataType:"json",data:e}).done(function(e){redSHOP.baseTax=e.tax})},redSHOP.filterExtraFieldName=function(e){return e=reverseString(e),reverseString(e.substr(e.indexOf("_")+1))},redSHOP.collectExtraFields=function(e,t){var r={name:e.id.replace("_"+t,""),value:jQuery(e).val()};switch(e.type){case"checkbox":case"radio":r.name=redSHOP.filterExtraFieldName(e.id),r.value=jQuery("[id^="+r.name+"]:checked").val()}return r},redSHOP.updateCartExtraFields=function(e,t,r){jQuery.each(e,function(e,a){var d=redSHOP.collectExtraFields(a,t);jQuery(r+" input[id="+d.name+"]").val(d.value)})},redSHOP.updateAjaxCartExtraFields=function(e,t){var r=[];return jQuery.each(e,function(e,a){var d=redSHOP.collectExtraFields(a,t);r.push(d.name+"="+d.value)}),r},window.addEvent("domready",function(){preloadSlimbox({isenable:!0,mainImage:!0});var e={handler:"iframe"};redBOX.assign($$(".redcolorproductimg"),e),redBOX.assign($$("a.redbox"),{parse:"rel"}),redSHOP.setProductTax({id:0,price:1})});var r_browser=!1,subproperty_main_image="",request;redSHOP.onChangePropertyDropdown=[],redSHOP.updateStockStatusMessage=function(e,t){var r="inline-block",a="inline-block",d="inline-block",n="inline-block",i="";"instock"==e?(r="inline-block",n="inline-block",a="none",d="none",i=Joomla.JText._("COM_REDSHOP_AVAILABLE_STOCK")):(r="none",n="none","preorder"==e?(a="none",d="inline-block",i=Joomla.JText._("COM_REDSHOP_PREORDER_PRODUCT_OUTOFSTOCK_MESSAGE")):(a="inline-block",d="none",i=Joomla.JText._("COM_REDSHOP_PRODUCT_OUTOFSTOCK_MESSAGE"))),document.getElementById("pdaddtocart"+t)&&(document.getElementById("pdaddtocart"+t).style.display=r),document.getElementById("stockaddtocart"+t)&&(document.getElementById("stockaddtocart"+t).style.display=a),document.getElementById("stockaddtocart"+t)&&(document.getElementById("stockaddtocart"+t).innerHTML=i),document.getElementById("preordercart"+t)&&(document.getElementById("preordercart"+t).style.display=d),document.getElementById("stockQuantity"+t)&&(document.getElementById("stockQuantity"+t).style.display=n)};var redShopAddtocartValidationJsTrigger=[],getExtraParamsArray={},redShopJsTrigger=[],mainpro_id=[],totatt=[],totcount_no_user_field=[],d=0;