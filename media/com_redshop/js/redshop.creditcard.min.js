var Cards=new makeArray(8);Cards[0]=new CardType("MasterCard","51,52,53,54,55","16");var MC=Cards[0],maestro=Cards[0];Cards[1]=new CardType("VisaCard","4","13,16");var VISA=Cards[1];Cards[2]=new CardType("AmExCard","34,37","15");var amex=Cards[2];Cards[3]=new CardType("DinersClubCard","30,36,38","14");var diners=Cards[3];Cards[4]=new CardType("DiscoverCard","6011","16");var DiscoverCard=Cards[4];Cards[5]=new CardType("enRouteCard","2014,2149","15");var enRouteCard=Cards[5];Cards[6]=new CardType("JCBCard","3088,3096,3112,3158,3337,3528","16");var jcb=Cards[6],LuhnCheckSum=Cards[7]=new CardType;function IsNumeric(r){var e,t=!0;if(0==r.length)return!1;for(i=0;i<r.length&&1==t;i++)e=r.charAt(i),-1=="0123456789".indexOf(e)&&(t=!1);return t}function isString(r){for(var e=r.value,t=e.length,a=0;a!=t;a++)if(aChar=e.substring(a,a+1),aChar=aChar.toUpperCase(),-1==". -,".indexOf(aChar)&&(aChar<"A"||"Z"<aChar))return!1;return!0}function CheckCardNumber(form){if(""!=jQuery('input:radio[name="selectedCard"]:checked').val())return!0;var tmpyear;if(0<form.order_payment_name.value.length&&0==isString(form.order_payment_name))return alert("Please do not enter Numeric value in card name."),form.order_payment_name.focus(),!1;if(0==form.order_payment_number.value.length)return alert("Please enter a Card Number."),form.order_payment_number.focus(),!1;if(0==IsNumeric(form.order_payment_number.value))return alert("Please enter Numeric value only in card number."),form.order_payment_number.focus(),!1;if(tmpyear=form.order_payment_expire_year.options[form.order_payment_expire_year.selectedIndex].value,tmpmonth=form.order_payment_expire_month.options[form.order_payment_expire_month.selectedIndex].value,!(new CardType).isExpiryDate(tmpyear,tmpmonth))return alert("This card has already expired."),!1;if(card=!1,void 0!==form.creditcard_code)if(cardlen=void 0!==form.creditcard_code.type?1:form.creditcard_code.length,1<cardlen)for(var c=0;c<cardlen;c++)form.creditcard_code[c].checked&&(card=form.creditcard_code[c].value);else form.creditcard_code.checked&&(card=form.creditcard_code);if(!card)return alert("Please Select Credit Card type"),!1;var retval=eval(card+'.checkCardNumber("'+form.order_payment_number.value+'", '+tmpyear+", "+tmpmonth+");");return cardname="",retval?!(!isNum(form.credit_card_code.value)||""==trim(form.credit_card_code.value)||"amex"==card&&4!=form.credit_card_code.value.length||"amex"!=card&&3!=form.credit_card_code.value.length)||(alert("Enter vaild Security Number."),!1):(alert("This card number is not valid."),!1)}function CardType(){var r=CardType.arguments,e=CardType.arguments.length;this.objname="object CardType";var t=0<e?r[0]:"CardObject",a=1<e?r[1]:"0,1,2,3,4,5,6,7,8,9",n=2<e?r[2]:"13,14,15,16,19";return this.setCardNumber=setCardNumber,this.setCardType=setCardType,this.setLen=setLen,this.setRules=setRules,this.setExpiryDate=setExpiryDate,this.setCardType(t),this.setLen(n),this.setRules(a),4<e&&this.setExpiryDate(r[3],r[4]),this.checkCardNumber=checkCardNumber,this.getExpiryDate=getExpiryDate,this.getCardType=getCardType,this.isCardNumber=isCardNumber,this.isExpiryDate=isExpiryDate,this.luhnCheck=luhnCheck,this}function checkCardNumber(){var r=checkCardNumber.arguments,e=checkCardNumber.arguments.length,t=0<e?r[0]:this.cardnumber,a=1<e?r[1]:this.year,n=2<e?r[2]:this.month;return this.setCardNumber(t),this.setExpiryDate(a,n),!!this.isCardNumber()&&!!this.isExpiryDate()}function getCardType(){return this.cardtype}function getExpiryDate(){return this.month+"/"+this.year}function isCardNumber(){var r=isCardNumber.arguments,e=0<isCardNumber.arguments.length?r[0]:this.cardnumber;if(!this.luhnCheck())return!1;for(var t=0;t<this.len.size;t++)if(e.toString().length==this.len[t]){for(var a=0;a<this.rules.size;a++){if(e.substring(0,this.rules[a].toString().length)==this.rules[a])return!0}return!1}return!1}function isExpiryDate(){var r=isExpiryDate.arguments,e=isExpiryDate.arguments.length;return year=0<e?r[0]:this.year,month=1<e?r[1]:this.month,!!isNum(year+"")&&(!!isNum(month+"")&&(today=new Date,expiry=new Date(year,month),!(today.getTime()>expiry.getTime())))}function isNum(r){if(0==(r=r.toString()).length)return!1;for(var e=0;e<r.length;e++)if(r.substring(e,e+1)<"0"||"9"<r.substring(e,e+1))return!1;return!0}function luhnCheck(){var r=luhnCheck.arguments,e=0<luhnCheck.arguments.length?r[0]:this.cardnumber;if(!isNum(e))return!1;for(var t=e.length,a=1&t,n=0,i=0;i<t;i++){var s=parseInt(e.charAt(i));1&i^a||9<(s*=2)&&(s-=9),n+=s}return n%10==0}function makeArray(r){return this.size=r,this}function setCardNumber(r){return this.cardnumber=r,this}function setCardType(r){return this.cardtype=r,this}function setExpiryDate(r,e){return this.year=r,this.month=e,this}function setLen(r){0!=r.length&&null!=r||(r="13,14,15,16,19");var e=r;for(n=1;-1!=e.indexOf(",");)e=e.substring(e.indexOf(",")+1,e.length),n++;for(this.len=new makeArray(n),n=0;-1!=r.indexOf(",");){var t=r.substring(0,r.indexOf(","));this.len[n]=t,r=r.substring(r.indexOf(",")+1,r.length),n++}return this.len[n]=r,this}function setRules(r){0!=r.length&&null!=r||(r="0,1,2,3,4,5,6,7,8,9");var e=r;for(n=1;-1!=e.indexOf(",");)e=e.substring(e.indexOf(",")+1,e.length),n++;for(this.rules=new makeArray(n),n=0;-1!=r.indexOf(",");){var t=r.substring(0,r.indexOf(","));this.rules[n]=t,r=r.substring(r.indexOf(",")+1,r.length),n++}return this.rules[n]=r,this}