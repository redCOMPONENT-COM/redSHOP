redSHOP=window.redSHOP||{},redSHOP.onBeforeAjaxdisplayAdditionalImage=[],redSHOP.onAfterAjaxdisplayAdditionalImage=[],redSHOP.onDisplayAjaxCartBoxDetail=[],redSHOP.onAfterSubmitAjaxCartdetail=[],redSHOP.onDisplayAjaxCartBox=[],redSHOP.setProductTax=function(e){e.id=e.id||0,e.price=e.price||0,e.userId=e.userId||0,e.taxExempt=e.taxExempt||!1,e.option="com_redshop",e.view="cart",e.task="cart.ajaxGetProductTax",e.tmpl="component",jQuery.ajax({url:redSHOP.RSConfig._("AJAX_BASE_URL"),type:"POST",async:!1,dataType:"json",data:e}).done(function(e){redSHOP.baseTax=e.tax})},redSHOP.filterExtraFieldName=function(e){return e=reverseString(e),reverseString(e.substr(e.indexOf("_")+1))},redSHOP.collectExtraFields=function(e,t){var a={name:e.id.replace("_"+t,""),value:jQuery(e).val()};switch(e.type){case"checkbox":a.name=redSHOP.filterExtraFieldName(e.id),a.value=jQuery("[id^="+e.id+"]:checked").val();break;case"radio":a.name=redSHOP.filterExtraFieldName(e.id),a.value=jQuery("[id^="+a.name+"]:checked").val()}return a},redSHOP.triggerCustomEvents=function(e,t){if(0<redSHOP[e].length)for(var a=0,r=redSHOP[e].length;a<r;a++)new redSHOP[e][a](t)},redSHOP.updateCartExtraFields=function(e,r,d){jQuery.each(e,function(e,t){var a=redSHOP.collectExtraFields(t,r);"checkbox"==t.type?void 0!==a.value&&(""==(t=(t=jQuery(d+" input[id="+a.name+"]").val()).replace(/(^,)|(,$)/g,""))?jQuery(d+" input[id="+a.name+"]").val(a.value):jQuery(d+" input[id="+a.name+"]").val(t+","+a.value)):jQuery(d+" input[id="+a.name+"]").val(a.value)})},redSHOP.updateAjaxCartExtraFields=function(e,a){var r=[];return jQuery.each(e,function(e,t){t=redSHOP.collectExtraFields(t,a);r.push(t.name+"="+t.value)}),r},window.addEvent("domready",function(){preloadSlimbox({isenable:!0,mainImage:!0}),jQuery(".redcolorproductimg").click(function(e){e.preventDefault();var t=jQuery(this).attr("data-productid"),e=jQuery(this).attr("data-href");return""!=e&&void 0!==e||(e=jQuery(this).attr("href")),""!=t&&(e+="&product_id="+t,redBOX.open(e,{handler:"iframe",name:"wishlist-iframe"}),!0)}),redBOX.assign($$("a.redbox"),{parse:"rel"}),redSHOP.setProductTax({id:0,price:1})});var r_browser=!1,subproperty_main_image="",request;function getHTTPObject(){var t=!1;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t}function productaddprice(r,e){var t,a,d,i,n,o,u,c,l=1;prefix=0!=e?e:r,jQuery("[data-id=accessory_data]")&&(t=jQuery("[data-id=accessory_data]").val()),jQuery("[data-id=acc_quantity_data]")&&(a=jQuery("[data-id=acc_quantity_data]").val()),jQuery("[data-id=acc_attribute_data]")&&(d=jQuery("[data-id=acc_attribute_data]").val().replace("##","::")),jQuery("[data-id=acc_property_data]")&&(i=jQuery("[data-id=acc_property_data]").val().replace("##","::")),jQuery("[data-id=acc_subproperty_data]")&&(n=jQuery("[data-id=acc_subproperty_data]").val().replace("##","::")),document.getElementById("quantity"+prefix)&&document.getElementById("quantity"+prefix)&&(l=document.getElementById("quantity"+prefix).value),jQuery("[data-id=attribute_data]")&&(o=jQuery("[data-id=attribute_data]").val().replace("##","::")),jQuery("[data-id=property_data]")&&(u=jQuery("[data-id=property_data]").val().replace("##","::")),jQuery("[data-id=subproperty_data]")&&(c=jQuery("[data-id=subproperty_data]").val().replace("##","::"));e=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displayProductaddprice&qunatity="+l;e=(e=e+"&product_id="+r+"&attribute_data="+o+"&property_data="+u+"&subproperty_data="+c)+"&accessory_data="+t+"&acc_quantity_data="+a+"&acc_attribute_data="+d+"&acc_property_data="+i+"&acc_subproperty_data="+n,(request=getHTTPObject()).onreadystatechange=function(){var e,t,a;4==request.readyState&&(e=request.responseText.split(":"),a=t=0,document.getElementById("wrapper_price")&&(t=parseFloat(document.getElementById("wrapper_price").value)),document.getElementById("wrapper_price_withoutvat")&&(a=parseFloat(document.getElementById("wrapper_price_withoutvat").value)),document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix).innerHTML=number_format(parseFloat(e[0])+t*l,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_discount_price"+prefix)&&(document.getElementById("display_product_discount_price"+prefix).innerHTML=number_format(e[4],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_without_vat"+prefix)&&(document.getElementById("display_product_price_without_vat"+prefix).innerHTML=number_format(parseFloat(e[5])+a*l,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_no_vat"+prefix)&&(document.getElementById("display_product_price_no_vat"+prefix).innerHTML=number_format(parseFloat(e[5])+a*l,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_old_price"+prefix)&&(document.getElementById("display_product_old_price"+prefix).innerHTML=number_format(e[2],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_saving_price"+prefix)&&(document.getElementById("display_product_saving_price"+prefix).innerHTML=number_format(e[3],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("main_price"+prefix)&&(document.getElementById("main_price"+prefix).value=e[0]),document.getElementById("product_price_no_vat"+prefix)&&(document.getElementById("product_price_no_vat"+prefix).value=e[5],document.getElementById("main_price"+r)&&(document.getElementById("main_price"+r).value=e[0]),document.getElementById("product_price_no_vat"+r)&&(document.getElementById("product_price_no_vat"+r).value=e[5]),document.getElementById("product_old_price"+r)&&(document.getElementById("product_old_price"+r).value=e[2])),document.getElementById("product_old_price"+prefix)&&(document.getElementById("product_old_price"+prefix).value=e[2]))},request.open("GET",e,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function changePropertyDropdown(product_id,accessory_id,relatedprd_id,attribute_id,selectedproperty_id,mpw_thumb,mph_thumb){var allarg=arguments,propArr=[],subpropArr=[],property_data="",subproperty_data="",suburl="",subatthtml="",layout="",prefix;document.getElementById("isAjaxBoxOpen")&&(layout=document.getElementById("isAjaxBoxOpen").value);var preprefix="viewajaxdetail"==layout?"ajax_":"",prefix=0!=accessory_id?preprefix+"acc_":0!=relatedprd_id?preprefix+"rel_":preprefix+"prd_",commonid=prefix+product_id+"_"+accessory_id+"_"+attribute_id;if(document.getElementById("subattdata_"+commonid)&&(subatthtml=document.getElementById("subattdata_"+commonid).value),suburl=suburl+"&subatthtml="+subatthtml,suburl=suburl+"&product_id="+product_id,suburl=suburl+"&attribute_id="+attribute_id,suburl=suburl+"&accessory_id="+accessory_id,suburl=suburl+"&relatedprd_id="+relatedprd_id,document.getElementsByName("property_id_"+commonid+"[]")){for(var propName=document.getElementsByName("property_id_"+commonid+"[]"),sel_i=0,p=0;p<propName.length;p++)"checkbox"==propName[p].type||"radio"==propName[p].type?propName[p].checked&&(propArr[sel_i++]=propName[p].value):propName[p].selectedIndex&&(propArr[sel_i++]=propName[p].options[propName[p].selectedIndex].value);for(var subsel_i=0,sp=0;sp<propArr.length;sp++){var spCommonName='[name="subproperty_id_'+commonid+"_"+propArr[sp]+'[]"]';jQuery(spCommonName).length&&("radio"==jQuery(spCommonName).attr("type")||"checkbox"==jQuery(spCommonName).attr("type")?subpropArr.push(jQuery(spCommonName+":checked").val()):subpropArr.push(jQuery(spCommonName).val()))}property_data=propArr.join(","),subproperty_data=subpropArr.join(","),suburl=suburl+"&property_id="+property_data,suburl=suburl+"&subproperty_id="+subproperty_data}var url=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displaySubProperty&isAjaxBox="+layout;url+=suburl,request=getHTTPObject(),request.onreadystatechange=function(){var property_id,withoutVAT;document.getElementById("property_responce"+commonid)&&(document.getElementById("property_responce"+commonid).style.display="none"),4!=request.readyState&&document.getElementById("rs_image_loader")&&(document.getElementById("rs_image_loader").style.display="block"),4==request.readyState&&(property_id=0<propArr.length?propArr[0]:0,withoutVAT=!1,document.getElementById("property_responce"+commonid)&&(document.getElementById("property_responce"+commonid).innerHTML=request.responseText,document.getElementById("property_responce"+commonid).style.display="",-1!=request.responseText.indexOf("{without_vat}")&&(withoutVAT=!0),eval(jQuery(request.responseText).find("script").text())),displayAdditionalImage(product_id,accessory_id,relatedprd_id,property_id,0,withoutVAT),calculateTotalPrice(product_id,relatedprd_id,withoutVAT),jQuery('select:not(".disableBootstrapChosen")').select2(),redSHOP.triggerCustomEvents("onChangePropertyDropdown",{allarg:allarg,propArr:propArr}))},request.open("GET",url,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function display_image(e,t,a){redSHOP.RSConfig._("PRODUCT_DETAIL_IS_LIGHTBOX")||(document.getElementById("a_main_image"+t).href=a),document.getElementById("main_image"+t).src=e}function display_image_out(e,t,a){document.getElementById("main_image"+t).src=a}function display_image_add(e,t){document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=e)}function display_image_add_out(e,t){document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=""!=subproperty_main_image?subproperty_main_image:e)}function collectAttributes(o,u,e,t){var c,l=[],_=[],p=[],a=0,s=0,m=0,y=!0,g="",E="",r=jQuery("#isAjaxBoxOpen").val(),v=jQuery("[data-id=product_preorder"+o+"]").val(),d=jQuery("[data-id=product_stock"+o+"]").val(),i=jQuery("[data-id=preorder_product_stock"+o+"]").val(),n="";jQuery("#accquantity_"+o+"_"+u).length&&jQuery("#accquantity_"+o+"_"+u).val(),"viewajaxdetail"==r&&(n="ajax_"),0!=u?(c=n+"acc_",a=parseFloat(jQuery("#accessory_id_"+o+"_"+u).attr("accessoryprice")),s=parseFloat(jQuery("#accessory_id_"+o+"_"+u).attr("accessorywithoutvatprice")),m=a):(c=0!=e?n+"rel_":n+"prd_",a=parseFloat(jQuery("#main_price"+o).val()),m=parseFloat(jQuery("#product_old_price"+o).val()),jQuery("#product_price_excluding_price"+o).length?s=parseFloat(jQuery("#product_price_excluding_price"+o).val()):jQuery("#product_price_no_vat"+o).length&&(s=parseFloat(jQuery("#product_price_no_vat"+o).val())));var I=c+o+"_"+u,f=c+o,y=y&&checkProductStockRoom(d,f,v,i),i=jQuery('[name="attribute_id_'+I+'[]"]');i.length<=0&&1==redSHOP.RSConfig._("AJAX_CART_BOX")&&(g=jQuery("#requiedAttribute").val(),E=jQuery("#requiedProperty").val()),i.each(function(e,t){var d=t.value;I=c+o+"_"+u+"_"+d,l.push(d);var a,r,i,n=jQuery('[name="property_id_'+I+'[]"]');n.length&&(setPropertyImage(o,"property_id_"+I),a=[],r=[],n.each(function(e,t){"checkbox"==t.type||"radio"==t.type?(t.checked&&0!=t.value&&r.push(t.value),t.required&&(a=[t.getAttribute("attribute_name")])):(t.selectedIndex&&0!=t.options[t.selectedIndex].value&&r.push(t.options[t.selectedIndex].value),t.required&&a.push(t.getAttribute("attribute_name")))}),r.length&&_.push(r.join(",,")),a.length&&!r.length&&(g+=Joomla.JText._("COM_REDSHOP_ATTRIBUTE_IS_REQUIRED")+" "+unescape(a.join("<br>"))+"\n"),t="property_id_"+I+"_proprice_withoutvat",priceOldElementId="property_id_"+I+"_prooldprice",m=calculateSingleProductPrice(m,n="property_id_"+I+"_oprand",priceOldElementId,r),s=calculateSingleProductPrice(s,n,t,r),i=[],r.each(function(e){var t="property_id_"+I+"_stock"+e,a="property_id_"+I+"_preorderstock"+e;0<jQuery("#"+t).length&&0<jQuery("#"+a).length&&y&&0==u&&(y=checkProductStockRoom(jQuery("#"+t).val(),f,v,jQuery("#"+a).val()));var r=c+o+"_"+u+"_"+d+"_"+e,t='[name="subproperty_id_'+r+'[]"]';jQuery(t).length&&(setSubpropertyImage(o,"subproperty_id_"+r),a=[],"radio"==jQuery(t).attr("type")||"checkbox"==jQuery(t).attr("type")?a.push(jQuery(t+":checked").val()):a.push(jQuery(t).val()),a.each(function(e){var t="#subproperty_id_"+r+"_stock"+e,e="#subproperty_id_"+r+"_preOrderStock"+e;1==redSHOP.RSConfig._("USE_STOCKROOM")&&jQuery(t).length&&0==u&&(y=checkProductStockRoom(jQuery(t).val(),f,v,jQuery(e).val()))}),1==jQuery(t).attr("required")&&a.length&&(E+=jQuery("#subprop_lbl").html()+" "+unescape(jQuery(t).attr("subpropName"))+"\n"),e="subproperty_id_"+r+"_proprice_withoutvat",priceOldElementId="subproperty_id_"+r+"_prooldprice",m=calculateSingleProductPrice(m,t="subproperty_id_"+r+"_oprand",priceOldElementId,a),s=calculateSingleProductPrice(s,t,e,a),i.push(a.join("::"))),p.push(i.join(",,"))}))}),0<(a=s)&&(0==t||null==t)&&(a*=1+redSHOP.RSConfig._("BASE_TAX")),0==_.length&&(l=[]),0!=u?(jQuery("[data-id=acc_attribute_data]").val(l.join("##")),jQuery("[data-id=acc_property_data]").val(_.join("##")),jQuery("[data-id=acc_subproperty_data]").val(p.join("##")),jQuery("[data-id=accessory_price]").val(a),jQuery("[data-id=accessory_price_withoutvat]").val(s)):(jQuery("[data-id=attribute_data]").val(l.join("##")),jQuery("[data-id=property_data]").val(_.join("##")),jQuery("[data-id=subproperty_data]").val(p.join("##")),jQuery("[data-id=tmp_product_price]").val(a),jQuery("[data-id=total_price_no_vat_per_product]").val(s),jQuery("[data-id=tmp_product_old_price]").val(m)),jQuery("[data-id=requiedAttribute]").val(g),jQuery("[data-id=requiedProperty]").val(E)}function checkProductStockRoom(e,t,a,r){var d="instock";return 0<e?d=1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"instock":0==e&&(d="global"==a&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||""==a&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||"no"==a?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"instock":"outofstock":0==r?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"preorder":"outofstock":1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"preorder"),redSHOP.updateStockStatusMessage(d,t),"instock"==d}function calculateSingleProductPrice(e,t,a,r){e=parseFloat(e);for(var d=0;d<r.length&&0!=r[d];d++){var i=r[d],n=jQuery("#"+t+i).val(),i=parseFloat(jQuery("#"+a+i).val());if("-"==n)e-=i;else if("+"==n)e+=i;else if("*"==n)e*=i;else if("/"==n)e/=i;else if("="==n){e=i;break}}return e}function calculateTotalPrice(e,t,a){if(redSHOP.setProductTax({id:e,price:1}),0==e||""==e)return!1;var r=0,d=0,i=0,n=0,o=0,u=parseFloat(collectAccessory(e,t)),c=0!=t?t:e,l=0,_=0;collectAttributes(e,0,t,a),jQuery("[data-id=tmp_product_old_price]")&&(o=parseFloat(jQuery("[data-id=tmp_product_old_price]").val())),jQuery("[data-id=accessory_price_withoutvat]").length&&(n=parseFloat(jQuery("[data-id=accessory_price_withoutvat]").val())),jQuery("#quantity"+c).length&&jQuery("#quantity"+c).val(),jQuery("[data-id=tmp_product_price]").length&&(r=parseFloat(jQuery("[data-id=tmp_product_price]").val())),jQuery("#hidden_subscription_prize").length&&(r+=parseFloat(jQuery("#hidden_subscription_prize").val())),jQuery("[data-id=total_price_no_vat_per_product]").length&&(d=parseFloat(jQuery("[data-id=total_price_no_vat_per_product]").val())),jQuery("[data-id=tmp_product_old_price]").length&&(i=parseFloat(jQuery("[data-id=tmp_product_old_price]").val())),setWrapperComboBox(),jQuery("#wrapper_price").length&&(l=parseFloat(jQuery("#wrapper_price").val())),jQuery("#wrapper_price_withoutvat").length&&(_=parseFloat(jQuery("#wrapper_price_withoutvat").val())),final_price_f=r+u+l,product_price_without_vat=d+n+_,o=i+u+l,savingprice=parseFloat(o)-parseFloat(final_price_f),final_price_novat="1"!=redSHOP.RSConfig._("SHOW_PRICE")||!final_price_f||"1"==redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&"1"!=redSHOP.RSConfig._("SHOW_QUOTATION_PRICE")?(final_price=getPriceReplacement(final_price_f),getPriceReplacement(product_price_without_vat)):(final_price=number_format(final_price_f,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))&&("1"==redSHOP.RSConfig._("SHOW_PRICE_WITHOUT_VAT")?(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price_novat),jQuery("#display_product_discount_price"+e).html(final_price_novat)):(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price),jQuery("#display_product_discount_price"+e).html(final_price)),product_price_without_vat=product_price_without_vat?number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):getPriceReplacement(product_price_without_vat),jQuery("#display_product_price_without_vat"+e).html(product_price_without_vat),jQuery("#display_product_price_no_vat"+e).html(product_price_without_vat),jQuery("#display_product_old_price"+e).length&&(o=o?number_format(o,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):getPriceReplacement(o),jQuery("#display_product_old_price"+e).html(o)),jQuery("#display_product_saving_price"+e).length&&(savingprice=number_format(savingprice,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),jQuery("#display_product_saving_price"+e).html(savingprice)),jQuery("#rs_selected_accessory_price").html(final_price))}function collectAccessory(e,t){if(0==e||""==e)return!1;var a="",r="",d=0,i=0,n=0,o=0,u=0,c=[],l=[],_=[],p=[],s=[];if(document.getElementById("isAjaxBoxOpen")&&(a=document.getElementById("isAjaxBoxOpen").value),"viewajaxdetail"==a&&(r="ajax_"),document.getElementsByName("accessory_id_"+r+e+"[]")){if(dcatt=document.getElementsByName("accessory_id_"+r+e+"[]"),document.getElementById("giftcard_id")&&0<document.getElementById("giftcard_id").value&&0==dcatt.length)return!0;var m=dcatt.length;for(j=0;j<m;j++){var y,g=0,E=0,v=dcatt[j].value,I=r+e+"_"+v;acc_chk=document.getElementById("accessory_id_"+I),document.getElementById("attribute_id_"+I)&&document.getElementById("attribute_id_"+I),y=dcatt[j].checked;var f=1;qid=0!=t?t:e,f=document.getElementById("accquantity_"+I)?document.getElementById("accquantity_"+I).value:document.getElementById("quantity"+qid)&&"select-one"==document.getElementById("quantity"+qid).type?document.getElementById("quantity"+qid).value:1,y?(c[u]=v,l[u]=f,collectAttributes(e,v,t),jQuery("[data-id=accessory_price]")&&(g=parseFloat(jQuery("[data-id=accessory_price]").val())),jQuery("[data-id=accessory_price_withoutvat]")&&(E=parseFloat(jQuery("[data-id=accessory_price_withoutvat]").val())),jQuery("[data-id=acc_attribute_data]")&&(_[u]=jQuery("[data-id=acc_attribute_data]").val()),jQuery("[data-id=acc_property_data]")&&(p[u]=jQuery("[data-id=acc_property_data]").val()),jQuery("[data-id=acc_subproperty_data]")&&(s[u]=jQuery("[data-id=acc_subproperty_data]").val()),document.getElementById("divaccstatus"+I)&&(document.getElementById("divaccstatus"+I).className="accessorystatus added"),u++):document.getElementById("divaccstatus"+I)&&(document.getElementById("divaccstatus"+I).className="accessorystatus"),i+=parseFloat(g)*f,n+=parseFloat(E)*f}d+=parseFloat(i),o+=parseFloat(n),jQuery("[data-id=accessory_data]")&&jQuery("[data-id=accessory_data]").val(c.join("@@")),jQuery("[data-id=acc_quantity_data]")&&jQuery("[data-id=acc_quantity_data]").val(l.join("@@")),jQuery("[data-id=acc_attribute_data]")&&jQuery("[data-id=acc_attribute_data]").val(_.join("@@")),jQuery("[data-id=acc_property_data]")&&jQuery("[data-id=acc_property_data]").val(p.join("@@")),jQuery("[data-id=acc_subproperty_data]")&&jQuery("[data-id=acc_subproperty_data]").val(s.join("@@")),jQuery("[data-id=accessory_price]")&&jQuery("[data-id=accessory_price]").val(d),jQuery("[data-id=accessory_price_withoutvat]")&&jQuery("[data-id=accessory_price_withoutvat]").val(o)}return d}function number_format(e,t,a,r){var d=e,e=t;d*=redSHOP.RSConfig._("CURRENCY_CONVERT");var t=function(e,t){t=Math.pow(10,t);return(Math.round(e*t)/t).toString()},d=isFinite(+d)?+d:0,r=void 0===r?",":r,a=void 0===a?".":a,i=t(0<(e=isFinite(+e)?Math.abs(e):0)?d:Math.round(d),e),t=t(Math.abs(d),e),n=(i=1e3<=t?(t=(n=t.split(/\D/))[0].length%3||3,n[0]=i.slice(0,t+(d<0))+n[0].slice(t).replace(/(\d{3})/g,r+"$1"),n.join(a)):i.replace(".",a)).indexOf(a);1<=e&&-1!==n&&i.length-n-1<e?i+=new Array(e-(i.length-n-1)).join(0)+"0":1<=e&&-1===n&&(i+=a+new Array(e).join(0)+"0");var o="";switch(redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION")){case"behind":o=i+' <span class="product-currency-symbol">'+redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+"</span>";break;case"none":o=i;break;case"front":default:o='<span class="product-currency-symbol">'+redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+"</span> "+i}return o}function getPriceReplacement(e){var t="";return"0"==redSHOP.RSConfig._("SHOW_PRICE")&&(url=redSHOP.RSConfig._("PRICE_REPLACE_URL"),""==url&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("PRICE_REPLACE")+"</a>"),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&0==e&&(url=redSHOP.RSConfig._("ZERO_PRICE_REPLACE_URL"),""==url&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("ZERO_PRICE_REPLACE")+"</a>",null===url&&null===redSHOP.RSConfig._("ZERO_PRICE_REPLACE"))?"":t}function setWrapper(e,t,a,r){document.getElementById("wrapper_id")&&(document.getElementById("wrapper_id").value=e),jQuery("[data-id=sel_wrapper_id]")&&jQuery("[data-id=sel_wrapper_id]").val(e),document.getElementById("wrapper_price").value=t,document.getElementById("wrapper_price_withoutvat").value=a,calculateTotalPrice(r,0)}function setPropImage(e,t,a){var r=document.getElementById(t+"_"+a);if(r=r||document.getElementById(t))if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++)d[i].value==a&&(d[i].checked=!0);else for(i=0;i<r.options.length;i++)r.options[i].value==a&&(r.options[i].selected=!0)}function setSubpropImage(e,t,a){var r=document.getElementById(t+"_"+a);if(r=r||document.getElementById(t))if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){d[i].value;d[i].value==a&&(d[i].checked=!0)}else for(i=0;i<r.options.length;i++){r.options[i].value;r.options[i].value==a&&(r.options[i].selected=!0)}}function setPropertyImage(e,t){var a=0,r=document.getElementById(t);if(r)if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){var n="",a=d[i].value;d[i].checked&&(n="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=n)}else for(i=0;i<r.length;i++){n="";a=r[i].value,r[r.selectedIndex].value==a&&(n="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=n)}else for(d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){n="";a=d[i].value,d[i].checked&&(n="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=n)}}function setSubpropertyImage(e,t,a){var a=0,r=document.getElementById(t);if(r)if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){var n="";a=d[i].value,d[i].checked&&(n="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=n)}else for(i=0;i<r.length;i++){n="";a=r[i].value,r[r.selectedIndex].value==a&&(n="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=n)}else for(d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){n="";a=d[i].value,d[i].checked&&(n="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=n)}}function displayAdditionalImage(t,e,a,r,d,i){var n=arguments,o="&product_id="+t;o=(o=(o=(o=o+"&accessory_id="+e)+"&relatedprd_id="+a)+"&property_id="+r)+"&subproperty_id="+d;var u;0!=e?(prefix="acc_",t=e):prefix=0!=a?"rel_":"prd_",collectAttributes(t,0,a,i),jQuery("[data-id=property_data]")&&(u=jQuery("[data-id=property_data]").val(),o=o+"&property_data="+encodeURIComponent(u)),jQuery("[data-id=subproperty_data]")&&(u=jQuery("[data-id=subproperty_data]").val(),o=o+"&subproperty_data="+encodeURIComponent(u)),document.getElementById(prefix+"main_imgwidth")&&(o=o+"&main_imgwidth="+parseInt(document.getElementById(prefix+"main_imgwidth").value)),document.getElementById(prefix+"main_imgheight")&&(o=o+"&main_imgheight="+parseInt(document.getElementById(prefix+"main_imgheight").value));var c,l=0;(document.getElementById("a_main_image"+t)||document.getElementById("main_image"+t))&&(_="",document.getElementById("a_main_image"+t)?void 0!==(c=document.getElementById("a_main_image"+t).href)&&(_=(_=(c=(c=(_=(_=(c=c.split("")).reverse()).join("")).split("."))[0].split("")).reverse()).join("")):void 0!==(c=document.getElementById("main_image"+t).src)&&(_=(_=(_=(_=(c=(c=(_=(_=(c=c.split("")).reverse()).join("")).split("."))[0].split("")).reverse()).join("")).split("&"))[0]),"jpg"!=(_=_.toLowerCase())&&"jpeg"!=_&&"png"!=_&&"gif"!=_&&"bmp"!=_||(l=1));var _=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displayAdditionImage&redview="+redSHOP.RSConfig._("REDSHOP_VIEW")+"&redlayout="+redSHOP.RSConfig._("REDSHOP_LAYOUT");_+=o,redSHOP.triggerCustomEvents("onBeforeAjaxdisplayAdditionalImage",{url:_,product_id:t,allarg:n}),(request=getHTTPObject()).onreadystatechange=function(){var e;4==request.readyState&&(""!=(e=request.responseText.split("`_`"))[9]&&document.getElementById("product_number_variable"+t)&&(document.getElementById("product_number_variable"+t).innerHTML=e[9]),subproperty_main_image=e[4],document.getElementById("a_main_image"+t)&&(""!=e[2]&&1==l&&(document.getElementById("a_main_image"+t).href=e[2]),""!=e[3]&&(document.getElementById("a_main_image"+t).title=e[3])),document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=e[4]),document.getElementsByClassName("product_more_videos")[0]&&(document.getElementsByClassName("product_more_videos")[0].innerHTML=e[16]),document.getElementById("additional_images"+t)&&""!=e[1]&&(document.getElementById("additional_images"+t).innerHTML=e[1]),document.getElementById("hidden_attribute_cartimage"+t)&&(document.getElementById("hidden_attribute_cartimage"+t).value=e[12]),document.getElementById("stockImage"+t)&&""!=e[5]&&(document.getElementById("stockImage"+t).src=e[5]),document.getElementById("stockImageTooltip"+t)&&""!=e[6]&&(document.getElementById("stockImageTooltip"+t).innerHTML=e[6]),document.getElementById("displayProductInStock"+t)&&""!=e[10]&&(document.getElementById("displayProductInStock"+t).innerHTML=e[10]),document.getElementById("ProductAttributeMinDelivery"+t)&&""!=e[7]&&(document.getElementById("ProductAttributeMinDelivery"+t).innerHTML=e[7]),document.getElementById("stock_status_div"+t)&&""!=e[11]&&(document.getElementById("stock_status_div"+t).innerHTML=e[11]),document.getElementById("notify_stock"+t)&&(document.getElementById("notify_stock"+t).innerHTML=e[13]),document.getElementById("stock_availability_date_lbl"+t)&&(document.getElementById("stock_availability_date_lbl"+t).innerHTML=e[14]),document.getElementById("stock_availability_date"+t)&&(document.getElementById("stock_availability_date"+t).innerHTML=e[15]),preloadSlimbox({isenable:!0,mainImage:!1}),redSHOP.triggerCustomEvents("onAfterAjaxdisplayAdditionalImage",{arrResponse:e,product_id:t,allarg:n}))},request.open("GET",_,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function preloadSlimbox(e){var t;e.isenable&&(t={handler:"image"},redBOX.initialize({}),e.mainImage?redBOX.assign($$("a[rel='myallimg']"),t):(redBOX.assign($$(".additional_image > a[rel='myallimg']"),t),redBOX.assign($$("[id^='additional_vids_'] > a.modal"),{handler:"iframe",size:{x:800,y:500}})))}function setWrapperComboBox(){document.getElementById("wrapper_id")&&jQuery("[data-id=sel_wrapper_id]").length&&(r=document.getElementById("wrapper_id").value,jQuery("[data-id=sel_wrapper_id]").val(r));var e=document.getElementsByName("w_price"),t=0;jQuery("[data-id=sel_wrapper_id]").length&&(t=jQuery("[data-id=sel_wrapper_id]").val());var a=0,r=0;for(document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&0!=t&&(a=document.getElementById("w_price"+t).value,r=document.getElementById("w_price_withoutvat"+t).value),document.getElementById("wrapper_price")&&(document.getElementById("wrapper_price").value=a),document.getElementById("wrapper_price_withoutvat")&&(document.getElementById("wrapper_price_withoutvat").value=r),i=0;i<e.length;i++){var d=e[i].id.substr(7);document.getElementById("wrappertd"+d)&&(d==t?(document.getElementById("wrappertd"+d).style.border="1px solid",document.getElementById("wrappertd"+d).style.padding="7px"):(document.getElementById("wrappertd"+d).style.border="",document.getElementById("wrappertd"+d).style.padding=""))}}function discountCalculation(o){var u,c,l,_,p,e=0,t=0,a=0,r=0,d="cm";if(document.getElementById("calc_height")&&""==(e=document.getElementById("calc_height").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;if(document.getElementById("calc_width")&&""==(t=document.getElementById("calc_width").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;if(document.getElementById("calc_depth")&&""==(a=document.getElementById("calc_depth").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;if(document.getElementById("calc_radius")&&""==(r=document.getElementById("calc_radius").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;if(document.getElementById("discount_calc_unit")&&0==(d=document.getElementById("discount_calc_unit").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;document.getElementById("calc_unit")&&document.getElementById("calc_unit").value;var i=[];if(document.getElementsByName("pdc_option_name[]"))for(var n=document.getElementsByName("pdc_option_name[]"),s=0,m=0;m<n.length;m++){var y=n[m];y.checked&&(i[s]=y.value,s++)}i=i.join(","),http=getHTTPObject(),null!=http?(http.onreadystatechange=function(){if(4==http.readyState){var e=http.responseText;if("fail"==(e=e.replace(/^\s+|\s+$/g,"")))return alert(Joomla.JText._("COM_REDSHOP_NOT_AVAILABLE")),!1;e=e.split("\n");for(var t=document.getElementsByName("quantity"),a=1,r=0;r<t.length;r++)(t[r].id=="ajax_quantity"+o||t[r].id=="quantity"+o)&&(a=t[r].value);u=e[0],c=e[1],l=e[2],price_excl_vat=e[7];var d=number_format(c,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),i=number_format(l,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));a<=0&&(a=1);var n=number_format(p=parseFloat(l)*a,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));_=e[3]+u+"<br />",_+=e[4]+d+"<br />",_+=e[5]+i+"<br />",_+=e[6]+n,document.getElementById("discount_cal_final_price")&&(document.getElementById("discount_cal_final_price").innerHTML=_),document.getElementById("main_price"+o)&&(document.getElementById("main_price"+o).value,"1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))&&(i=parseFloat(p),e=1==e[8]?p+price_excl_vat*a:p*a,n=number_format(i,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),formatted_product_price_excl_vat=number_format(e,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),document.getElementById("produkt_kasse_hoejre_pris_indre"+o)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+o).innerHTML=formatted_product_price_excl_vat,document.getElementById("display_product_price_no_vat"+o)&&(document.getElementById("display_product_price_no_vat"+o).innerHTML=n),document.getElementById("product_price_no_vat"+o)&&(document.getElementById("product_price_no_vat"+o).value=i)),document.getElementById("product_price_incl_vat"+o)&&(document.getElementById("product_price_incl_vat"+o).innerHTML=formatted_product_price_excl_vat),document.getElementById("main_price"+o).value=e),calculateTotalPrice(o,0))}},http.open("GET",redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=cart&task=discountCalculator&product_id="+o+"&calcHeight="+e+"&calcWidth="+t+"&calcDepth="+a+"&calcRadius="+r+"&calcUnit="+d+"&pdcextraid="+i,!0),http.setRequestHeader("X-Requested-With","XMLHttpRequest"),http.send(null)):alert("Your browser does not support XMLHTTP!")}function setProductUserFieldImage(e,t,a,r){for(var d=document.getElementsByClassName("imgClass_"+t),i=0;i<d.length;i++)removeClass(d[i],"selectedimg");document.getElementById(e+"_"+t)&&(document.getElementById(e+"_"+t).value=a,r.className+=" selectedimg"),document.getElementById("ajax"+e+"_"+t)&&(document.getElementById("ajax"+e+"_"+t).value=a),document.getElementById(e)&&(document.getElementById(e).value=a)}function removeClass(e,t){hasClass(e,t)&&(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(t," "))}function hasClass(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function RedgetElementsByClassName(e){var t=[],a=document.all||document.getElementsByTagName("*");for(i=0,j=0;i<a.length;i++)a[i].className==e&&(t[j]=a[i],j++);return t}function getElementsByClassName(e){var t=[],a=document.all||document.getElementsByTagName("*");for(i=0,j=0;i<a.length;i++)a[i].className==e&&(t[j]=a[i],j++);return t}function displayAddtocartForm(e,t,a,r,d){return 0!=t&&""!=t&&(redSHOP.updateCartExtraFields(jQuery("#"+d+" [name^=extrafields]"),t,"#"+e),jQuery("[data-id=requiedAttribute]").val(jQuery("#"+e+" [name=requiedAttribute]").attr("reattribute")),jQuery("[data-id=requiedProperty]").val(jQuery("#"+e+" [name=requiedProperty]").attr("reproperty")),0==r&&calculateTotalPrice(t,a),!!setAddtocartForm(e,t))}function setAddtocartForm(e,t){var a=document.getElementById(e);jQuery("[data-id=Itemid]")&&(a.elements.Itemid.value=jQuery("[data-id=Itemid]").val()),jQuery("[data-id=attribute_data]")&&(a.elements.attribute_data.value=jQuery("[data-id=attribute_data]").val()),jQuery("[data-id=property_data]")&&(a.elements.property_data.value=jQuery("[data-id=property_data]").val()),jQuery("[data-id=subproperty_data]")&&(a.elements.subproperty_data.value=jQuery("[data-id=subproperty_data]").val()),jQuery("[data-id=accessory_data]")&&(a.elements.accessory_data.value=jQuery("[data-id=accessory_data]").val()),jQuery("[data-id=acc_quantity_data]")&&(a.elements.acc_quantity_data.value=jQuery("[data-id=acc_quantity_data]").val()),jQuery("[data-id=acc_attribute_data]")&&(a.elements.acc_attribute_data.value=jQuery("[data-id=acc_attribute_data]").val()),jQuery("[data-id=acc_property_data]")&&(a.elements.acc_property_data.value=jQuery("[data-id=acc_property_data]").val()),jQuery("[data-id=acc_subproperty_data]")&&(a.elements.acc_subproperty_data.value=jQuery("[data-id=acc_subproperty_data]").val()),jQuery("[data-id=accessory_price]")&&(a.elements.accessory_price.value=jQuery("[data-id=accessory_price]").val()),jQuery("[data-id=requiedAttribute]")&&(a.elements.requiedAttribute.value=jQuery("[data-id=requiedAttribute]").val()),jQuery("[data-id=requiedProperty]")&&(a.elements.requiedProperty.value=jQuery("[data-id=requiedProperty]").val());e=1;if(a.quantity.value&&(e=a.quantity.value),document.getElementById("hidden_attribute_cartimage"+t)&&(a.hidden_attribute_cartimage.value=document.getElementById("hidden_attribute_cartimage"+t).value),0!=parseInt(a.min_quantity.value)&&parseInt(a.min_quantity.value)>e)return alert(a.min_quantity.getAttribute("requiredtext")+" "+parseInt(a.min_quantity.value)),!1;if(0!=parseInt(a.max_quantity.value)&&parseInt(a.max_quantity.value)<e)return alert(a.max_quantity.getAttribute("requiredtext")+" "+parseInt(a.max_quantity.value)),!1;if(document.getElementById("calc_height")){var r=document.getElementById("calc_height").value;if(""==r)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;a.calcHeight.value=r}if(document.getElementById("calc_width")){r=document.getElementById("calc_width").value;if(""==r)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;a.calcWidth.value=r}if(document.getElementById("calc_depth")){var d=document.getElementById("calc_depth").value;if(""==d)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;a.calcDepth.value=d}if(document.getElementById("calc_radius")){d=document.getElementById("calc_radius").value;if(""==d)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;a.calcRadius.value=d}if(document.getElementById("discount_calc_unit")){if(calUnit=document.getElementById("discount_calc_unit").value,0==calUnit)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;a.calcUnit.value=calUnit}var i=[];if(document.getElementsByName("pdc_option_name[]"))for(var n=document.getElementsByName("pdc_option_name[]"),o=0,u=0;u<n.length;u++){var c=n[u];c.checked&&(i[o]=c.value,o++)}if(i=i.join(","),a.pdcextraid.value=i,document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;a.subscription_id.value=subId}return!0}function checkAddtocartValidation(e,t,a,r,d,i,n,o){if(0==t||""==t)return!1;if(0==redSHOP.RSConfig._("AJAX_CART_BOX")){if(!userfieldValidation("extrafields"+t))return!1;var u=document.getElementById(e).requiedAttribute.value,c=document.getElementById(e).requiedProperty.value;return""!=u?(alert(u),!1):""!=c?(alert(c),!1):(redSHOP.triggerCustomEvents("redShopAddtocartValidationJsTrigger",{arguments:arguments}),void document.getElementById(e).submit())}var l,_=parseInt(i)+parseInt(n)+parseInt(o);0!=r?submitAjaxCartdetail(e,t,a,r,i,n,o):(l=!0,userfieldValidation("extrafields"+t)||(l=!1),""!=(u=document.getElementById(e).requiedAttribute.value)&&(l=!1),""!=(c=document.getElementById(e).requiedProperty.value)&&(l=!1),redSHOP.triggerCustomEvents("redShopAddtocartValidationJsTrigger",{arguments:arguments}),(0<_&&0==l?displayAjaxCartdetail:submitAjaxCartdetail)(e,t,a,r,i,n,o))}function displayAjaxCartdetail(e,t,a,r,d,o,u){if(0==t||""==t)return!1;var c="";document.getElementById("isAjaxBoxOpen")&&(c=document.getElementById("isAjaxBoxOpen").value);document.getElementById(e);for(var l,_,p,s,m=document.getElementsByName("extrafields"+t+"[]"),y="",g="",E=!1,v="",I=!1,f=0;f<m.length;f++)(m[f].value||"text"!=m[f].type)&&(m[f].value||"select-one"!=m[f].type)?m[f].value||"hidden"!=m[f].type?"checkbox"==m[f].type?(l=redSHOP.filterExtraFieldName(m[f].id),""!=g&&g!=l&&0==E&&(y+=g+","),g!=l&&(g=l,E=!1),m[f].checked||1==E?E=!0:(f==m.length-1&&0==E||"checkbox"!=m[f+1].type&&0==E)&&(y+=g+",")):"radio"==m[f].type?(_=redSHOP.filterExtraFieldName(m[f].id),""!=v&&v!=_&&0==I&&(y+=v+","),v!=_&&(v=_,I=!1),m[f].checked||1==I?I=!0:(f==m.length-1&&0==I||"radio"!=m[f+1].type&&0==I)&&(y+=v+",")):"select-multiple"==m[f].type&&(s=redSHOP.filterExtraFieldName(m[f].id),m[f].value||(y+=s+",")):(p=redSHOP.filterExtraFieldName(m[f].id),y+=p,m.length-1!=f&&(y+=",")):(y+=m[f].id,m.length-1!=f&&(y+=","));var S,h=RedgetElementsByClassName("calendar");for(cal_i=0;cal_i<h.length;cal_i++){var P=h[cal_i].id;arr=P.split("_img"),n=arr.length;P=arr[0];""!=P&&""==document.getElementById(P).value&&(S=redSHOP.filterExtraFieldName(P),y+=","+S+",")}var R="";if(document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;R="&subscription_id="+subId}var O=1,B="";request=getHTTPObject(),document.getElementById("quantity"+t).value&&(O=document.getElementById("quantity"+t).value);var b=document.getElementById(e).requiedAttribute.value,j=document.getElementById(e).requiedProperty.value,A=document.getElementById(e).accessory_data.value;0==y&&(u=0),""==b&&""==j&&(d=0);b=[];0<o&&""!=A&&0!=A&&o==(b=A.split("@@")).length&&(o=0);var C,j=parseInt(d)+parseInt(o)+parseInt(u),A=parseInt(d)+parseInt(u);0<o&&0==A&&0<b.length||0==j||"viewajaxdetail"==c?submitAjaxCartdetail(e,t,a,r,d,o,u):(o=(o=(o=(o=(o=(o="&property_data="+encodeURIComponent(document.getElementById(e).property_data.value))+"&subproperty_data="+encodeURIComponent(document.getElementById(e).subproperty_data.value))+"&accessory_data="+encodeURIComponent(document.getElementById(e).accessory_data.value))+"&acc_quantity_data="+encodeURIComponent(document.getElementById(e).acc_quantity_data.value))+"&acc_property_data="+encodeURIComponent(document.getElementById(e).acc_property_data.value))+"&acc_subproperty_data="+encodeURIComponent(document.getElementById(e).acc_subproperty_data.value),B="&view=product&pid="+t+"&relatedprd_id="+a+"&layout=viewajaxdetail&product_quantity="+O+"&nextrafield="+u+"&extrafieldNames="+y+R+o,C=redSHOP.RSConfig._("AJAX_BASE_URL")+B,request.onreadystatechange=function(){if(4==request.readyState&&200==request.status){var e=request.responseText,e={url:C,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_HEIGHT"))},htmldata:e,onOpen:function(){jQuery("select[id^=property_id_ajax_prd_]").select2(),redSHOP.triggerCustomEvents("onDisplayAjaxCartBoxDetail",{params:B})}};redBOX.initialize({}),document.attbox=redBOX.open(null,e);preloadSlimbox({isenable:!1,mainImage:!1});var t=RedgetElementsByClassName("calendar");for(i=0;i<t.length;i++){var a=t[i].id;arr=a.split("_img"),n=arr.length;var r=arr[0],d=r.split("ajax");-1!=a.search("ajax")&&-1!=y.search(d[0])&&window.addEvent("domready",function(){Calendar.setup({inputField:r,ifFormat:"%d-%m-%Y",button:t[i].id,align:"Tl",singleClick:!0})})}}},request.open("POST",C,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(B))}redSHOP.onChangePropertyDropdown=[],redSHOP.updateStockStatusMessage=function(e,t){var a="inline-block",r="inline-block",d="inline-block",i="inline-block",n="",n="instock"==e?(i=a="inline-block",d=r="none",Joomla.JText._("COM_REDSHOP_AVAILABLE_STOCK")):(i=a="none","preorder"==e?(r="none",d="inline-block",Joomla.JText._("COM_REDSHOP_PREORDER_PRODUCT_OUTOFSTOCK_MESSAGE")):(r="inline-block",d="none",Joomla.JText._("COM_REDSHOP_PRODUCT_OUTOFSTOCK_MESSAGE")));document.getElementById("pdaddtocart"+t)&&(document.getElementById("pdaddtocart"+t).style.display=a),jQuery("[data-id=stockaddtocart"+t+"]")&&jQuery("[data-id=stockaddtocart"+t+"]").attr("style","display:"+r),document.getElementById("stockaddtocart"+t)&&(document.getElementById("stockaddtocart"+t).innerHTML=n),document.getElementById("preordercart"+t)&&(document.getElementById("preordercart"+t).style.display=d),document.getElementById("stockQuantity"+t)&&(document.getElementById("stockQuantity"+t).style.display=i)},redSHOP.redShopAddtocartValidationJsTrigger=[];var getExtraParamsArray={};function submitAjaxCartdetail(e,a,t,r,d,i,n){var o=document.getElementById(e),u="";if(!userfieldValidation("extrafields"+a))return!1;var c=jQuery("#"+e+" [name=requiedAttribute]").val(),l=jQuery("#"+e+" [name=requiedProperty]").val();if(0!=c&&""!=c)return alert(c),!1;if(0!=l&&""!=l)return alert(l),!1;extraFieldPost=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+a+'"]'),a).join("&");l="";if(document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;l="&subscription_id="+subId}document.getElementById("giftcard_id")?(u="&giftcard_id="+a,document.getElementById("reciver_email")&&(u+="&reciver_email="+document.getElementById("reciver_email").value),document.getElementById("reciver_name")&&(u+="&reciver_name="+document.getElementById("reciver_name").value),document.getElementById("customer_amount")&&(u+="&customer_amount="+document.getElementById("customer_amount").value)):u="&product_id="+a,request=getHTTPObject();var _="ajax_cart_box=1";if(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=_+"&Itemid="+o.Itemid.value+u)+"&category_id="+o.category_id.value)+"&attribute_data="+o.attribute_data.value)+"&property_data="+o.property_data.value)+"&subproperty_data="+o.subproperty_data.value)+"&requiedAttribute="+o.requiedAttribute.value)+"&requiedProperty="+o.requiedProperty.value)+"&accessory_data="+o.accessory_data.value)+"&acc_quantity_data="+o.acc_quantity_data.value)+"&acc_attribute_data="+o.acc_attribute_data.value)+"&acc_property_data="+o.acc_property_data.value)+"&acc_subproperty_data="+o.acc_subproperty_data.value)+"&accessory_price="+o.accessory_price.value,document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&(_=_+"&sel_wrapper_id="+o.sel_wrapper_id.value),_=(_=_+"&quantity="+o.quantity.value)+"&hidden_attribute_cartimage="+o.hidden_attribute_cartimage.value,document.getElementById("calc_height")&&(_=_+"&calcHeight="+o.calcHeight.value),document.getElementById("calc_width")&&(_=_+"&calcWidth="+o.calcWidth.value),document.getElementById("calc_depth")&&(_=_+"&calcDepth="+o.calcDepth.value),document.getElementById("calc_radius")&&(_=_+"&calcRadius="+o.calcRadius.value),document.getElementById("calc_unit")&&(_=_+"&calcUnit="+o.calcUnit.value),_=(_=_+"&pdcextraid="+o.pdcextraid.value)+l+"&"+extraFieldPost,redSHOP.triggerCustomEvents("redShopJsTrigger",{arguments:arguments}),"object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)_+="&"+key+"="+getExtraParamsArray[key];request.open("POST",redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=cart&task=add",!1),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("X-Requested-With","XMLHttpRequest");var p={show_final_cart_box:!0};request.onreadystatechange=function(){if(4==request.readyState){var e=request.responseText;if("0"==(e=e.split("`"))[1])return alert(e[2]),!1;document.attbox&&document.attbox.close(),document.getElementById("mod_cart_total")&&e[1]&&(document.getElementById("mod_cart_total").innerHTML=e[1]),document.getElementById("rs_promote_free_shipping_div")&&e[2]&&(document.getElementById("rs_promote_free_shipping_div").innerHTML=e[2]),document.getElementById("mod_cart_checkout_ajax")&&(document.getElementById("mod_cart_checkout_ajax").style.display=""),redSHOP.triggerCustomEvents("onAfterSubmitAjaxCartdetail",{responce:e,product_id:a,params:_,aj_flag:p,totAttribute:d,totAccessory:i});var t=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&pid="+a+"&r_template=cartbox";request_inner=getHTTPObject(),request_inner.onreadystatechange=function(){var e;4==request_inner.readyState&&200==request_inner.status&&p.show_final_cart_box&&(e=request_inner.responseText,p.show_final_cart_box=!1,e={url:t,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_BOX_HEIGHT"))},htmldata:e,onOpen:function(){redSHOP.triggerCustomEvents("onDisplayAjaxCartBox",{params:_,product_id:a}),0<redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME")&&function(){this.close()}.bind(this).delay(redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME"))}},redBOX.initialize({}),document.ajaxbox=redBOX.open(null,e))},request_inner.open("GET",t,!0),request_inner.setRequestHeader("X-Requested-With","XMLHttpRequest"),request_inner.send(null)}},request.send(_)}function displayAddtocartProperty(e,t,a,r){return document.getElementById("attribute_data")&&(document.getElementById("attribute_data").value=a),document.getElementById("property_data")&&(document.getElementById("property_data").value=r),document.getElementById("subproperty_data")&&(document.getElementById("subproperty_data").value=""),!!setAddtocartForm(e,t)}function showallreviews(){document.getElementById("showreviews")&&("none"==document.getElementById("showreviews").style.display?document.getElementById("showreviews").style.display="":document.getElementById("showreviews").style.display="none")}function checkAddtocartwishlistValidation(e,t,a,r,d,i,n,o,u){if(0==t||""==t)return!1;if(1!=u)return submitAjaxCartdetail(e,t,a,r,i,n,o),!0;if(!userfieldValidation("extrafields"+t))return!1;t=document.getElementById(e).requiedAttribute.value,e=document.getElementById(e).requiedProperty.value;return""!=t?(alert(t),!1):""==e||(alert(e),!1)}redSHOP.redShopJsTrigger=[];var mainpro_id=[],totatt=[],totcount_no_user_field=[];function productalladdprice(e){mainpro_id=document.frm.product_id.value.split(","),totatt=document.frm.totacc_id.value.split(","),totcount_no_user_field=document.frm.totcount_no_user_field.value.split(","),mainpro_id.length=mainpro_id.length-1;for(var t=0;t<mainpro_id.length;t++)if(""!=mainpro_id[t]&&displayAddtocartForm("addtocart_prd_"+mainpro_id[t],mainpro_id[t],"0","0","user_fields_form")&&!checkAddtocartwishlistValidation("addtocart_prd_"+mainpro_id[t],mainpro_id[t],"0","0","user_fields_form",totatt[t],"",totcount_no_user_field[t],1))return!1;submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[0],mainpro_id[0],0,0,totatt[0],0,totcount_no_user_field[0],e)}var d=0;function submitAjaxwishlistCartdetail(e,t,a,r,i,n,o,u){displayAddtocartForm("addtocart_prd_"+mainpro_id[d],mainpro_id[d],"0","0","user_fields_form");var c=document.getElementById(e),l=[],_=jQuery("#"+e+' [name="requiedAttribute"]').val(),p=jQuery("#"+e+' [name="requiedProperty"]').val();if(!userfieldValidation("extrafields"+t))return!1;if(0!=_&&""!=_)return alert(_),!1;if(0!=p&&""!=p)return alert(p),!1;p=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+t+'"]'),t).join("&");if(0<jQuery("#hidden_subscription_id").length){if(subId=jQuery("#hidden_subscription_id").val(),0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;l.push("subscription_id="+subId)}0<jQuery("#giftcard_id").length?(l.push("giftcard_id="+t),l.push("reciver_email="+jQuery("#reciver_email").val()),l.push("reciver_name="+jQuery("#reciver_name").val()),l.push("customer_amount="+jQuery("#customer_amount").val())):l.push("product_id="+t),request=getHTTPObject(),l.push("Itemid="+c.Itemid.value),l.push("category_id="+c.category_id.value),l.push("attribute_data="+c.attribute_data.value),l.push("property_data="+c.property_data.value),l.push("subproperty_data="+c.subproperty_data.value),l.push("requiedAttribute="+c.requiedAttribute.value),l.push("requiedProperty="+c.requiedProperty.value),l.push("accessory_data="+c.accessory_data.value),l.push("acc_quantity_data="+c.acc_quantity_data.value),l.push("acc_attribute_data="+c.acc_attribute_data.value),l.push("acc_property_data="+c.acc_property_data.value),l.push("acc_subproperty_data="+c.acc_subproperty_data.value),l.push("accessory_price="+c.accessory_price.value),l.push("sel_wrapper_id="+c.sel_wrapper_id.value),l.push("quantity=1"),l.push("pdcextraid="+c.pdcextraid.value),document.getElementById("calc_height")&&l.push("calcHeight="+c.calcHeight.value),document.getElementById("calc_width")&&l.push("calcWidth="+c.calcWidth.value),document.getElementById("calc_depth")&&l.push("calcDepth="+c.calcDepth.value),document.getElementById("calc_radius")&&l.push("calcRadius="+c.calcRadius.value),document.getElementById("calc_unit")&&l.push("calcUnit="+c.calcUnit.value);var s=l.join("&")+"&"+p;if(redSHOP.triggerCustomEvents("redShopJsTrigger",{arguments:arguments}),"object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)s+="&"+key+"="+getExtraParamsArray[key];p=redSHOP.RSConfig._("AJAX_BASE_URL");p+=1==u||2==u?"&view=product&task=addtowishlist&wid=1&ajaxon=1":"&view=cart&task=add&ajax_cart_box=1",/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",p,!0):request.open("POST",p,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",s.length),request.setRequestHeader("Connection","close"),request.onreadystatechange=function(){if(request.readyState<4&&jQuery("#saveid, #allcart").html('<font size="1" color="red">Processing...</font>'),4==request.readyState){var e=request.responseText;if("0"==(e=e.split("`"))[1])return!1;document.attbox&&document.attbox.close(),d++;var t=mainpro_id.length;if(d<t)""!=mainpro_id[d]&&submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[d],mainpro_id[d],0,0,totatt[d],0,totcount_no_user_field[d]);else if(1==u)window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?wishlist=1&option=com_redshop&view=login";else{if(2==u)return!1;window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=cart"}jQuery("#saveid, #allcart").html(""),e[1]&&jQuery("#mod_cart_total").html(e[1]),e[2]&&jQuery("#rs_promote_free_shipping_div").html(e[2]),jQuery("#mod_cart_checkout_ajax").hide()}},request.send(s)}function addmywishlist(e,a,t){for(var r,d,i,o=document.getElementsByName("extrafields"+a+"[]"),u="",c="",l="",_="",p=!1,s=0;s<o.length;s++)if("checkbox"==o[s].type)r=redSHOP.filterExtraFieldName(o[s].id),""!=l&&l!=r&&""!=u&&(c+="&"+l+"="+u),l!=r&&(u="",l=r),o[s].checked&&(""!=u&&(u+=","),u+=o[s].value),s==o.length-1&&""!=u&&(c+="&"+r+"="+u),s<o.length-1&&"checkbox"!=o[s+1].type&&""!=u&&(c+="&"+r+"="+u);else if("radio"==o[s].type)d=redSHOP.filterExtraFieldName(o[s].id),""!=_&&_!=d&&0==p&&(c+="&"+_+"="+u),_!=d?(u="",_=d,p=!1,!o[s].checked&&1!=p||(p=!0,c+="&"+_+"="+o[s].value)):o[s].checked&&(p=!0,c+="&"+d+"="+o[s].value);else if("select-multiple"==o[s].type){for(var m=o[s],u="",y=redSHOP.filterExtraFieldName(o[s].id),g=0;g<m.options.length;g++)m.options[g].selected&&-1==u.search(String(m.options[g].value))&&(""!=u&&(u+=","),u+=String(m.options[g].value));u&&(c+="&"+y+"="+u)}else"hidden"==o[s].type?(imgfieldNamefrmId=redSHOP.filterExtraFieldName(o[s].id),c+="&"+imgfieldNamefrmId+"="+(u=o[s].value),u=""):("text"==o[s].type||-1!=o[s].id.search("ajax")&&(i=o[s].id.split("ajax"),v="",v=redSHOP.filterExtraFieldName(i[1]),o[s].id=v),c+="&"+o[s].id+"="+(u=o[s].value));var E=RedgetElementsByClassName("calendar"),v="";for(cal_i=0;cal_i<E.length;cal_i++){var I=E[cal_i].id;arr=I.split("_img"),n=arr.length;I=arr[0];""!=I&&I.search(a)&&""!=document.getElementById(I).value&&(c+="&"+(v=redSHOP.filterExtraFieldName(I))+"="+document.getElementById(I).value)}request=getHTTPObject();var f="&view=product&task=addtowishlist&json=1&ajaxon=1";f=(f=(f="&view=product&task=addtowishlist&json=1&ajaxon=1&Itemid="+t)+"&product_id="+a)+"&userfield_id="+o.length,f+=c;t=redSHOP.RSConfig._("AJAX_BASE_URL")+f;/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",t,!0):request.open("POST",t,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",f.length),request.setRequestHeader("Connection","close");request.onreadystatechange=function(){var e,t;request.readyState<4&&(document.getElementById("myprohide_"+a).innerHTML='<font size="1" color="red">Loading...</font>'),4==request.readyState&&200==request.status&&(request.responseText,e=document.getElementById("mypid").innerHTML,t=request.responseText,sp=t.split(":-:"),-1==e.search(sp[1])&&(document.getElementById("mypid").innerHTML+=sp[0],document.getElementById("wid").style.display="block",document.getElementById("myprohide_"+a).innerHTML=""))},request.send(f)}function getStocknotify(t,e,a,r){if(jQuery("#email_notify")){var d=jQuery("#email_notify").val();if(0==r&&!validateEmail(d))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_ENTER_VALID_EMAIL_ADDRESS")),!1}r=(r=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=addNotifystock&product_id="+t)+"&property_id="+e+"&subproperty_id="+a+"&email_not_login="+d;(request=getHTTPObject()).onreadystatechange=function(){var e;4==request.readyState&&(e=request.responseText,document.getElementById("notify_stock"+t)&&(document.getElementById("notify_stock"+t).innerHTML=e))},request.open("GET",r,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send()}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}