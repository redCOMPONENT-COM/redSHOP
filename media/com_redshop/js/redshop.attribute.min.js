redSHOP=window.redSHOP||{},redSHOP.setProductTax=function(e){e.id=e.id||0,e.price=e.price||0,e.userId=e.userId||0,e.taxExempt=e.taxExempt||!1,e.option="com_redshop",e.view="cart",e.task="cart.ajaxGetProductTax",e.tmpl="component",jQuery.ajax({url:redSHOP.RSConfig._("AJAX_BASE_URL"),type:"POST",async:!1,dataType:"json",data:e}).done(function(e){redSHOP.baseTax=e.tax})},redSHOP.filterExtraFieldName=function(e){return e=reverseString(e),reverseString(e.substr(e.indexOf("_")+1))},redSHOP.collectExtraFields=function(e,t){var a={name:e.id.replace("_"+t,""),value:jQuery(e).val()};switch(e.type){case"checkbox":a.name=redSHOP.filterExtraFieldName(e.id),a.value=jQuery("[id^="+e.id+"]:checked").val();break;case"radio":a.name=redSHOP.filterExtraFieldName(e.id),a.value=jQuery("[id^="+a.name+"]:checked").val()}return a},redSHOP.updateCartExtraFields=function(e,t,a){jQuery.each(e,function(e,r){var d=redSHOP.collectExtraFields(r,t);if("checkbox"==r.type){if(void 0!==d.value){var i=jQuery(a+" input[id="+d.name+"]").val();""==(i=i.replace(/(^,)|(,$)/g,""))?jQuery(a+" input[id="+d.name+"]").val(d.value):jQuery(a+" input[id="+d.name+"]").val(i+","+d.value)}}else jQuery(a+" input[id="+d.name+"]").val(d.value)})},redSHOP.updateAjaxCartExtraFields=function(e,t){var a=[];return jQuery.each(e,function(e,r){var d=redSHOP.collectExtraFields(r,t);a.push(d.name+"="+d.value)}),a},window.addEvent("domready",function(){preloadSlimbox({isenable:!0,mainImage:!0}),jQuery(".redcolorproductimg").click(function(e){e.preventDefault();var t=jQuery(this).attr("data-productid"),a=jQuery(this).attr("data-href");return""!=a&&void 0!==a||(a=jQuery(this).attr("href")),""!=t&&(a+="&product_id="+t,redBOX.open(a,{handler:"iframe",name:"wishlist-iframe"}),!0)}),redBOX.assign($$("a.redbox"),{parse:"rel"}),redSHOP.setProductTax({id:0,price:1})});var r_browser=!1,subproperty_main_image="",request;function getHTTPObject(){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e}function productaddprice(e,t){var a=1;if(prefix=0!=t?t:e,jQuery("[data-id=accessory_data]"))var r=jQuery("[data-id=accessory_data]").val();if(jQuery("[data-id=acc_quantity_data]"))var d=jQuery("[data-id=acc_quantity_data]").val();if(jQuery("[data-id=acc_attribute_data]"))var i=jQuery("[data-id=acc_attribute_data]").val().replace("##","::");if(jQuery("[data-id=acc_property_data]"))var n=jQuery("[data-id=acc_property_data]").val().replace("##","::");if(jQuery("[data-id=acc_subproperty_data]"))var o=jQuery("[data-id=acc_subproperty_data]").val().replace("##","::");if(document.getElementById("quantity"+prefix)&&document.getElementById("quantity"+prefix)&&(a=document.getElementById("quantity"+prefix).value),jQuery("[data-id=attribute_data]"))var u=jQuery("[data-id=attribute_data]").val().replace("##","::");if(jQuery("[data-id=property_data]"))var c=jQuery("[data-id=property_data]").val().replace("##","::");if(jQuery("[data-id=subproperty_data]"))var l=jQuery("[data-id=subproperty_data]").val().replace("##","::");var _=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displayProductaddprice&qunatity="+a;_=(_=_+"&product_id="+e+"&attribute_data="+u+"&property_data="+c+"&subproperty_data="+l)+"&accessory_data="+r+"&acc_quantity_data="+d+"&acc_attribute_data="+i+"&acc_property_data="+n+"&acc_subproperty_data="+o,(request=getHTTPObject()).onreadystatechange=function(){if(4==request.readyState){var t=request.responseText.split(":"),r=0,d=0;document.getElementById("wrapper_price")&&(r=parseFloat(document.getElementById("wrapper_price").value)),document.getElementById("wrapper_price_withoutvat")&&(d=parseFloat(document.getElementById("wrapper_price_withoutvat").value)),document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix).innerHTML=number_format(parseFloat(t[0])+r*a,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_discount_price"+prefix)&&(document.getElementById("display_product_discount_price"+prefix).innerHTML=number_format(t[4],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_without_vat"+prefix)&&(document.getElementById("display_product_price_without_vat"+prefix).innerHTML=number_format(parseFloat(t[5])+d*a,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_no_vat"+prefix)&&(document.getElementById("display_product_price_no_vat"+prefix).innerHTML=number_format(parseFloat(t[5])+d*a,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_old_price"+prefix)&&(document.getElementById("display_product_old_price"+prefix).innerHTML=number_format(t[2],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_saving_price"+prefix)&&(document.getElementById("display_product_saving_price"+prefix).innerHTML=number_format(t[3],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("main_price"+prefix)&&(document.getElementById("main_price"+prefix).value=t[0]),document.getElementById("product_price_no_vat"+prefix)&&(document.getElementById("product_price_no_vat"+prefix).value=t[5],document.getElementById("main_price"+e)&&(document.getElementById("main_price"+e).value=t[0]),document.getElementById("product_price_no_vat"+e)&&(document.getElementById("product_price_no_vat"+e).value=t[5]),document.getElementById("product_old_price"+e)&&(document.getElementById("product_old_price"+e).value=t[2])),document.getElementById("product_old_price"+prefix)&&(document.getElementById("product_old_price"+prefix).value=t[2])}},request.open("GET",_,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function changePropertyDropdown(product_id,accessory_id,relatedprd_id,attribute_id,selectedproperty_id,mpw_thumb,mph_thumb){var allarg=arguments,propArr=[],subpropArr=[],property_data="",subproperty_data="",suburl="",subatthtml="",layout="",prefix;document.getElementById("isAjaxBoxOpen")&&(layout=document.getElementById("isAjaxBoxOpen").value);var preprefix="";"viewajaxdetail"==layout&&(preprefix="ajax_"),prefix=0!=accessory_id?preprefix+"acc_":0!=relatedprd_id?preprefix+"rel_":preprefix+"prd_";var commonid=prefix+product_id+"_"+accessory_id+"_"+attribute_id;if(document.getElementById("subattdata_"+commonid)&&(subatthtml=document.getElementById("subattdata_"+commonid).value),suburl=suburl+"&subatthtml="+subatthtml,suburl=suburl+"&product_id="+product_id,suburl=suburl+"&attribute_id="+attribute_id,suburl=suburl+"&accessory_id="+accessory_id,suburl=suburl+"&relatedprd_id="+relatedprd_id,document.getElementsByName("property_id_"+commonid+"[]")){for(var propName=document.getElementsByName("property_id_"+commonid+"[]"),sel_i=0,p=0;p<propName.length;p++)"checkbox"==propName[p].type||"radio"==propName[p].type?propName[p].checked&&(propArr[sel_i++]=propName[p].value):propName[p].selectedIndex&&(propArr[sel_i++]=propName[p].options[propName[p].selectedIndex].value);for(var subsel_i=0,sp=0;sp<propArr.length;sp++){var spCommonName='[name="subproperty_id_'+commonid+"_"+propArr[sp]+'[]"]';jQuery(spCommonName).length&&("radio"==jQuery(spCommonName).attr("type")||"checkbox"==jQuery(spCommonName).attr("type")?subpropArr.push(jQuery(spCommonName+":checked").val()):subpropArr.push(jQuery(spCommonName).val()))}property_data=propArr.join(","),subproperty_data=subpropArr.join(","),suburl=suburl+"&property_id="+property_data,suburl=suburl+"&subproperty_id="+subproperty_data}var url=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displaySubProperty&isAjaxBox="+layout;url+=suburl,request=getHTTPObject(),request.onreadystatechange=function(){if(document.getElementById("property_responce"+commonid)&&(document.getElementById("property_responce"+commonid).style.display="none"),4!=request.readyState&&document.getElementById("rs_image_loader")&&(document.getElementById("rs_image_loader").style.display="block"),4==request.readyState){var property_id=propArr.length>0?propArr[0]:0,withoutVAT=!1;if(document.getElementById("property_responce"+commonid)&&(document.getElementById("property_responce"+commonid).innerHTML=request.responseText,document.getElementById("property_responce"+commonid).style.display="",-1!=request.responseText.indexOf("{without_vat}")&&(withoutVAT=!0),eval(jQuery(request.responseText).find("script").text())),displayAdditionalImage(product_id,accessory_id,relatedprd_id,property_id,0,withoutVAT),calculateTotalPrice(product_id,relatedprd_id,withoutVAT),jQuery('select:not(".disableBootstrapChosen")').select2(),redSHOP.onChangePropertyDropdown.length>0)for(var g=0,n=redSHOP.onChangePropertyDropdown.length;g<n;g++)new redSHOP.onChangePropertyDropdown[g](allarg,propArr)}},request.open("GET",url,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function display_image(e,t,a){redSHOP.RSConfig._("PRODUCT_DETAIL_IS_LIGHTBOX")||(document.getElementById("a_main_image"+t).href=a),document.getElementById("main_image"+t).src=e}function display_image_out(e,t,a){document.getElementById("main_image"+t).src=a}function display_image_add(e,t){document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=e)}function display_image_add_out(e,t){document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=""!=subproperty_main_image?subproperty_main_image:e)}function collectAttributes(e,t,a,r){var d,i=[],n=[],o=[],u=0,c=0,l=0,_=!0,p="",s="",m=jQuery("#isAjaxBoxOpen").val(),y=jQuery("#product_preorder"+e).val(),g=jQuery("#product_stock"+e).val(),E=jQuery("#preorder_product_stock"+e).val(),v="";jQuery("#accquantity_"+e+"_"+t).length&&jQuery("#accquantity_"+e+"_"+t).val(),"viewajaxdetail"==m&&(v="ajax_"),0!=t?(d=v+"acc_",u=parseFloat(jQuery("#accessory_id_"+e+"_"+t).attr("accessoryprice")),c=parseFloat(jQuery("#accessory_id_"+e+"_"+t).attr("accessorywithoutvatprice")),l=u):(d=0!=a?v+"rel_":v+"prd_",u=parseFloat(jQuery("#main_price"+e).val()),l=parseFloat(jQuery("#product_old_price"+e).val()),jQuery("#product_price_excluding_price"+e).length?c=parseFloat(jQuery("#product_price_excluding_price"+e).val()):jQuery("#product_price_no_vat"+e).length&&(c=parseFloat(jQuery("#product_price_no_vat"+e).val())));var f=d+e+"_"+t,I=d+e;_&&(_=checkProductStockRoom(g,I,y,E));var S=jQuery('[name="attribute_id_'+f+'[]"]');S.length<=0&&1==redSHOP.RSConfig._("AJAX_CART_BOX")&&(p=jQuery("#requiedAttribute").val(),s=jQuery("#requiedProperty").val()),S.each(function(a,r){var u=r.value;f=d+e+"_"+t+"_"+u,i.push(u);var m=jQuery('[name="property_id_'+f+'[]"]');if(m.length){setPropertyImage(e,"property_id_"+f);var g=[],E=[];m.each(function(e,t){"checkbox"==t.type||"radio"==t.type?(t.checked&&0!=t.value&&E.push(t.value),t.required&&(g=[t.getAttribute("attribute_name")])):(t.selectedIndex&&0!=t.options[t.selectedIndex].value&&E.push(t.options[t.selectedIndex].value),t.required&&g.push(t.getAttribute("attribute_name")))}),E.length&&n.push(E.join(",,")),g.length&&!E.length&&(p+=Joomla.JText._("COM_REDSHOP_ATTRIBUTE_IS_REQUIRED")+" "+unescape(g.join("<br>"))+"\n");var v="property_id_"+f+"_oprand",S="property_id_"+f+"_proprice_withoutvat";priceOldElementId="property_id_"+f+"_prooldprice",l=calculateSingleProductPrice(l,v,priceOldElementId,E),c=calculateSingleProductPrice(c,v,S,E);var h=[];E.each(function(a){var r="property_id_"+f+"_stock"+a,i="property_id_"+f+"_preorderstock"+a;jQuery("#"+r).length>0&&jQuery("#"+i).length>0&&_&&0==t&&(_=checkProductStockRoom(jQuery("#"+r).val(),I,y,jQuery("#"+i).val()));var n=d+e+"_"+t+"_"+u+"_"+a,p='[name="subproperty_id_'+n+'[]"]';if(jQuery(p).length){setSubpropertyImage(e,"subproperty_id_"+n),!0;var m=[];"radio"==jQuery(p).attr("type")||"checkbox"==jQuery(p).attr("type")?m.push(jQuery(p+":checked").val()):m.push(jQuery(p).val()),m.each(function(e){var a="#subproperty_id_"+n+"_stock"+e,r="#subproperty_id_"+n+"_preOrderStock"+e;1==redSHOP.RSConfig._("USE_STOCKROOM")&&jQuery(a).length&&0==t&&(_=checkProductStockRoom(jQuery(a).val(),I,y,jQuery(r).val()))}),1==jQuery(p).attr("required")&&m.length&&(s+=jQuery("#subprop_lbl").html()+" "+unescape(jQuery(p).attr("subpropName"))+"\n");var g="subproperty_id_"+n+"_oprand",E="subproperty_id_"+n+"_proprice_withoutvat";priceOldElementId="subproperty_id_"+n+"_prooldprice",l=calculateSingleProductPrice(l,g,priceOldElementId,m),c=calculateSingleProductPrice(c,g,E,m),h.push(m.join("::"))}o.push(h.join(",,"))})}}),(u=c)>0&&(0==r||null==r)&&(u*=1+redSHOP.RSConfig._("BASE_TAX")),0==n.length&&(i=[]),0!=t?(jQuery("[data-id=acc_attribute_data]").val(i.join("##")),jQuery("[data-id=acc_property_data]").val(n.join("##")),jQuery("[data-id=acc_subproperty_data]").val(o.join("##")),jQuery("[data-id=accessory_price]").val(u),jQuery("[data-id=accessory_price_withoutvat]").val(c)):(jQuery("[data-id=attribute_data]").val(i.join("##")),jQuery("[data-id=property_data]").val(n.join("##")),jQuery("[data-id=subproperty_data]").val(o.join("##")),jQuery("[data-id=tmp_product_price]").val(u),jQuery("[data-id=productprice_notvat]").val(c),jQuery("[data-id=tmp_product_old_price]").val(l)),jQuery("[data-id=requiedAttribute]").val(p),jQuery("[data-id=requiedProperty]").val(s)}function checkProductStockRoom(e,t,a,r){var d="instock";return e>0?d=1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"instock":0==e&&(d="global"==a&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||""==a&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||"no"==a?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"instock":"outofstock":0==r?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"preorder":"outofstock":1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"preorder"),redSHOP.updateStockStatusMessage(d,t),"instock"==d}function calculateSingleProductPrice(e,t,a,r){e=parseFloat(e);for(var d=0;d<r.length&&0!=r[d];d++){var i=r[d],n=jQuery("#"+t+i).val(),o=parseFloat(jQuery("#"+a+i).val());if("-"==n)e-=o;else if("+"==n)e+=o;else if("*"==n)e*=o;else if("/"==n)e/=o;else if("="==n){e=o,!1;break}}return e}function calculateTotalPrice(e,t,a){if(redSHOP.setProductTax({id:e,price:1}),0==e||""==e)return!1;var r=0,d=0,i=0,n=0,o=0,u=parseFloat(collectAccessory(e,t)),c=0!=t?t:e,l=0,_=0;collectAttributes(e,0,t,a),jQuery("[data-id=tmp_product_old_price]")&&(o=parseFloat(jQuery("[data-id=tmp_product_old_price]").val())),jQuery("[data-id=accessory_price_withoutvat]").length&&(n=parseFloat(jQuery("[data-id=accessory_price_withoutvat]").val())),jQuery("#quantity"+c).length&&jQuery("#quantity"+c).val(),jQuery("[data-id=tmp_product_price]").length&&(r=parseFloat(jQuery("[data-id=tmp_product_price]").val())),jQuery("#hidden_subscription_prize").length&&(r+=parseFloat(jQuery("#hidden_subscription_prize").val())),jQuery("[data-id=productprice_notvat]").length&&(d=parseFloat(jQuery("[data-id=productprice_notvat]").val())),jQuery("[data-id=tmp_product_old_price]").length&&(i=parseFloat(jQuery("[data-id=tmp_product_old_price]").val())),setWrapperComboBox(),jQuery("#wrapper_price").length&&(l=parseFloat(jQuery("#wrapper_price").val())),jQuery("#wrapper_price_withoutvat").length&&(_=parseFloat(jQuery("#wrapper_price_withoutvat").val())),final_price_f=r+u+l,product_price_without_vat=d+n+_,o=i+u+l,savingprice=parseFloat(o)-parseFloat(final_price_f),"1"==redSHOP.RSConfig._("SHOW_PRICE")?!final_price_f||"1"==redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&"1"!=redSHOP.RSConfig._("SHOW_QUOTATION_PRICE")?(final_price=getPriceReplacement(final_price_f),final_price_novat=getPriceReplacement(product_price_without_vat)):(final_price=number_format(final_price_f,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),final_price_novat=number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))):(final_price=getPriceReplacement(final_price_f),final_price_novat=getPriceReplacement(product_price_without_vat)),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))&&("1"==redSHOP.RSConfig._("SHOW_PRICE_WITHOUT_VAT")?(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price_novat),jQuery("#display_product_discount_price"+e).html(final_price_novat)):(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price),jQuery("#display_product_discount_price"+e).html(final_price)),product_price_without_vat?product_price_without_vat=number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):product_price_without_vat=getPriceReplacement(product_price_without_vat),jQuery("#display_product_price_without_vat"+e).html(product_price_without_vat),jQuery("#display_product_price_no_vat"+e).html(product_price_without_vat),jQuery("#display_product_old_price"+e).length&&(o=o?number_format(o,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):getPriceReplacement(o),jQuery("#display_product_old_price"+e).html(o)),jQuery("#display_product_saving_price"+e).length&&(savingprice=number_format(savingprice,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),jQuery("#display_product_saving_price"+e).html(savingprice)),jQuery("#rs_selected_accessory_price").html(final_price))}function collectAccessory(e,t){if(0==e||""==e)return!1;var a="",r="",d=0,i=0,n=0,o=0,u=0,c=[],l=[],_=[],p=[],s=[];if(document.getElementById("isAjaxBoxOpen")&&(a=document.getElementById("isAjaxBoxOpen").value),"viewajaxdetail"==a&&(r="ajax_"),document.getElementsByName("accessory_id_"+r+e+"[]")){if(dcatt=document.getElementsByName("accessory_id_"+r+e+"[]"),document.getElementById("giftcard_id")&&document.getElementById("giftcard_id").value>0&&0==dcatt.length)return!0;var m=dcatt.length;for(j=0;j<m;j++){var y,g=0,E=0,v=dcatt[j].value,f=r+e+"_"+v;acc_chk=document.getElementById("accessory_id_"+f),document.getElementById("attribute_id_"+f)&&document.getElementById("attribute_id_"+f),y=dcatt[j].checked;var I=1;qid=0!=t?t:e,I=document.getElementById("accquantity_"+f)?document.getElementById("accquantity_"+f).value:document.getElementById("quantity"+qid)&&"select-one"==document.getElementById("quantity"+qid).type?document.getElementById("quantity"+qid).value:1,y?(c[u]=v,l[u]=I,collectAttributes(e,v,t),jQuery("[data-id=accessory_price]")&&(g=parseFloat(jQuery("[data-id=accessory_price]").val())),jQuery("[data-id=accessory_price_withoutvat]")&&(E=parseFloat(jQuery("[data-id=accessory_price_withoutvat]").val())),jQuery("[data-id=acc_attribute_data]")&&(_[u]=jQuery("[data-id=acc_attribute_data]").val()),jQuery("[data-id=acc_property_data]")&&(p[u]=jQuery("[data-id=acc_property_data]").val()),jQuery("[data-id=acc_subproperty_data]")&&(s[u]=jQuery("[data-id=acc_subproperty_data]").val()),document.getElementById("divaccstatus"+f)&&(document.getElementById("divaccstatus"+f).className="accessorystatus added"),u++):document.getElementById("divaccstatus"+f)&&(document.getElementById("divaccstatus"+f).className="accessorystatus"),i+=parseFloat(g)*I,n+=parseFloat(E)*I}d+=parseFloat(i),o+=parseFloat(n),jQuery("[data-id=accessory_data]")&&jQuery("[data-id=accessory_data]").val(c.join("@@")),jQuery("[data-id=acc_quantity_data]")&&jQuery("[data-id=acc_quantity_data]").val(l.join("@@")),jQuery("[data-id=acc_attribute_data]")&&jQuery("[data-id=acc_attribute_data]").val(_.join("@@")),jQuery("[data-id=acc_property_data]")&&jQuery("[data-id=acc_property_data]").val(p.join("@@")),jQuery("[data-id=acc_subproperty_data]")&&jQuery("[data-id=acc_subproperty_data]").val(s.join("@@")),jQuery("[data-id=accessory_price]")&&jQuery("[data-id=accessory_price]").val(d),jQuery("[data-id=accessory_price_withoutvat]")&&jQuery("[data-id=accessory_price_withoutvat]").val(o)}return d}function number_format(e,t,a,r){var d=e,i=t;d*=redSHOP.RSConfig._("CURRENCY_CONVERT");var n=function(e,t){var a=Math.pow(10,t);return(Math.round(e*a)/a).toString()};d=isFinite(+d)?+d:0;var o,u,c=void 0===r?",":r,l=void 0===a?".":a,_=n((i=isFinite(+i)?Math.abs(i):0)>0?d:Math.round(d),i),p=n(Math.abs(d),i);p>=1e3?(u=(o=p.split(/\D/))[0].length%3||3,o[0]=_.slice(0,u+(d<0))+o[0].slice(u).replace(/(\d{3})/g,c+"$1"),_=o.join(l)):_=_.replace(".",l);var s=_.indexOf(l);i>=1&&-1!==s&&_.length-s-1<i?_+=new Array(i-(_.length-s-1)).join(0)+"0":i>=1&&-1===s&&(_+=l+new Array(i).join(0)+"0");return"front"==redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION")?redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+_:"behind"==redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION")?_+redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT"):"none"==redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION")?_:redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+_}function getPriceReplacement(e){var t="";return"0"==redSHOP.RSConfig._("SHOW_PRICE")&&(url=redSHOP.RSConfig._("PRICE_REPLACE_URL"),""==url&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("PRICE_REPLACE")+"</a>"),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&0==e&&(url=redSHOP.RSConfig._("ZERO_PRICE_REPLACE_URL"),""==url&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("ZERO_PRICE_REPLACE")+"</a>",null===url&&null===redSHOP.RSConfig._("ZERO_PRICE_REPLACE"))?"":t}function setWrapper(e,t,a,r){document.getElementById("wrapper_id")&&(document.getElementById("wrapper_id").value=e),jQuery("[data-id=sel_wrapper_id]")&&jQuery("[data-id=sel_wrapper_id]").val(e),document.getElementById("wrapper_price").value=t,document.getElementById("wrapper_price_withoutvat").value=a,calculateTotalPrice(r,0)}function setPropImage(e,t,a){var r=document.getElementById(t+"_"+a);if(r||(r=document.getElementById(t)),r)if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){d[i].value==a&&(d[i].checked=!0)}else for(i=0;i<r.options.length;i++){r.options[i].value==a&&(r.options[i].selected=!0)}}function setSubpropImage(e,t,a){var r=document.getElementById(t+"_"+a);if(r||(r=document.getElementById(t)),r)if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){d[i].value;d[i].value==a&&(d[i].checked=!0)}else for(i=0;i<r.options.length;i++){r.options[i].value;r.options[i].value==a&&(r.options[i].selected=!0)}}function setPropertyImage(e,t){var a=0,r=document.getElementById(t);if(r)if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){var n="";a=d[i].value,d[i].checked&&(n="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=n)}else for(i=0;i<r.length;i++){n="";a=r[i].value,r[r.selectedIndex].value==a&&(n="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=n)}else for(d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){n="";a=d[i].value,d[i].checked&&(n="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=n)}}function setSubpropertyImage(e,t,a){a=0;var r=document.getElementById(t);if(r)if("checkbox"==r.type||"radio"==r.type)for(var d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){var n="";a=d[i].value,d[i].checked&&(n="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=n)}else for(i=0;i<r.length;i++){n="";a=r[i].value,r[r.selectedIndex].value==a&&(n="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=n)}else for(d=document.getElementsByName(t+"[]"),i=0;i<d.length;i++){n="";a=d[i].value,d[i].checked&&(n="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=n)}}function displayAdditionalImage(e,t,a,r,d,i){var n=arguments,o="&product_id="+e;o=(o=(o=(o=o+"&accessory_id="+t)+"&relatedprd_id="+a)+"&property_id="+r)+"&subproperty_id="+d;if(0!=t?(prefix="acc_",e=t):prefix=0!=a?"rel_":"prd_",collectAttributes(e,0,a,i),jQuery("[data-id=property_data]")){var u=jQuery("[data-id=property_data]").val();o=o+"&property_data="+encodeURIComponent(u)}if(jQuery("[data-id=subproperty_data]")){var c=jQuery("[data-id=subproperty_data]").val();o=o+"&subproperty_data="+encodeURIComponent(c)}document.getElementById(prefix+"main_imgwidth")&&(o=o+"&main_imgwidth="+parseInt(document.getElementById(prefix+"main_imgwidth").value)),document.getElementById(prefix+"main_imgheight")&&(o=o+"&main_imgheight="+parseInt(document.getElementById(prefix+"main_imgheight").value));var l=0;if(document.getElementById("a_main_image"+e)||document.getElementById("main_image"+e)){var _,p="";if(document.getElementById("a_main_image"+e))void 0!==(_=document.getElementById("a_main_image"+e).href)&&(p=(_=_.split("")).reverse(),_=(p=p.join("")).split("."),p=(p=(_=_[0].split("")).reverse()).join(""));else void 0!==(_=document.getElementById("main_image"+e).src)&&(p=(_=_.split("")).reverse(),_=(p=p.join("")).split("."),p=(p=(p=(p=(_=_[0].split("")).reverse()).join("")).split("&"))[0]);"jpg"!=(p=p.toLowerCase())&&"jpeg"!=p&&"png"!=p&&"gif"!=p&&"bmp"!=p||(l=1)}var s=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displayAdditionImage&redview="+redSHOP.RSConfig._("REDSHOP_VIEW")+"&redlayout="+redSHOP.RSConfig._("REDSHOP_LAYOUT");s+=o,jQuery(redSHOP).trigger("onBeforeAjaxdisplayAdditionalImage",[s,e,n]),(request=getHTTPObject()).onreadystatechange=function(){if(4==request.readyState){var t=request.responseText.split("`_`");""!=t[9]&&document.getElementById("product_number_variable"+e)&&(document.getElementById("product_number_variable"+e).innerHTML=t[9]),subproperty_main_image=t[4],document.getElementById("a_main_image"+e)&&(""!=t[2]&&1==l&&(document.getElementById("a_main_image"+e).href=t[2]),""!=t[3]&&(document.getElementById("a_main_image"+e).title=t[3])),document.getElementById("main_image"+e)&&(document.getElementById("main_image"+e).src=t[4]),document.getElementsByClassName("product_more_videos")[0]&&(document.getElementsByClassName("product_more_videos")[0].innerHTML=t[16]),document.getElementById("additional_images"+e)&&""!=t[1]&&(document.getElementById("additional_images"+e).innerHTML=t[1]),document.getElementById("hidden_attribute_cartimage"+e)&&(document.getElementById("hidden_attribute_cartimage"+e).value=t[12]),document.getElementById("stockImage"+e)&&""!=t[5]&&(document.getElementById("stockImage"+e).src=t[5]),document.getElementById("stockImageTooltip"+e)&&""!=t[6]&&(document.getElementById("stockImageTooltip"+e).innerHTML=t[6]),document.getElementById("displayProductInStock"+e)&&""!=t[10]&&(document.getElementById("displayProductInStock"+e).innerHTML=t[10]),document.getElementById("ProductAttributeMinDelivery"+e)&&""!=t[7]&&(document.getElementById("ProductAttributeMinDelivery"+e).innerHTML=t[7]),document.getElementById("stock_status_div"+e)&&""!=t[11]&&(document.getElementById("stock_status_div"+e).innerHTML=t[11]),document.getElementById("notify_stock"+e)&&(document.getElementById("notify_stock"+e).innerHTML=t[13]),document.getElementById("stock_availability_date_lbl"+e)&&(document.getElementById("stock_availability_date_lbl"+e).innerHTML=t[14]),document.getElementById("stock_availability_date"+e)&&(document.getElementById("stock_availability_date"+e).innerHTML=t[15]);preloadSlimbox({isenable:!0,mainImage:!1}),jQuery(redSHOP).trigger("onAfterAjaxdisplayAdditionalImage",[t,e,n])}},request.open("GET",s,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function preloadSlimbox(e){if(e.isenable){var t={handler:"image"};redBOX.initialize({}),e.mainImage?redBOX.assign($$("a[rel='myallimg']"),t):(redBOX.assign($$(".additional_image > a[rel='myallimg']"),t),redBOX.assign($$("[id^='additional_vids_'] > a.modal"),{handler:"iframe",size:{x:800,y:500}}))}}function setWrapperComboBox(){if(document.getElementById("wrapper_id")&&jQuery("[data-id=sel_wrapper_id]").length){var e=document.getElementById("wrapper_id").value;jQuery("[data-id=sel_wrapper_id]").val(e)}var t=document.getElementsByName("w_price"),a=0;jQuery("[data-id=sel_wrapper_id]").length&&(a=jQuery("[data-id=sel_wrapper_id]").val());var r=0,d=0;for(document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&0!=a&&(r=document.getElementById("w_price"+a).value,d=document.getElementById("w_price_withoutvat"+a).value),document.getElementById("wrapper_price")&&(document.getElementById("wrapper_price").value=r),document.getElementById("wrapper_price_withoutvat")&&(document.getElementById("wrapper_price_withoutvat").value=d),i=0;i<t.length;i++){var n=t[i].id.substr(7);document.getElementById("wrappertd"+n)&&(n==a?(document.getElementById("wrappertd"+n).style.border="1px solid",document.getElementById("wrappertd"+n).style.padding="7px"):(document.getElementById("wrappertd"+n).style.border="",document.getElementById("wrappertd"+n).style.padding=""))}}function discountCalculation(e){var t=0,a=0,r=0,d=0,i="cm",n="",o=0,u=0,c="",l=0;if(document.getElementById("calc_height")&&""==(t=document.getElementById("calc_height").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;if(document.getElementById("calc_width")&&""==(a=document.getElementById("calc_width").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;if(document.getElementById("calc_depth")&&""==(r=document.getElementById("calc_depth").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;if(document.getElementById("calc_radius")&&""==(d=document.getElementById("calc_radius").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;if(document.getElementById("discount_calc_unit")&&0==(i=document.getElementById("discount_calc_unit").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;document.getElementById("calc_unit")&&document.getElementById("calc_unit").value;var _=[];if(document.getElementsByName("pdc_option_name[]"))for(var p=document.getElementsByName("pdc_option_name[]"),s=0,m=0;m<p.length;m++){var y=p[m];y.checked&&(_[s]=y.value,s++)}_=_.join(","),http=getHTTPObject(),null!=http?(http.onreadystatechange=function(){if(4==http.readyState){var t=http.responseText;if("fail"==(t=t.replace(/^\s+|\s+$/g,"")))return alert(Joomla.JText._("COM_REDSHOP_NOT_AVAILABLE")),!1;t=t.split("\n");for(var a=document.getElementsByName("quantity"),r=1,d=0;d<a.length;d++)a[d].id=="ajax_quantity"+e?r=a[d].value:a[d].id=="quantity"+e&&(r=a[d].value);n=t[0],o=t[1],u=t[2],price_excl_vat=t[7];var i=number_format(o,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),_=number_format(u,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));r<=0&&(r=1);var p=number_format(l=parseFloat(u)*r,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));if(c=t[3]+n+"<br />",c+=t[4]+i+"<br />",c+=t[5]+_+"<br />",c+=t[6]+p,document.getElementById("discount_cal_final_price")&&(document.getElementById("discount_cal_final_price").innerHTML=c),document.getElementById("main_price"+e)){var s=document.getElementById("main_price"+e).value;if("1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))){var m=parseFloat(s)+parseFloat(l);if(1==t[8])var y=l+price_excl_vat*r;else y=l*r;p=number_format(m,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),formatted_product_price_excl_vat=number_format(y,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),document.getElementById("produkt_kasse_hoejre_pris_indre"+e)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+e).innerHTML=formatted_product_price_excl_vat,document.getElementById("display_product_price_no_vat"+e)&&(document.getElementById("display_product_price_no_vat"+e).innerHTML=p),document.getElementById("product_price_no_vat"+e)&&(document.getElementById("product_price_no_vat"+e).value=m)),document.getElementById("product_price_incl_vat"+e)&&(document.getElementById("product_price_incl_vat"+e).innerHTML=formatted_product_price_excl_vat),document.getElementById("main_price"+e).value=y}calculateTotalPrice(e,0)}}},http.open("GET",redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=cart&task=discountCalculator&product_id="+e+"&calcHeight="+t+"&calcWidth="+a+"&calcDepth="+r+"&calcRadius="+d+"&calcUnit="+i+"&pdcextraid="+_,!0),http.setRequestHeader("X-Requested-With","XMLHttpRequest"),http.send(null)):alert("Your browser does not support XMLHTTP!")}function setProductUserFieldImage(e,t,a,r){for(var d=document.getElementsByClassName("imgClass_"+t),i=0;i<d.length;i++)removeClass(d[i],"selectedimg");document.getElementById(e+"_"+t)&&(document.getElementById(e+"_"+t).value=a,r.className+=" selectedimg"),document.getElementById("ajax"+e+"_"+t)&&(document.getElementById("ajax"+e+"_"+t).value=a),document.getElementById(e)&&(document.getElementById(e).value=a)}function removeClass(e,t){if(hasClass(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}}function hasClass(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function RedgetElementsByClassName(e){var t=[],a=document.all?document.all:document.getElementsByTagName("*");for(i=0,j=0;i<a.length;i++)a[i].className==e&&(t[j]=a[i],j++);return t}function getElementsByClassName(e){var t=[],a=document.all?document.all:document.getElementsByTagName("*");for(i=0,j=0;i<a.length;i++)a[i].className==e&&(t[j]=a[i],j++);return t}function displayAddtocartForm(e,t,a,r,d){return 0!=t&&""!=t&&(redSHOP.updateCartExtraFields(jQuery("#"+d+" [name^=extrafields]"),t,"#"+e),jQuery("[data-id=requiedAttribute]").val(jQuery("#"+e+" [name=requiedAttribute]").attr("reattribute")),jQuery("[data-id=requiedProperty]").val(jQuery("#"+e+" [name=requiedProperty]").attr("reproperty")),0==r&&calculateTotalPrice(t,a),!!setAddtocartForm(e,t))}function setAddtocartForm(e,t){var a=document.getElementById(e);jQuery("[data-id=Itemid]")&&(a.elements.Itemid.value=jQuery("[data-id=Itemid]").val()),jQuery("[data-id=attribute_data]")&&(a.elements.attribute_data.value=jQuery("[data-id=attribute_data]").val()),jQuery("[data-id=property_data]")&&(a.elements.property_data.value=jQuery("[data-id=property_data]").val()),jQuery("[data-id=subproperty_data]")&&(a.elements.subproperty_data.value=jQuery("[data-id=subproperty_data]").val()),jQuery("[data-id=accessory_data]")&&(a.elements.accessory_data.value=jQuery("[data-id=accessory_data]").val()),jQuery("[data-id=acc_quantity_data]")&&(a.elements.acc_quantity_data.value=jQuery("[data-id=acc_quantity_data]").val()),jQuery("[data-id=acc_attribute_data]")&&(a.elements.acc_attribute_data.value=jQuery("[data-id=acc_attribute_data]").val()),jQuery("[data-id=acc_property_data]")&&(a.elements.acc_property_data.value=jQuery("[data-id=acc_property_data]").val()),jQuery("[data-id=acc_subproperty_data]")&&(a.elements.acc_subproperty_data.value=jQuery("[data-id=acc_subproperty_data]").val()),jQuery("[data-id=accessory_price]")&&(a.elements.accessory_price.value=jQuery("[data-id=accessory_price]").val()),jQuery("[data-id=requiedAttribute]")&&(a.elements.requiedAttribute.value=jQuery("[data-id=requiedAttribute]").val()),jQuery("[data-id=requiedProperty]")&&(a.elements.requiedProperty.value=jQuery("[data-id=requiedProperty]").val());var r=1;if(a.quantity.value&&(r=a.quantity.value),document.getElementById("hidden_attribute_cartimage"+t)&&(a.hidden_attribute_cartimage.value=document.getElementById("hidden_attribute_cartimage"+t).value),0!=parseInt(a.min_quantity.value)&&parseInt(a.min_quantity.value)>r)return alert(a.min_quantity.getAttribute("requiredtext")+" "+parseInt(a.min_quantity.value)),!1;if(0!=parseInt(a.max_quantity.value)&&parseInt(a.max_quantity.value)<r)return alert(a.max_quantity.getAttribute("requiredtext")+" "+parseInt(a.max_quantity.value)),!1;if(document.getElementById("calc_height")){var d=document.getElementById("calc_height").value;if(""==d)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;a.calcHeight.value=d}if(document.getElementById("calc_width")){var i=document.getElementById("calc_width").value;if(""==i)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;a.calcWidth.value=i}if(document.getElementById("calc_depth")){var n=document.getElementById("calc_depth").value;if(""==n)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;a.calcDepth.value=n}if(document.getElementById("calc_radius")){var o=document.getElementById("calc_radius").value;if(""==o)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;a.calcRadius.value=o}if(document.getElementById("discount_calc_unit")){if(calUnit=document.getElementById("discount_calc_unit").value,0==calUnit)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;a.calcUnit.value=calUnit}var u=[];if(document.getElementsByName("pdc_option_name[]"))for(var c=document.getElementsByName("pdc_option_name[]"),l=0,_=0;_<c.length;_++){var p=c[_];p.checked&&(u[l]=p.value,l++)}if(u=u.join(","),a.pdcextraid.value=u,document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;a.subscription_id.value=subId}return!0}redSHOP.onChangePropertyDropdown=[],redSHOP.updateStockStatusMessage=function(e,t){var a="inline-block",r="inline-block",d="inline-block",i="inline-block",n="";"instock"==e?(a="inline-block",i="inline-block",r="none",d="none",n=Joomla.JText._("COM_REDSHOP_AVAILABLE_STOCK")):(a="none",i="none","preorder"==e?(r="none",d="inline-block",n=Joomla.JText._("COM_REDSHOP_PREORDER_PRODUCT_OUTOFSTOCK_MESSAGE")):(r="inline-block",d="none",n=Joomla.JText._("COM_REDSHOP_PRODUCT_OUTOFSTOCK_MESSAGE"))),document.getElementById("pdaddtocart"+t)&&(document.getElementById("pdaddtocart"+t).style.display=a),jQuery("[data-id=stockaddtocart"+t+"]")&&jQuery("[data-id=stockaddtocart"+t+"]").attr("style","display:"+r),document.getElementById("stockaddtocart"+t)&&(document.getElementById("stockaddtocart"+t).innerHTML=n),document.getElementById("preordercart"+t)&&(document.getElementById("preordercart"+t).style.display=d),document.getElementById("stockQuantity"+t)&&(document.getElementById("stockQuantity"+t).style.display=i)};var redShopAddtocartValidationJsTrigger=[];function checkAddtocartValidation(e,t,a,r,d,i,n,o){if(0==t||""==t)return!1;if(0==redSHOP.RSConfig._("AJAX_CART_BOX")){if(!userfieldValidation("extrafields"+t))return!1;var u=document.getElementById(e).requiedAttribute.value,c=document.getElementById(e).requiedProperty.value;if(""!=u)return alert(u),!1;if(""!=c)return alert(c),!1;if(redShopAddtocartValidationJsTrigger.length>0)for(var l=0,_=redShopAddtocartValidationJsTrigger.length;l<_;l++)if(0==redShopAddtocartValidationJsTrigger[l](arguments))return!1;document.getElementById(e).submit()}else{var p=parseInt(i)+parseInt(n)+parseInt(o);if(0!=r)submitAjaxCartdetail(e,t,a,r,i,n,o);else{var s=!0;if(userfieldValidation("extrafields"+t)||(s=!1),""!=(u=document.getElementById(e).requiedAttribute.value)&&(s=!1),""!=(c=document.getElementById(e).requiedProperty.value)&&(s=!1),redShopAddtocartValidationJsTrigger.length>0)for(l=0,_=redShopAddtocartValidationJsTrigger.length;l<_;l++)if(0==redShopAddtocartValidationJsTrigger[l](arguments))return;p>0&&0==s?displayAjaxCartdetail(e,t,a,r,i,n,o):submitAjaxCartdetail(e,t,a,r,i,n,o)}}}function displayAjaxCartdetail(e,t,a,r,d,o,u){if(0==t||""==t)return!1;var c="";document.getElementById("isAjaxBoxOpen")&&(c=document.getElementById("isAjaxBoxOpen").value);document.getElementById(e);for(var l=document.getElementsByName("extrafields"+t+"[]"),_="",p="",s="",m=!1,y="",g="",E=!1,v="",f="",I=0;I<l.length;I++)if(l[I].value||"text"!=l[I].type)if(l[I].value||"select-one"!=l[I].type)if(l[I].value||"hidden"!=l[I].type){if("checkbox"==l[I].type){if(s=redSHOP.filterExtraFieldName(l[I].id),""!=p&&p!=s&&0==m&&(_+=p+","),p!=s&&(p=s,m=!1),l[I].checked||1==m){m=!0;continue}(I==l.length-1&&0==m||"checkbox"!=l[I+1].type&&0==m)&&(_+=p+",")}else if("radio"==l[I].type){if(g=redSHOP.filterExtraFieldName(l[I].id),""!=y&&y!=g&&0==E&&(_+=y+","),y!=g&&(y=g,E=!1),l[I].checked||1==E){E=!0;continue}(I==l.length-1&&0==E||"radio"!=l[I+1].type&&0==E)&&(_+=y+",")}else if("select-multiple"==l[I].type){if(f=redSHOP.filterExtraFieldName(l[I].id),l[I].value)continue;_+=f+","}}else v=redSHOP.filterExtraFieldName(l[I].id),_+=v,l.length-1!=I&&(_+=",");else _+=l[I].id,l.length-1!=I&&(_+=",");else _+=l[I].id,l.length-1!=I&&(_+=",");var S=RedgetElementsByClassName("calendar"),h="";for(cal_i=0;cal_i<S.length;cal_i++){var R=S[cal_i].id;arr=R.split("_img"),n=arr.length;var P=arr[0];""!=P&&""==document.getElementById(P).value&&(h=redSHOP.filterExtraFieldName(P),_+=","+h+",")}var O="";if(document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;O="&subscription_id="+subId}var B=1,b="";request=getHTTPObject(),document.getElementById("quantity"+t).value&&(B=document.getElementById("quantity"+t).value);var j=document.getElementById(e).requiedAttribute.value,C=document.getElementById(e).requiedProperty.value,A=document.getElementById(e).accessory_data.value;0==_&&(u=0),""==j&&""==C&&(d=0);var H=[];o>0&&""!=A&&0!=A&&o==(H=A.split("@@")).length&&(o=0);var T=parseInt(d)+parseInt(o)+parseInt(u),x=parseInt(d)+parseInt(u);if(o>0&&0==x&&H.length>0||0==T||"viewajaxdetail"==c)submitAjaxCartdetail(e,t,a,r,d,o,u);else{var Q="&property_data="+encodeURIComponent(document.getElementById(e).property_data.value);Q=(Q=(Q=(Q=(Q=Q+"&subproperty_data="+encodeURIComponent(document.getElementById(e).subproperty_data.value))+"&accessory_data="+encodeURIComponent(document.getElementById(e).accessory_data.value))+"&acc_quantity_data="+encodeURIComponent(document.getElementById(e).acc_quantity_data.value))+"&acc_property_data="+encodeURIComponent(document.getElementById(e).acc_property_data.value))+"&acc_subproperty_data="+encodeURIComponent(document.getElementById(e).acc_subproperty_data.value);b="&view=product&pid="+t+"&relatedprd_id="+a+"&layout=viewajaxdetail&product_quantity="+B+"&nextrafield="+u+"&extrafieldNames="+_+O+Q;var q=redSHOP.RSConfig._("AJAX_BASE_URL")+b;request.onreadystatechange=function(){if(4==request.readyState&&200==request.status){var e=request.responseText,t={url:q,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_HEIGHT"))},htmldata:e,onOpen:function(){jQuery("select[id^=property_id_ajax_prd_]").select2(),jQuery(redSHOP).trigger("onDisplayAjaxCartBoxDetail",[b])}};redBOX.initialize({}),document.attbox=redBOX.open(null,t);preloadSlimbox({isenable:!1,mainImage:!1});var a=RedgetElementsByClassName("calendar");for(i=0;i<a.length;i++){var r=a[i].id;arr=r.split("_img"),n=arr.length;var d=arr[0],o=d.split("ajax");-1!=r.search("ajax")&&-1!=_.search(o[0])&&window.addEvent("domready",function(){Calendar.setup({inputField:d,ifFormat:"%d-%m-%Y",button:a[i].id,align:"Tl",singleClick:!0})})}}},request.open("POST",q,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(b)}}var getExtraParamsArray={},redShopJsTrigger=[];function submitAjaxCartdetail(e,t,a,r,d,i,n){var o=document.getElementById(e),u="";if(!userfieldValidation("extrafields"+t))return!1;var c=jQuery("#"+e+" [name=requiedAttribute]").val(),l=jQuery("#"+e+" [name=requiedProperty]").val();if(0!=c&&""!=c)return alert(c),!1;if(0!=l&&""!=l)return alert(l),!1;extraFieldPost=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+t+'"]'),t).join("&");var _="";if(document.getElementById("hidden_subscription_id")){if(subId=document.getElementById("hidden_subscription_id").value,0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;_="&subscription_id="+subId}document.getElementById("giftcard_id")?(u="&giftcard_id="+t,document.getElementById("reciver_email")&&(u+="&reciver_email="+document.getElementById("reciver_email").value),document.getElementById("reciver_name")&&(u+="&reciver_name="+document.getElementById("reciver_name").value),document.getElementById("customer_amount")&&(u+="&customer_amount="+document.getElementById("customer_amount").value)):u="&product_id="+t,request=getHTTPObject();var p="ajax_cart_box=1";if(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=p+"&Itemid="+o.Itemid.value+u)+"&category_id="+o.category_id.value)+"&attribute_data="+o.attribute_data.value)+"&property_data="+o.property_data.value)+"&subproperty_data="+o.subproperty_data.value)+"&requiedAttribute="+o.requiedAttribute.value)+"&requiedProperty="+o.requiedProperty.value)+"&accessory_data="+o.accessory_data.value)+"&acc_quantity_data="+o.acc_quantity_data.value)+"&acc_attribute_data="+o.acc_attribute_data.value)+"&acc_property_data="+o.acc_property_data.value)+"&acc_subproperty_data="+o.acc_subproperty_data.value)+"&accessory_price="+o.accessory_price.value,document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&(p=p+"&sel_wrapper_id="+o.sel_wrapper_id.value),p=(p=p+"&quantity="+o.quantity.value)+"&hidden_attribute_cartimage="+o.hidden_attribute_cartimage.value,document.getElementById("calc_height")&&(p=p+"&calcHeight="+o.calcHeight.value),document.getElementById("calc_width")&&(p=p+"&calcWidth="+o.calcWidth.value),document.getElementById("calc_depth")&&(p=p+"&calcDepth="+o.calcDepth.value),document.getElementById("calc_radius")&&(p=p+"&calcRadius="+o.calcRadius.value),document.getElementById("calc_unit")&&(p=p+"&calcUnit="+o.calcUnit.value),p=(p=p+"&pdcextraid="+o.pdcextraid.value)+_+"&"+extraFieldPost,redShopJsTrigger.length>0)for(var s=0,m=redShopJsTrigger.length;s<m;s++)new redShopJsTrigger[s](arguments);if("object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)p+="&"+key+"="+getExtraParamsArray[key];request.open("POST",redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=cart&task=add",!1),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("X-Requested-With","XMLHttpRequest");var y={show_final_cart_box:!0};request.onreadystatechange=function(){if(4==request.readyState){var e=request.responseText;if("0"==(e=e.split("`"))[1])return alert(e[2]),!1;document.attbox&&document.attbox.close(),document.getElementById("mod_cart_total")&&e[1]&&(document.getElementById("mod_cart_total").innerHTML=e[1]),document.getElementById("rs_promote_free_shipping_div")&&e[2]&&(document.getElementById("rs_promote_free_shipping_div").innerHTML=e[2]),document.getElementById("mod_cart_checkout_ajax")&&(document.getElementById("mod_cart_checkout_ajax").style.display=""),jQuery(redSHOP).trigger("onAfterSubmitAjaxCartdetail",[e,t,p,y,d,i]);var a=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&pid="+t+"&r_template=cartbox";request_inner=getHTTPObject(),request_inner.onreadystatechange=function(){if(4==request_inner.readyState&&200==request_inner.status&&y.show_final_cart_box){var e=request_inner.responseText;y.show_final_cart_box=!1;var r={url:a,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_BOX_HEIGHT"))},htmldata:e,onOpen:function(){if(jQuery(redSHOP).trigger("onDisplayAjaxCartBox",[p,t]),redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME")>0)(function(){this.close()}).bind(this).delay(redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME"))}};redBOX.initialize({}),document.ajaxbox=redBOX.open(null,r)}},request_inner.open("GET",a,!0),request_inner.setRequestHeader("X-Requested-With","XMLHttpRequest"),request_inner.send(null)}},request.send(p)}function displayAddtocartProperty(e,t,a,r){return document.getElementById("attribute_data")&&(document.getElementById("attribute_data").value=a),document.getElementById("property_data")&&(document.getElementById("property_data").value=r),document.getElementById("subproperty_data")&&(document.getElementById("subproperty_data").value=""),!!setAddtocartForm(e,t)}function showallreviews(){if(document.getElementById("showreviews")){for(var e=document.getElementsByClassName("show_reviews"),t=0;t<e.length;t++)e[t].style.display="none";"none"==document.getElementById("showreviews").style.display?document.getElementById("showreviews").style.display="":document.getElementById("showreviews").style.display="none"}}function checkAddtocartwishlistValidation(e,t,a,r,d,i,n,o,u){if(0==t||""==t)return!1;if(1==u){if(!userfieldValidation("extrafields"+t))return!1;var c=document.getElementById(e).requiedAttribute.value,l=document.getElementById(e).requiedProperty.value;return""!=c?(alert(c),!1):""==l||(alert(l),!1)}return submitAjaxCartdetail(e,t,a,r,i,n,o),!0}var mainpro_id=[],totatt=[],totcount_no_user_field=[];function productalladdprice(e){mainpro_id=document.frm.product_id.value.split(","),totatt=document.frm.totacc_id.value.split(","),totcount_no_user_field=document.frm.totcount_no_user_field.value.split(","),mainpro_id.length=mainpro_id.length-1;for(var t=0;t<mainpro_id.length;t++)if(""!=mainpro_id[t]&&displayAddtocartForm("addtocart_prd_"+mainpro_id[t],mainpro_id[t],"0","0","user_fields_form")&&!checkAddtocartwishlistValidation("addtocart_prd_"+mainpro_id[t],mainpro_id[t],"0","0","user_fields_form",totatt[t],"",totcount_no_user_field[t],1))return!1;submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[0],mainpro_id[0],0,0,totatt[0],0,totcount_no_user_field[0],e)}var d=0;function submitAjaxwishlistCartdetail(e,t,a,r,i,n,o,u){displayAddtocartForm("addtocart_prd_"+mainpro_id[d],mainpro_id[d],"0","0","user_fields_form");var c=document.getElementById(e),l=[],_=jQuery("#"+e+' [name="requiedAttribute"]').val(),p=jQuery("#"+e+' [name="requiedProperty"]').val();if(!userfieldValidation("extrafields"+t))return!1;if(0!=_&&""!=_)return alert(_),!1;if(0!=p&&""!=p)return alert(p),!1;var s=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+t+'"]'),t).join("&");if(jQuery("#hidden_subscription_id").length>0){if(subId=jQuery("#hidden_subscription_id").val(),0==subId||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;l.push("subscription_id="+subId)}jQuery("#giftcard_id").length>0?(l.push("giftcard_id="+t),l.push("reciver_email="+jQuery("#reciver_email").val()),l.push("reciver_name="+jQuery("#reciver_name").val()),l.push("customer_amount="+jQuery("#customer_amount").val())):l.push("product_id="+t),request=getHTTPObject(),l.push("Itemid="+c.Itemid.value),l.push("category_id="+c.category_id.value),l.push("attribute_data="+c.attribute_data.value),l.push("property_data="+c.property_data.value),l.push("subproperty_data="+c.subproperty_data.value),l.push("requiedAttribute="+c.requiedAttribute.value),l.push("requiedProperty="+c.requiedProperty.value),l.push("accessory_data="+c.accessory_data.value),l.push("acc_quantity_data="+c.acc_quantity_data.value),l.push("acc_attribute_data="+c.acc_attribute_data.value),l.push("acc_property_data="+c.acc_property_data.value),l.push("acc_subproperty_data="+c.acc_subproperty_data.value),l.push("accessory_price="+c.accessory_price.value),l.push("sel_wrapper_id="+c.sel_wrapper_id.value),l.push("quantity=1"),l.push("pdcextraid="+c.pdcextraid.value),document.getElementById("calc_height")&&l.push("calcHeight="+c.calcHeight.value),document.getElementById("calc_width")&&l.push("calcWidth="+c.calcWidth.value),document.getElementById("calc_depth")&&l.push("calcDepth="+c.calcDepth.value),document.getElementById("calc_radius")&&l.push("calcRadius="+c.calcRadius.value),document.getElementById("calc_unit")&&l.push("calcUnit="+c.calcUnit.value);var m=l.join("&")+"&"+s;if(redShopJsTrigger.length>0)for(var y=0,g=redShopJsTrigger.length;y<g;y++)new redShopJsTrigger[y](arguments);if("object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)m+="&"+key+"="+getExtraParamsArray[key];var E=redSHOP.RSConfig._("AJAX_BASE_URL");E+=1==u||2==u?"&view=product&task=addtowishlist&wid=1&ajaxon=1":"&view=cart&task=add&ajax_cart_box=1",/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",E,!0):request.open("POST",E,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",m.length),request.setRequestHeader("Connection","close"),request.onreadystatechange=function(){if(request.readyState<4&&jQuery("#saveid, #allcart").html('<font size="1" color="red">Processing...</font>'),4==request.readyState){var e=request.responseText;if("0"==(e=e.split("`"))[1])return!1;document.attbox&&document.attbox.close(),d++;var t=mainpro_id.length;if(d<t)""!=mainpro_id[d]&&submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[d],mainpro_id[d],0,0,totatt[d],0,totcount_no_user_field[d]);else if(1==u)window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?wishlist=1&option=com_redshop&view=login";else{if(2==u)return!1;window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=cart"}jQuery("#saveid, #allcart").html(""),e[1]&&jQuery("#mod_cart_total").html(e[1]),e[2]&&jQuery("#rs_promote_free_shipping_div").html(e[2]),jQuery("#mod_cart_checkout_ajax").hide()}},request.send(m)}function addmywishlist(e,t,a){for(var r=document.getElementsByName("extrafields"+t+"[]"),d="",i="",o="",u="",c="",l="",_=!1,p="",s=0;s<r.length;s++)if("checkbox"==r[s].type)u=redSHOP.filterExtraFieldName(r[s].id),""!=o&&o!=u&&""!=d&&(i+="&"+o+"="+d),o!=u&&(d="",o=u),r[s].checked&&(""!=d&&(d+=","),d+=r[s].value),s==r.length-1&&""!=d&&(i+="&"+u+"="+d),s<r.length-1&&"checkbox"!=r[s+1].type&&""!=d&&(i+="&"+u+"="+d);else if("radio"==r[s].type){if(l=redSHOP.filterExtraFieldName(r[s].id),""!=c&&c!=l&&0==_&&(i+="&"+c+"="+d),c!=l){if(d="",c=l,_=!1,r[s].checked||1==_){_=!0,i+="&"+c+"="+r[s].value;continue}}else if(r[s].checked){_=!0,i+="&"+l+"="+r[s].value;continue}}else if("select-multiple"==r[s].type){var m=r[s];d="",p=redSHOP.filterExtraFieldName(r[s].id);for(var y=0;y<m.options.length;y++){if(m.options[y].selected)-1==d.search(String(m.options[y].value))&&(""!=d&&(d+=","),d+=String(m.options[y].value))}d&&(i+="&"+p+"="+d)}else if("hidden"==r[s].type)imgfieldNamefrmId=redSHOP.filterExtraFieldName(r[s].id),i+="&"+imgfieldNamefrmId+"="+(d=r[s].value),d="";else if("text"==r[s].type)i+="&"+r[s].id+"="+(d=r[s].value);else{if(-1!=r[s].id.search("ajax")){var g=r[s].id.split("ajax"),E="";E=redSHOP.filterExtraFieldName(g[1]),r[s].id=E}i+="&"+r[s].id+"="+(d=r[s].value)}var v=RedgetElementsByClassName("calendar");E="";for(cal_i=0;cal_i<v.length;cal_i++){var f=v[cal_i].id;arr=f.split("_img"),n=arr.length;var I=arr[0];""!=I&&I.search(t)&&""!=document.getElementById(I).value&&(i+="&"+(E=redSHOP.filterExtraFieldName(I))+"="+document.getElementById(I).value)}request=getHTTPObject();var S="&view=product&task=addtowishlist&json=1&ajaxon=1";S=(S=(S=S+"&Itemid="+a)+"&product_id="+t)+"&userfield_id="+r.length,S+=i;var h=redSHOP.RSConfig._("AJAX_BASE_URL")+S;/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",h,!0):request.open("POST",h,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",S.length),request.setRequestHeader("Connection","close");request.onreadystatechange=function(){if(request.readyState<4&&(document.getElementById("myprohide_"+t).innerHTML='<font size="1" color="red">Loading...</font>'),4==request.readyState&&200==request.status){request.responseText;var e=document.getElementById("mypid").innerHTML,a=request.responseText;sp=a.split(":-:"),-1==e.search(sp[1])&&(document.getElementById("mypid").innerHTML+=sp[0],document.getElementById("wid").style.display="block",document.getElementById("myprohide_"+t).innerHTML="")}},request.send(S)}function getStocknotify(e,t,a,r){if(jQuery("#email_notify")){var d=jQuery("#email_notify").val();if(0==r&&!validateEmail(d))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_ENTER_VALID_EMAIL_ADDRESS")),!1}var i=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=addNotifystock&product_id="+e;i=i+"&property_id="+t+"&subproperty_id="+a+"&email_not_login="+d,(request=getHTTPObject()).onreadystatechange=function(){if(4==request.readyState){var t=request.responseText;document.getElementById("notify_stock"+e)&&(document.getElementById("notify_stock"+e).innerHTML=t)}},request.open("GET",i,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send()}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}