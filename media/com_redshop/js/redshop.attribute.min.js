/**
 * @copyright  Copyright (C) 2008 - 2017 redCOMPONENT.com. All rights reserved.
 * @license    GNU General Public License version 2 or later; see LICENSE
*/ (redSHOP=window.redSHOP||{}).onBeforeAjaxdisplayAdditionalImage=[],redSHOP.onAfterAjaxdisplayAdditionalImage=[],redSHOP.onDisplayAjaxCartBoxDetail=[],redSHOP.onAfterSubmitAjaxCartdetail=[],redSHOP.onDisplayAjaxCartBox=[],redSHOP.setProductTax=function(e){e.id=e.id||0,e.price=e.price||0,e.userId=e.userId||0,e.taxExempt=e.taxExempt||!1,e.option="com_redshop",e.view="cart",e.task="cart.ajaxGetProductTax",e.tmpl="component",jQuery.ajax({url:redSHOP.RSConfig._("AJAX_BASE_URL"),type:"POST",async:!1,dataType:"json",data:e}).done(function(e){redSHOP.baseTax=e.tax})},redSHOP.filterExtraFieldName=function(e){return e=reverseString(e),reverseString(e.substr(e.indexOf("_")+1))},redSHOP.collectExtraFields=function(e,t){var a={name:e.id.replace("_"+t,""),value:jQuery(e).val()};switch(e.type){case"checkbox":a.name=redSHOP.filterExtraFieldName(e.id),a.value=jQuery("[id^="+e.id+"]:checked").val();break;case"radio":a.name=redSHOP.filterExtraFieldName(e.id),a.value=jQuery("[id^="+a.name+"]:checked").val()}return a},redSHOP.triggerCustomEvents=function(e,t){if(redSHOP[e].length>0)for(var a=0,r=redSHOP[e].length;a<r;a++)new redSHOP[e][a](t)},redSHOP.updateCartExtraFields=function(e,t,a){jQuery.each(e,function(e,r){var l=redSHOP.collectExtraFields(r,t);if("checkbox"==r.type){if(void 0!==l.value){var o=jQuery(a+" input[id="+l.name+"]").val();""==(o=o.replace(/(^,)|(,$)/g,""))?jQuery(a+" input[id="+l.name+"]").val(l.value):jQuery(a+" input[id="+l.name+"]").val(o+","+l.value)}}else jQuery(a+" input[id="+l.name+"]").val(l.value)})},redSHOP.updateAjaxCartExtraFields=function(e,t){var a=[];return jQuery.each(e,function(e,r){var l=redSHOP.collectExtraFields(r,t);a.push(l.name+"="+l.value)}),a};var request,r_browser=!1,subproperty_main_image="";function getHTTPObject(){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){e=!1}}return e}function productaddprice(e,t){var a=1;if(prefix=0!=t?t:e,jQuery("[data-id=accessory_data]"))var r=jQuery("[data-id=accessory_data]").val();if(jQuery("[data-id=acc_quantity_data]"))var l=jQuery("[data-id=acc_quantity_data]").val();if(jQuery("[data-id=acc_attribute_data]"))var o=jQuery("[data-id=acc_attribute_data]").val().replace("##","::");if(jQuery("[data-id=acc_property_data]"))var c=jQuery("[data-id=acc_property_data]").val().replace("##","::");if(jQuery("[data-id=acc_subproperty_data]"))var s=jQuery("[data-id=acc_subproperty_data]").val().replace("##","::");if(document.getElementById("quantity"+prefix)&&document.getElementById("quantity"+prefix)&&(a=document.getElementById("quantity"+prefix).value),jQuery("[data-id=attribute_data]"))var u=jQuery("[data-id=attribute_data]").val().replace("##","::");if(jQuery("[data-id=property_data]"))var p=jQuery("[data-id=property_data]").val().replace("##","::");if(jQuery("[data-id=subproperty_data]"))var m=jQuery("[data-id=subproperty_data]").val().replace("##","::");var g=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displayProductaddprice&qunatity="+a;g=(g=g+"&product_id="+e+"&attribute_data="+u+"&property_data="+p+"&subproperty_data="+m)+"&accessory_data="+r+"&acc_quantity_data="+l+"&acc_attribute_data="+o+"&acc_property_data="+c+"&acc_subproperty_data="+s,(request=getHTTPObject()).onreadystatechange=function(){if(4==request.readyState){var t=request.responseText.split(":"),r=0,l=0;document.getElementById("wrapper_price")&&(r=parseFloat(document.getElementById("wrapper_price").value)),document.getElementById("wrapper_price_withoutvat")&&(l=parseFloat(document.getElementById("wrapper_price_withoutvat").value)),document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+prefix).innerHTML=number_format(parseFloat(t[0])+r*a,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_discount_price"+prefix)&&(document.getElementById("display_product_discount_price"+prefix).innerHTML=number_format(t[4],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_without_vat"+prefix)&&(document.getElementById("display_product_price_without_vat"+prefix).innerHTML=number_format(parseFloat(t[5])+l*a,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_price_no_vat"+prefix)&&(document.getElementById("display_product_price_no_vat"+prefix).innerHTML=number_format(parseFloat(t[5])+l*a,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_old_price"+prefix)&&(document.getElementById("display_product_old_price"+prefix).innerHTML=number_format(t[2],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("display_product_saving_price"+prefix)&&(document.getElementById("display_product_saving_price"+prefix).innerHTML=number_format(t[3],redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))),document.getElementById("main_price"+prefix)&&(document.getElementById("main_price"+prefix).value=t[0]),document.getElementById("product_price_no_vat"+prefix)&&(document.getElementById("product_price_no_vat"+prefix).value=t[5],document.getElementById("main_price"+e)&&(document.getElementById("main_price"+e).value=t[0]),document.getElementById("product_price_no_vat"+e)&&(document.getElementById("product_price_no_vat"+e).value=t[5]),document.getElementById("product_old_price"+e)&&(document.getElementById("product_old_price"+e).value=t[2])),document.getElementById("product_old_price"+prefix)&&(document.getElementById("product_old_price"+prefix).value=t[2])}},request.open("GET",g,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function changePropertyDropdown(product_id,accessory_id,relatedprd_id,attribute_id,selectedproperty_id,mpw_thumb,mph_thumb){var prefix,allarg=arguments,propArr=[],subpropArr=[],property_data="",subproperty_data="",suburl="",subatthtml="",layout="";document.getElementById("isAjaxBoxOpen")&&(layout=document.getElementById("isAjaxBoxOpen").value);var preprefix="";"viewajaxdetail"==layout&&(preprefix="ajax_");var commonid=(prefix=0!=accessory_id?preprefix+"acc_":0!=relatedprd_id?preprefix+"rel_":preprefix+"prd_")+product_id+"_"+accessory_id+"_"+attribute_id;if(document.getElementById("subattdata_"+commonid)&&(subatthtml=document.getElementById("subattdata_"+commonid).value),suburl=(suburl=(suburl=(suburl=(suburl=suburl+"&subatthtml="+subatthtml)+"&product_id="+product_id)+"&attribute_id="+attribute_id)+"&accessory_id="+accessory_id)+"&relatedprd_id="+relatedprd_id,document.getElementsByName("property_id_"+commonid+"[]")){for(var propName=document.getElementsByName("property_id_"+commonid+"[]"),sel_i=0,p=0;p<propName.length;p++)"checkbox"==propName[p].type||"radio"==propName[p].type?propName[p].checked&&(propArr[sel_i++]=propName[p].value):propName[p].selectedIndex&&(propArr[sel_i++]=propName[p].options[propName[p].selectedIndex].value);for(var sp=0;sp<propArr.length;sp++){var spCommonName='[name="subproperty_id_'+commonid+"_"+propArr[sp]+'[]"]';jQuery(spCommonName).length&&("radio"==jQuery(spCommonName).attr("type")||"checkbox"==jQuery(spCommonName).attr("type")?subpropArr.push(jQuery(spCommonName+":checked").val()):subpropArr.push(jQuery(spCommonName).val()))}property_data=propArr.join(","),subproperty_data=subpropArr.join(","),suburl=(suburl=suburl+"&property_id="+property_data)+"&subproperty_id="+subproperty_data}var url=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displaySubProperty&isAjaxBox="+layout;url+=suburl,(request=getHTTPObject()).onreadystatechange=function(){if(document.getElementById("property_responce"+commonid)&&(document.getElementById("property_responce"+commonid).style.display="none"),4!=request.readyState&&document.getElementById("rs_image_loader")&&(document.getElementById("rs_image_loader").style.display="block"),4==request.readyState){var property_id=propArr.length>0?propArr[0]:0,withoutVAT=!1;document.getElementById("property_responce"+commonid)&&(document.getElementById("property_responce"+commonid).innerHTML=request.responseText,document.getElementById("property_responce"+commonid).style.display="",-1!=request.responseText.indexOf("{without_vat}")&&(withoutVAT=!0),eval(jQuery(request.responseText).find("script").text())),displayAdditionalImage(product_id,accessory_id,relatedprd_id,property_id,0,withoutVAT),calculateTotalPrice(product_id,relatedprd_id,withoutVAT),jQuery('select:not(".disableBootstrapChosen")').select2(),redSHOP.triggerCustomEvents("onChangePropertyDropdown",{allarg:allarg,propArr:propArr})}},request.open("GET",url,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function display_image(e,t,a){redSHOP.RSConfig._("PRODUCT_DETAIL_IS_LIGHTBOX")||(document.getElementById("a_main_image"+t).href=a),document.getElementById("main_image"+t).src=e}function display_image_out(e,t,a){document.getElementById("main_image"+t).src=a}function display_image_add(e,t){document.getElementById("main_image"+t)&&(document.getElementById("main_image"+t).src=e)}function display_image_add_out(e,t){document.getElementById("main_image"+t)&&(""!=subproperty_main_image?document.getElementById("main_image"+t).src=subproperty_main_image:document.getElementById("main_image"+t).src=e)}function collectAttributes(e,t,a,r){var l,o=[],c=[],s=[],u=0,p=0,m=0,g=!0,y=!0,E=!0,v="",f="",I=jQuery("#isAjaxBoxOpen").val(),h=jQuery("[data-id=product_preorder"+e+"]").val(),R=jQuery("[data-id=product_stock"+e+"]").val(),B=jQuery("[data-id=preorder_product_stock"+e+"]").val(),S="",C=1;jQuery("#accquantity_"+e+"_"+t).length&&(C=jQuery("#accquantity_"+e+"_"+t).val()),"viewajaxdetail"==I&&(S="ajax_"),0!=t?(l=S+"acc_",u=parseFloat(jQuery("#accessory_id_"+e+"_"+t).attr("accessoryprice")),p=parseFloat(jQuery("#accessory_id_"+e+"_"+t).attr("accessorywithoutvatprice")),m=u):(l=0!=a?S+"rel_":S+"prd_",u=parseFloat(jQuery("#main_price"+e).val()),m=parseFloat(jQuery("#product_old_price"+e).val()),jQuery("#product_price_excluding_price"+e).length?p=parseFloat(jQuery("#product_price_excluding_price"+e).val()):jQuery("#product_price_no_vat"+e).length&&(p=parseFloat(jQuery("#product_price_no_vat"+e).val())));var A=l+e+"_"+t,b=l+e;g&&(g=checkProductStockRoom(R,b,h,B));var T=jQuery('[name="attribute_id_'+A+'[]"]');T.length<=0&&1==redSHOP.RSConfig._("AJAX_CART_BOX")&&(v=jQuery("#requiedAttribute").val(),f=jQuery("#requiedProperty").val()),T.each(function(a,r){var u=r.value;A=l+e+"_"+t+"_"+u,o.push(u);var I=jQuery('[name="property_id_'+A+'[]"]');if(I.length){setPropertyImage(e,"property_id_"+A);var R=[],B=[];if(I.each(function(e,t){"checkbox"==t.type||"radio"==t.type?(t.checked&&0!=t.value&&B.push(t.value),t.required&&(R=[t.getAttribute("attribute_name")])):(t.selectedIndex&&0!=t.options[t.selectedIndex].value&&B.push(t.options[t.selectedIndex].value),t.required&&R.push(t.getAttribute("attribute_name")))}),B.length&&c.push(B.join(",,")),R.length&&!B.length&&(v+=Joomla.JText._("COM_REDSHOP_ATTRIBUTE_IS_REQUIRED")+" "+unescape(R.join("<br>"))+"\n"),y&&E){var S="property_id_"+A+"_oprand",C="property_id_"+A+"_proprice_withoutvat";m=calculateSingleProductPrice(m,S,priceOldElementId="property_id_"+A+"_prooldprice",B),p=calculateSingleProductPrice(p,S,C,B)}var T=!1,$=[];B.each(function(a){var r="property_id_"+A+"_stock"+a,o="property_id_"+A+"_preorderstock"+a;jQuery("#"+r).length>0&&jQuery("#"+o).length>0&&g&&0==t&&(g=checkProductStockRoom(jQuery("#"+r).val(),b,h,jQuery("#"+o).val()));var c=l+e+"_"+t+"_"+u+"_"+a,v='[name="subproperty_id_'+c+'[]"]';if(jQuery(v).length){setSubpropertyImage(e,"subproperty_id_"+c),T=!0;var I=[];if("radio"==jQuery(v).attr("type")||"checkbox"==jQuery(v).attr("type")?I.push(jQuery(v+":checked").val()):I.push(jQuery(v).val()),I.each(function(e){var a="#subproperty_id_"+c+"_stock"+e,r="#subproperty_id_"+c+"_preOrderStock"+e;1==redSHOP.RSConfig._("USE_STOCKROOM")&&jQuery(a).length&&0==t&&(g=checkProductStockRoom(jQuery(a).val(),b,h,jQuery(r).val()))}),1==jQuery(v).attr("required")&&I.length&&(f+=jQuery("#subprop_lbl").html()+" "+unescape(jQuery(v).attr("subpropName"))+"\n"),y&&E){var R="subproperty_id_"+c+"_oprand",B="subproperty_id_"+c+"_proprice_withoutvat";m=calculateSingleProductPrice(m,R,priceOldElementId="subproperty_id_"+c+"_prooldprice",I),p=calculateSingleProductPrice(p,R,B,I)}$.push(I.join("::"))}s.push($.join(",,"))})}}),(u=p)>0&&(!1==r||void 0==r)&&(u*=1+redSHOP.RSConfig._("BASE_TAX")),0==c.length&&(o=[]),0!=t?(jQuery("[data-id=acc_attribute_data]").val(o.join("##")),jQuery("[data-id=acc_property_data]").val(c.join("##")),jQuery("[data-id=acc_subproperty_data]").val(s.join("##")),jQuery("[data-id=accessory_price]").val(u),jQuery("[data-id=accessory_price_withoutvat]").val(p)):(jQuery("[data-id=attribute_data]").val(o.join("##")),jQuery("[data-id=property_data]").val(c.join("##")),jQuery("[data-id=subproperty_data]").val(s.join("##")),jQuery("[data-id=tmp_product_price]").val(u),jQuery("[data-id=total_price_no_vat_per_product]").val(p),jQuery("[data-id=tmp_product_old_price]").val(m)),jQuery("[data-id=requiedAttribute]").val(v),jQuery("[data-id=requiedProperty]").val(f)}function checkProductStockRoom(e,t,a,r){var l="instock";return e>0?l=1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"instock":0==e&&(l="global"==a&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||""==a&&1!=redSHOP.RSConfig._("ALLOW_PRE_ORDER")||"no"==a?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"instock":"outofstock":0==r?1==redSHOP.RSConfig._("USE_AS_CATALOG")?"preorder":"outofstock":1==redSHOP.RSConfig._("USE_AS_CATALOG")?"outofstock":"preorder"),redSHOP.updateStockStatusMessage(l,t),"instock"==l}function calculateSingleProductPrice(e,t,a,r){var l=!0;e=parseFloat(e);for(var o=0;o<r.length&&0!=r[o];o++){var c=r[o],s=jQuery("#"+t+c).val(),u=parseFloat(jQuery("#"+a+c).val());if("-"==s)e-=u;else if("+"==s)e+=u;else if("*"==s)e*=u;else if("/"==s)e/=u;else if("="==s){e=u,l=!1;break}}return e}function calculateTotalPrice(e,t,a){if(redSHOP.setProductTax({id:e,price:1}),0==e||""==e)return!1;var r=0,l=0,o=0,c=0,s=0,u=1,p=parseFloat(collectAccessory(e,t)),m=0!=t?t:e,g=0,y=0;collectAttributes(e,0,t,a),jQuery("[data-id=tmp_product_old_price]")&&(s=parseFloat(jQuery("[data-id=tmp_product_old_price]").val())),jQuery("[data-id=accessory_price_withoutvat]").length&&(c=parseFloat(jQuery("[data-id=accessory_price_withoutvat]").val())),jQuery("#quantity"+m).length&&(u=jQuery("#quantity"+m).val()),jQuery("[data-id=tmp_product_price]").length&&(r=parseFloat(jQuery("[data-id=tmp_product_price]").val())),jQuery("#hidden_subscription_prize").length&&(r+=parseFloat(jQuery("#hidden_subscription_prize").val())),jQuery("[data-id=total_price_no_vat_per_product]").length&&(l=parseFloat(jQuery("[data-id=total_price_no_vat_per_product]").val())),jQuery("[data-id=tmp_product_old_price]").length&&(o=parseFloat(jQuery("[data-id=tmp_product_old_price]").val())),setWrapperComboBox(),jQuery("#wrapper_price").length&&(g=parseFloat(jQuery("#wrapper_price").val())),jQuery("#wrapper_price_withoutvat").length&&(y=parseFloat(jQuery("#wrapper_price_withoutvat").val())),final_price_f=r+p+g,product_price_without_vat=l+c+y,savingprice=parseFloat(s=o+p+g)-parseFloat(final_price_f),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&final_price_f&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||"1"==redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))?(final_price=number_format(final_price_f,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),final_price_novat=number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"))):(final_price=getPriceReplacement(final_price_f),final_price_novat=getPriceReplacement(product_price_without_vat)),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))&&("1"==redSHOP.RSConfig._("SHOW_PRICE_WITHOUT_VAT")?(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price_novat),jQuery("#display_product_discount_price"+e).html(final_price_novat)):(jQuery("#produkt_kasse_hoejre_pris_indre"+e).html(final_price),jQuery("#display_product_discount_price"+e).html(final_price)),product_price_without_vat=product_price_without_vat?number_format(product_price_without_vat,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):getPriceReplacement(product_price_without_vat),jQuery("#display_product_price_without_vat"+e).html(product_price_without_vat),jQuery("#display_product_price_no_vat"+e).html(product_price_without_vat),jQuery("#display_product_old_price"+e).length&&(s=s?number_format(s,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")):getPriceReplacement(s),jQuery("#display_product_old_price"+e).html(s)),jQuery("#display_product_saving_price"+e).length&&(savingprice=number_format(savingprice,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),jQuery("#display_product_saving_price"+e).html(savingprice)),jQuery("#rs_selected_accessory_price").html(final_price))}function collectAccessory(e,t){if(0==e||""==e)return!1;var a="",r="",l=0,o=0,c=0,s=0,u=0,p=[],m=[],g=[],y=[],E=[];if(document.getElementById("isAjaxBoxOpen")&&(a=document.getElementById("isAjaxBoxOpen").value),"viewajaxdetail"==a&&(r="ajax_"),document.getElementsByName("accessory_id_"+r+e+"[]")){if(dcatt=document.getElementsByName("accessory_id_"+r+e+"[]"),document.getElementById("giftcard_id")&&document.getElementById("giftcard_id").value>0&&0==dcatt.length)return!0;var v=dcatt.length;for(j=0;j<v;j++){var f=0,I=0,h=dcatt[j].value,R=r+e+"_"+h,B=0,S=0;acc_chk=document.getElementById("accessory_id_"+R),document.getElementById("attribute_id_"+R)&&(S=document.getElementById("attribute_id_"+R)),B=dcatt[j].checked;var C=1;qid=0!=t?t:e,C=document.getElementById("accquantity_"+R)?document.getElementById("accquantity_"+R).value:document.getElementById("quantity"+qid)&&"select-one"==document.getElementById("quantity"+qid).type?document.getElementById("quantity"+qid).value:1,B?(p[u]=h,m[u]=C,collectAttributes(e,h,t),jQuery("[data-id=accessory_price]")&&(f=parseFloat(jQuery("[data-id=accessory_price]").val())),jQuery("[data-id=accessory_price_withoutvat]")&&(I=parseFloat(jQuery("[data-id=accessory_price_withoutvat]").val())),jQuery("[data-id=acc_attribute_data]")&&(g[u]=jQuery("[data-id=acc_attribute_data]").val()),jQuery("[data-id=acc_property_data]")&&(y[u]=jQuery("[data-id=acc_property_data]").val()),jQuery("[data-id=acc_subproperty_data]")&&(E[u]=jQuery("[data-id=acc_subproperty_data]").val()),document.getElementById("divaccstatus"+R)&&(document.getElementById("divaccstatus"+R).className="accessorystatus added"),u++):document.getElementById("divaccstatus"+R)&&(document.getElementById("divaccstatus"+R).className="accessorystatus"),o+=parseFloat(f)*C,c+=parseFloat(I)*C}l+=parseFloat(o),s+=parseFloat(c),jQuery("[data-id=accessory_data]")&&jQuery("[data-id=accessory_data]").val(p.join("@@")),jQuery("[data-id=acc_quantity_data]")&&jQuery("[data-id=acc_quantity_data]").val(m.join("@@")),jQuery("[data-id=acc_attribute_data]")&&jQuery("[data-id=acc_attribute_data]").val(g.join("@@")),jQuery("[data-id=acc_property_data]")&&jQuery("[data-id=acc_property_data]").val(y.join("@@")),jQuery("[data-id=acc_subproperty_data]")&&jQuery("[data-id=acc_subproperty_data]").val(E.join("@@")),jQuery("[data-id=accessory_price]")&&jQuery("[data-id=accessory_price]").val(l),jQuery("[data-id=accessory_price_withoutvat]")&&jQuery("[data-id=accessory_price_withoutvat]").val(s)}return l}function number_format(e,t,a,r){var l,o,c=e,s=t;c*=redSHOP.RSConfig._("CURRENCY_CONVERT");var u=function(e,t){var a=Math.pow(10,t);return(Math.round(e*a)/a).toString()};c=isFinite(+c)?+c:0,s=isFinite(+s)?Math.abs(s):0;var p=void 0===r?",":r,m=void 0===a?".":a,g=u(s>0?c:Math.round(c),s),y=u(Math.abs(c),s);y>=1e3?(o=(l=y.split(/\D/))[0].length%3||3,l[0]=g.slice(0,o+(c<0))+l[0].slice(o).replace(/(\d{3})/g,p+"$1"),g=l.join(m)):g=g.replace(".",m);var E=g.indexOf(m);s>=1&&-1!==E&&g.length-E-1<s?g+=Array(s-(g.length-E-1)).join(0)+"0":s>=1&&-1===E&&(g+=m+Array(s).join(0)+"0");var v="",f=redSHOP.RSConfig._("CURRENCY_SYMBOL_POSITION");switch(f){case"behind":v=g+' <span class="product-currency-symbol">'+redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+"</span>";break;case"none":v=g;break;default:v='<span class="product-currency-symbol">'+redSHOP.RSConfig._("CURRENCY_SYMBOL_CONVERT")+"</span> "+g}return v}function getPriceReplacement(e){var t="";return("0"==redSHOP.RSConfig._("SHOW_PRICE")&&(""==(url=redSHOP.RSConfig._("PRICE_REPLACE_URL"))&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("PRICE_REPLACE")+"</a>"),"1"==redSHOP.RSConfig._("SHOW_PRICE")&&0==e&&(""==(url=redSHOP.RSConfig._("ZERO_PRICE_REPLACE_URL"))&&(url="#"),t="<a href='"+url+"'>"+redSHOP.RSConfig._("ZERO_PRICE_REPLACE")+"</a>",null===url&&null===redSHOP.RSConfig._("ZERO_PRICE_REPLACE")))?"":t}function setWrapper(e,t,a,r){document.getElementById("wrapper_id")&&(document.getElementById("wrapper_id").value=e),jQuery("[data-id=sel_wrapper_id]")&&jQuery("[data-id=sel_wrapper_id]").val(e),document.getElementById("wrapper_price").value=t,document.getElementById("wrapper_price_withoutvat").value=a,calculateTotalPrice(r,0)}function setPropImage(e,t,a){var r=document.getElementById(t+"_"+a);if(r||(r=document.getElementById(t)),r){if("checkbox"==r.type||"radio"==r.type)for(var l=document.getElementsByName(t+"[]"),o=0;o<l.length;o++){var c=l[o].value;c==a&&(l[o].checked=!0)}else for(var o=0;o<r.options.length;o++){var c=r.options[o].value;c==a&&(r.options[o].selected=!0)}}}function setSubpropImage(e,t,a){var r=document.getElementById(t+"_"+a);if(r||(r=document.getElementById(t)),r){if("checkbox"==r.type||"radio"==r.type)for(var l=document.getElementsByName(t+"[]"),o=0;o<l.length;o++)l[o].value,l[o].value==a&&(l[o].checked=!0);else for(var o=0;o<r.options.length;o++)r.options[o].value,r.options[o].value==a&&(r.options[o].selected=!0)}}function setPropertyImage(e,t){var a=0,r=document.getElementById(t);if(r){if("checkbox"==r.type||"radio"==r.type)for(var l=document.getElementsByName(t+"[]"),o=0;o<l.length;o++){var c="";a=l[o].value,l[o].checked&&(c="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=c)}else for(var o=0;o<r.length;o++){var c="";a=r[o].value,r[r.selectedIndex].value==a&&(c="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=c)}}else for(var l=document.getElementsByName(t+"[]"),o=0;o<l.length;o++){var c="";a=l[o].value,l[o].checked&&(c="1px solid"),document.getElementById(t+"_propimg_"+a)&&(document.getElementById(t+"_propimg_"+a).style.border=c)}}function setSubpropertyImage(e,t,a){var a=0,r=document.getElementById(t);if(r){if("checkbox"==r.type||"radio"==r.type)for(var l=document.getElementsByName(t+"[]"),o=0;o<l.length;o++){var c="";a=l[o].value,l[o].checked&&(c="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=c)}else for(var o=0;o<r.length;o++){var c="";a=r[o].value,r[r.selectedIndex].value==a&&(c="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=c)}}else for(var l=document.getElementsByName(t+"[]"),o=0;o<l.length;o++){var c="";a=l[o].value,l[o].checked&&(c="1px solid"),document.getElementById(t+"_subpropimg_"+a)&&(document.getElementById(t+"_subpropimg_"+a).style.border=c)}}function displayAdditionalImage(e,t,a,r,l,o){var c=arguments,s="&product_id="+e;s=(s=(s=(s=s+"&accessory_id="+t)+"&relatedprd_id="+a)+"&property_id="+r)+"&subproperty_id="+l;var u="";if(0!=t?(prefix="acc_",e=t):prefix=0!=a?"rel_":"prd_",collectAttributes(e,0,a,o),jQuery("[data-id=property_data]")){var p=jQuery("[data-id=property_data]").val();s=s+"&property_data="+encodeURIComponent(p)}if(jQuery("[data-id=subproperty_data]")){var m=jQuery("[data-id=subproperty_data]").val();s=s+"&subproperty_data="+encodeURIComponent(m)}document.getElementById(prefix+"main_imgwidth")&&(s=s+"&main_imgwidth="+parseInt(document.getElementById(prefix+"main_imgwidth").value)),document.getElementById(prefix+"main_imgheight")&&(s=s+"&main_imgheight="+parseInt(document.getElementById(prefix+"main_imgheight").value));var g=0;if(document.getElementById("a_main_image"+e)||document.getElementById("main_image"+e)){var y="";if(document.getElementById("a_main_image"+e)){var E=document.getElementById("a_main_image"+e).href;void 0!==E&&(y=(y=(E=(E=(y=(y=(E=E.split("")).reverse()).join("")).split("."))[0].split("")).reverse()).join(""))}else{var E=document.getElementById("main_image"+e).src;void 0!==E&&(y=(y=(y=(y=(E=(E=(y=(y=(E=E.split("")).reverse()).join("")).split("."))[0].split("")).reverse()).join("")).split("&"))[0])}("jpg"==(y=y.toLowerCase())||"jpeg"==y||"png"==y||"gif"==y||"bmp"==y)&&(g=1)}var v=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=displayAdditionImage&redview="+redSHOP.RSConfig._("REDSHOP_VIEW")+"&redlayout="+redSHOP.RSConfig._("REDSHOP_LAYOUT");v+=s,redSHOP.triggerCustomEvents("onBeforeAjaxdisplayAdditionalImage",{url:v,product_id:e,allarg:c}),(request=getHTTPObject()).onreadystatechange=function(){if(4==request.readyState){var t=(u=request.responseText).split("`_`");""!=t[9]&&document.getElementById("product_number_variable"+e)&&(document.getElementById("product_number_variable"+e).innerHTML=t[9]),subproperty_main_image=t[4],document.getElementById("a_main_image"+e)&&(""!=t[2]&&1==g&&(document.getElementById("a_main_image"+e).href=t[2]),""!=t[3]&&(document.getElementById("a_main_image"+e).title=t[3])),document.getElementById("main_image"+e)&&""!=t[4]&&void 0!=t[4]&&(document.getElementById("main_image"+e).src=t[4]),document.getElementsByClassName("product_more_videos")[0]&&(document.getElementsByClassName("product_more_videos")[0].innerHTML=t[16]),document.getElementById("additional_images"+e)&&""!=t[1]&&(document.getElementById("additional_images"+e).innerHTML=t[1]),document.getElementById("hidden_attribute_cartimage"+e)&&(document.getElementById("hidden_attribute_cartimage"+e).value=t[12]),document.getElementById("stockImage"+e)&&""!=t[5]&&(document.getElementById("stockImage"+e).src=t[5]),document.getElementById("stockImageTooltip"+e)&&""!=t[6]&&(document.getElementById("stockImageTooltip"+e).innerHTML=t[6]),document.getElementById("displayProductInStock"+e)&&""!=t[10]&&(document.getElementById("displayProductInStock"+e).innerHTML=t[10]),document.getElementById("ProductAttributeMinDelivery"+e)&&""!=t[7]&&(document.getElementById("ProductAttributeMinDelivery"+e).innerHTML=t[7]),document.getElementById("stock_status_div"+e)&&""!=t[11]&&(document.getElementById("stock_status_div"+e).innerHTML=t[11]),document.getElementById("notify_stock"+e)&&(document.getElementById("notify_stock"+e).innerHTML=t[13]),document.getElementById("stock_availability_date_lbl"+e)&&(document.getElementById("stock_availability_date_lbl"+e).innerHTML=t[14]),document.getElementById("stock_availability_date"+e)&&(document.getElementById("stock_availability_date"+e).innerHTML=t[15]),preloadSlimbox({isenable:!0,mainImage:!1}),redSHOP.triggerCustomEvents("onAfterAjaxdisplayAdditionalImage",{arrResponse:t,product_id:e,allarg:c})}},request.open("GET",v,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(null)}function preloadSlimbox(e){}function setWrapperComboBox(){if(document.getElementById("wrapper_id")&&jQuery("[data-id=sel_wrapper_id]").length){var e=document.getElementById("wrapper_id").value;jQuery("[data-id=sel_wrapper_id]").val(e)}var t=document.getElementsByName("w_price"),a=0;jQuery("[data-id=sel_wrapper_id]").length&&(a=jQuery("[data-id=sel_wrapper_id]").val());var r=0,l=0;for(document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&0!=a&&(r=document.getElementById("w_price"+a).value,l=document.getElementById("w_price_withoutvat"+a).value),document.getElementById("wrapper_price")&&(document.getElementById("wrapper_price").value=r),document.getElementById("wrapper_price_withoutvat")&&(document.getElementById("wrapper_price_withoutvat").value=l),i=0;i<t.length;i++){var o=t[i].id.substr(7);document.getElementById("wrappertd"+o)&&(o==a?(document.getElementById("wrappertd"+o).style.border="1px solid",document.getElementById("wrappertd"+o).style.padding="7px"):(document.getElementById("wrappertd"+o).style.border="",document.getElementById("wrappertd"+o).style.padding=""))}}function discountCalculation(e){var t=0,a=0,r=0,l=0,o="cm",c="cm",s="",u=0,p=0,m="",g=0;if(document.getElementById("calc_height")&&""==(t=document.getElementById("calc_height").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;if(document.getElementById("calc_width")){var y=(a=document.getElementById("calc_width").value).replace(",",".");if(""==a)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;if(y<3)return jQuery("#discountCal-width-minimum-alert").click(),!1}if(document.getElementById("calc_depth")){var E=(r=document.getElementById("calc_depth").value).replace(",",".");if(""==r)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;if(E<3)return jQuery("#discountCal-depth-minimum-alert").click(),!1}if(document.getElementById("calc_radius")&&""==(l=document.getElementById("calc_radius").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;if(document.getElementById("discount_calc_unit")&&0==(o=document.getElementById("discount_calc_unit").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;document.getElementById("calc_unit")&&(c=document.getElementById("calc_unit").value);var v=[];if(document.getElementsByName("pdc_option_name[]"))for(var f=document.getElementsByName("pdc_option_name[]"),I=0,h=0;h<f.length;h++){var R=f[h];R.checked&&(v[I]=R.value,I++)}if(v=v.join(","),null==(http=getHTTPObject())){alert("Your browser does not support XMLHTTP!");return}http.onreadystatechange=function(){if(4==http.readyState){var t=http.responseText;if("fail"==(t=t.replace(/^\s+|\s+$/g,"")))return alert(Joomla.JText._("COM_REDSHOP_NOT_AVAILABLE")),!1;t=t.split("\n");for(var a=document.getElementsByName("quantity"),r=1,l=0;l<a.length;l++)a[l].id=="ajax_quantity"+e?r=a[l].value:a[l].id=="quantity"+e&&(r=a[l].value);s=t[0],u=t[1],p=t[2],price_excl_vat=t[7];var o=number_format(u,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),c=number_format(p,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));r<=0&&(r=1),g=parseFloat(p)*r;var y=number_format(g,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR"));if(m=t[3]+s+"<br />",m+=t[4]+o+"<br />",m+=t[5]+c+"<br />",m+=t[6]+y,document.getElementById("discount_cal_final_price")&&(document.getElementById("discount_cal_final_price").innerHTML=m),document.getElementById("main_price"+e)){if(document.getElementById("main_price"+e).value,"1"==redSHOP.RSConfig._("SHOW_PRICE")&&("1"!=redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")||redSHOP.RSConfig._("DEFAULT_QUOTATION_MODE")&&redSHOP.RSConfig._("SHOW_QUOTATION_PRICE"))){var E,v=parseFloat(g);if(1==t[8])var f=g+price_excl_vat*r;else var f=g*r;if(y=number_format(v,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),formatted_product_price_excl_vat=number_format(f,redSHOP.RSConfig._("PRICE_DECIMAL"),redSHOP.RSConfig._("PRICE_SEPERATOR"),redSHOP.RSConfig._("THOUSAND_SEPERATOR")),document.getElementById("produkt_kasse_hoejre_pris_indre"+e)&&(document.getElementById("produkt_kasse_hoejre_pris_indre"+e).innerHTML=formatted_product_price_excl_vat,document.getElementById("display_product_price_no_vat"+e)&&(document.getElementById("display_product_price_no_vat"+e).innerHTML=y),document.getElementById("product_price_no_vat"+e)&&(document.getElementById("product_price_no_vat"+e).value=v)),document.getElementById("product_price_incl_vat"+e)&&(document.getElementById("product_price_incl_vat"+e).innerHTML=formatted_product_price_excl_vat),document.getElementById("minimum_per_product_total")){if(1.25*g<document.getElementById("minimum_per_product_total").value)return jQuery("#discountCal-product-minimum-alert").click(),!1}}calculateTotalPrice(e,0)}}},http.open("GET",redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=cart&task=discountCalculator&product_id="+e+"&calcHeight="+t+"&calcWidth="+a+"&calcDepth="+r+"&calcRadius="+l+"&calcUnit="+o+"&pdcextraid="+v,!0),http.setRequestHeader("X-Requested-With","XMLHttpRequest"),http.send(null)}function setProductUserFieldImage(e,t,a,r){for(var l=document.getElementsByClassName("imgClass_"+t),o=0;o<l.length;o++)removeClass(l[o],"selectedimg");document.getElementById(e+"_"+t)&&(document.getElementById(e+"_"+t).value=a,r.className+=" selectedimg"),document.getElementById("ajax"+e+"_"+t)&&(document.getElementById("ajax"+e+"_"+t).value=a),document.getElementById(e)&&(document.getElementById(e).value=a)}function removeClass(e,t){if(hasClass(e,t)){var a=RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}}function hasClass(e,t){return e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))}function RedgetElementsByClassName(e){var t=[],a=document.all?document.all:document.getElementsByTagName("*");for(i=0,j=0;i<a.length;i++)a[i].className==e&&(t[j]=a[i],j++);return t}function getElementsByClassName(e){var t=[],a=document.all?document.all:document.getElementsByTagName("*");for(i=0,j=0;i<a.length;i++)a[i].className==e&&(t[j]=a[i],j++);return t}function displayAddtocartForm(e,t,a,r,l){return 0!=t&&""!=t&&(redSHOP.updateCartExtraFields(jQuery("#"+l+" [name^=extrafields]"),t,"#"+e),jQuery("[data-id=requiedAttribute]").val(jQuery("#"+e+" [name=requiedAttribute]").attr("reattribute")),jQuery("[data-id=requiedProperty]").val(jQuery("#"+e+" [name=requiedProperty]").attr("reproperty")),0==r&&calculateTotalPrice(t,a),!!setAddtocartForm(e,t))}function setAddtocartForm(e,t){var a=document.getElementById(e);jQuery("[data-id=Itemid]")&&(a.elements.Itemid.value=jQuery("[data-id=Itemid]").val()),jQuery("[data-id=attribute_data]")&&(a.elements.attribute_data.value=jQuery("[data-id=attribute_data]").val()),jQuery("[data-id=property_data]")&&(a.elements.property_data.value=jQuery("[data-id=property_data]").val()),jQuery("[data-id=subproperty_data]")&&(a.elements.subproperty_data.value=jQuery("[data-id=subproperty_data]").val()),jQuery("[data-id=accessory_data]")&&(a.elements.accessory_data.value=jQuery("[data-id=accessory_data]").val()),jQuery("[data-id=acc_quantity_data]")&&(a.elements.acc_quantity_data.value=jQuery("[data-id=acc_quantity_data]").val()),jQuery("[data-id=acc_attribute_data]")&&(a.elements.acc_attribute_data.value=jQuery("[data-id=acc_attribute_data]").val()),jQuery("[data-id=acc_property_data]")&&(a.elements.acc_property_data.value=jQuery("[data-id=acc_property_data]").val()),jQuery("[data-id=acc_subproperty_data]")&&(a.elements.acc_subproperty_data.value=jQuery("[data-id=acc_subproperty_data]").val()),jQuery("[data-id=accessory_price]")&&(a.elements.accessory_price.value=jQuery("[data-id=accessory_price]").val()),jQuery("[data-id=requiedAttribute]")&&(a.elements.requiedAttribute.value=jQuery("[data-id=requiedAttribute]").val()),jQuery("[data-id=requiedProperty]")&&(a.elements.requiedProperty.value=jQuery("[data-id=requiedProperty]").val());var r=1;if(a.quantity.value&&(r=a.quantity.value),document.getElementById("hidden_attribute_cartimage"+t)&&(a.hidden_attribute_cartimage.value=document.getElementById("hidden_attribute_cartimage"+t).value),0!=parseInt(a.min_quantity.value)&&parseInt(a.min_quantity.value)>r)return alert(a.min_quantity.getAttribute("requiredtext")+" "+parseInt(a.min_quantity.value)),!1;if(0!=parseInt(a.max_quantity.value)&&parseInt(a.max_quantity.value)<r)return alert(a.max_quantity.getAttribute("requiredtext")+" "+parseInt(a.max_quantity.value)),!1;if(document.getElementById("calc_height")){var l=document.getElementById("calc_height").value;if(""==l)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_HEIGHT")),!1;a.calcHeight.value=l}if(document.getElementById("calc_width")){var o=document.getElementById("calc_width").value;if(""==o)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_WIDTH")),!1;a.calcWidth.value=o}if(document.getElementById("calc_depth")){var c=document.getElementById("calc_depth").value;if(""==c)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_DEPTH")),!1;a.calcDepth.value=c}if(document.getElementById("calc_radius")){var s=document.getElementById("calc_radius").value;if(""==s)return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_RADIUS")),!1;a.calcRadius.value=s}if(document.getElementById("discount_calc_unit")){if(0==(calUnit=document.getElementById("discount_calc_unit").value))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_INSERT_UNIT")),!1;a.calcUnit.value=calUnit}var u=[];if(document.getElementsByName("pdc_option_name[]"))for(var p=document.getElementsByName("pdc_option_name[]"),m=0,g=0;g<p.length;g++){var y=p[g];y.checked&&(u[m]=y.value,m++)}if(u=u.join(","),a.pdcextraid.value=u,document.getElementById("hidden_subscription_id")){if(0==(subId=document.getElementById("hidden_subscription_id").value))return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;a.subscription_id.value=subId}return!0}function checkAddtocartValidation(e,t,a,r,l,o,c,s){if(0==t||""==t||!1==discountCalculation(t))return!1;if(0==redSHOP.RSConfig._("AJAX_CART_BOX")){var u=userfieldValidation("extrafields"+t);if(!u)return!1;var p=document.getElementById(e).requiedAttribute.value,m=document.getElementById(e).requiedProperty.value;if(""!=p)return alert(p),!1;if(""!=m)return alert(m),!1;redSHOP.triggerCustomEvents("redShopAddtocartValidationJsTrigger",{arguments:arguments}),document.getElementById(e).submit()}else{var g=parseInt(o)+parseInt(c)+parseInt(s);if(0!=r)submitAjaxCartdetail(e,t,a,r,o,c,s);else{var y=!0,u=userfieldValidation("extrafields"+t);u||(y=!1);var p=document.getElementById(e).requiedAttribute.value,m=document.getElementById(e).requiedProperty.value;""!=p&&(y=!1),""!=m&&(y=!1),redSHOP.triggerCustomEvents("redShopAddtocartValidationJsTrigger",{arguments:arguments}),g>0&&!1==y?displayAjaxCartdetail(e,t,a,r,o,c,s):submitAjaxCartdetail(e,t,a,r,o,c,s)}}}function displayAjaxCartdetail(e,t,a,r,l,o,c){if(0==t||""==t)return!1;var s="";document.getElementById("isAjaxBoxOpen")&&(s=document.getElementById("isAjaxBoxOpen").value),document.getElementById(e);for(var u=document.getElementsByName("extrafields"+t+"[]"),p="",m="",g="",y=!1,E="",v="",f=!1,I="",h="",R=0;R<u.length;R++)if(u[R].value||"text"!=u[R].type){if(u[R].value||"select-one"!=u[R].type){if(u[R].value||"hidden"!=u[R].type){if("checkbox"==u[R].type){if(g=redSHOP.filterExtraFieldName(u[R].id),""!=m&&m!=g&&!1==y&&(p+=m+","),m!=g&&(m=g,y=!1),u[R].checked||!0==y){y=!0;continue}(R==u.length-1&&!1==y||"checkbox"!=u[R+1].type&&!1==y)&&(p+=m+",")}else if("radio"==u[R].type){if(v=redSHOP.filterExtraFieldName(u[R].id),""!=E&&E!=v&&!1==f&&(p+=E+","),E!=v&&(E=v,f=!1),u[R].checked||!0==f){f=!0;continue}(R==u.length-1&&!1==f||"radio"!=u[R+1].type&&!1==f)&&(p+=E+",")}else if("select-multiple"==u[R].type){if(h=redSHOP.filterExtraFieldName(u[R].id),u[R].value)continue;p+=h+","}}else p+=I=redSHOP.filterExtraFieldName(u[R].id),u.length-1!=R&&(p+=",")}else p+=u[R].id,u.length-1!=R&&(p+=",")}else p+=u[R].id,u.length-1!=R&&(p+=",");var B=RedgetElementsByClassName("calendar"),S="";for(cal_i=0;cal_i<B.length;cal_i++){n=(arr=B[cal_i].id.split("_img")).length;var C=arr[0];""!=C&&""==document.getElementById(C).value&&(p+=","+(S=redSHOP.filterExtraFieldName(C))+",")}var A="";if(document.getElementById("hidden_subscription_id")){if(0==(subId=document.getElementById("hidden_subscription_id").value)||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;A="&subscription_id="+subId}var b=1,T="";request=getHTTPObject(),document.getElementById("quantity"+t).value&&(b=document.getElementById("quantity"+t).value);var $=document.getElementById(e).requiedAttribute.value,x=document.getElementById(e).requiedProperty.value,P=document.getElementById(e).accessory_data.value;0==p&&(c=0),""==$&&""==x&&(l=0);var O=[];o>0&&""!=P&&0!=P&&o==(O=P.split("@@")).length&&(o=0);var q=parseInt(l)+parseInt(o)+parseInt(c),_=parseInt(l)+parseInt(c);if(o>0&&0==_&&O.length>0||0==q||"viewajaxdetail"==s)submitAjaxCartdetail(e,t,a,r,l,o,c);else{var w="&property_data="+encodeURIComponent(document.getElementById(e).property_data.value),T="&view=product&pid="+t+"&relatedprd_id="+a+"&layout=viewajaxdetail&product_quantity="+b+"&nextrafield="+c+"&extrafieldNames="+p+A+(w=(w=(w=(w=(w=w+"&subproperty_data="+encodeURIComponent(document.getElementById(e).subproperty_data.value))+"&accessory_data="+encodeURIComponent(document.getElementById(e).accessory_data.value))+"&acc_quantity_data="+encodeURIComponent(document.getElementById(e).acc_quantity_data.value))+"&acc_property_data="+encodeURIComponent(document.getElementById(e).acc_property_data.value))+"&acc_subproperty_data="+encodeURIComponent(document.getElementById(e).acc_subproperty_data.value)),H=redSHOP.RSConfig._("AJAX_BASE_URL")+T;request.onreadystatechange=function(){if(4==request.readyState&&200==request.status){var e=request.responseText,t={url:H,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_DETAIL_BOX_HEIGHT"))},htmldata:e,onOpen:function(){jQuery("select[id^=property_id_ajax_prd_]").select2(),redSHOP.triggerCustomEvents("onDisplayAjaxCartBoxDetail",{params:T})}};redBOX.initialize({}),document.attbox=redBOX.open(null,t),preloadSlimbox({isenable:!1,mainImage:!1});var a=RedgetElementsByClassName("calendar");for(i=0;i<a.length;i++){var r=a[i].id;n=(arr=r.split("_img")).length;var l=arr[0],o=l.split("ajax");-1!=r.search("ajax")&&-1!=p.search(o[0])&&window.addEvent("domready",function(){Calendar.setup({inputField:l,ifFormat:"%d-%m-%Y",button:a[i].id,align:"Tl",singleClick:!0})})}}},request.open("POST",H,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send(T)}}redSHOP.onChangePropertyDropdown=[],redSHOP.updateStockStatusMessage=function(e,t){var a="",r="",l="",o="",c="";"instock"==e?(a="",o="",r="none",l="none",c=Joomla.JText._("COM_REDSHOP_AVAILABLE_STOCK")):(a="none",o="none","preorder"==e?(r="none",l="",c=Joomla.JText._("COM_REDSHOP_PREORDER_PRODUCT_OUTOFSTOCK_MESSAGE")):(r="",l="none",c=Joomla.JText._("COM_REDSHOP_PRODUCT_OUTOFSTOCK_MESSAGE"))),document.getElementById("pdaddtocart"+t)&&(document.getElementById("pdaddtocart"+t).style.display=a),jQuery("[data-id=stockaddtocart"+t+"]")&&jQuery("[data-id=stockaddtocart"+t+"]").attr("style","display:"+r),document.getElementById("stockaddtocart"+t)&&(document.getElementById("stockaddtocart"+t).innerHTML=c),document.getElementById("preordercart"+t)&&(document.getElementById("preordercart"+t).style.display=l),document.getElementById("stockQuantity"+t)&&(document.getElementById("stockQuantity"+t).style.display=o)},redSHOP.redShopAddtocartValidationJsTrigger=[];var getExtraParamsArray={};function submitAjaxCartdetail(e,t,a,r,l,o,c){var s=document.getElementById(e),u="";if(!userfieldValidation("extrafields"+t))return!1;var p=jQuery("#"+e+" [name=requiedAttribute]").val(),m=jQuery("#"+e+" [name=requiedProperty]").val();if(0!=p&&""!=p)return alert(p),!1;if(0!=m&&""!=m)return alert(m),!1;extraFieldPost=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+t+'"]'),t).join("&");var g="";if(document.getElementById("hidden_subscription_id")){if(0==(subId=document.getElementById("hidden_subscription_id").value)||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;g="&subscription_id="+subId}document.getElementById("giftcard_id")?(u="&giftcard_id="+t,document.getElementById("reciver_email")&&(u+="&reciver_email="+document.getElementById("reciver_email").value),document.getElementById("reciver_name")&&(u+="&reciver_name="+document.getElementById("reciver_name").value),document.getElementById("customer_amount")&&(u+="&customer_amount="+document.getElementById("customer_amount").value)):u="&product_id="+t,request=getHTTPObject();var y="ajax_cart_box=1";if(y=(y=(y=(y=(y=(y=(y=(y=(y=(y=(y=(y=(y=y+"&Itemid="+s.Itemid.value+u)+"&category_id="+s.category_id.value)+"&attribute_data="+s.attribute_data.value)+"&property_data="+s.property_data.value)+"&subproperty_data="+s.subproperty_data.value)+"&requiedAttribute="+s.requiedAttribute.value)+"&requiedProperty="+s.requiedProperty.value)+"&accessory_data="+s.accessory_data.value)+"&acc_quantity_data="+s.acc_quantity_data.value)+"&acc_attribute_data="+s.acc_attribute_data.value)+"&acc_property_data="+s.acc_property_data.value)+"&acc_subproperty_data="+s.acc_subproperty_data.value)+"&accessory_price="+s.accessory_price.value,document.getElementById("wrapper_check")&&document.getElementById("wrapper_check").checked&&(y=y+"&sel_wrapper_id="+s.sel_wrapper_id.value),y=(y=y+"&quantity="+s.quantity.value)+"&hidden_attribute_cartimage="+s.hidden_attribute_cartimage.value,document.getElementById("calc_height")&&(y=y+"&calcHeight="+s.calcHeight.value),document.getElementById("calc_width")&&(y=y+"&calcWidth="+s.calcWidth.value),document.getElementById("calc_depth")&&(y=y+"&calcDepth="+s.calcDepth.value),document.getElementById("calc_radius")&&(y=y+"&calcRadius="+s.calcRadius.value),document.getElementById("calc_unit")&&(y=y+"&calcUnit="+s.calcUnit.value),y=(y=y+"&pdcextraid="+s.pdcextraid.value)+g+"&"+extraFieldPost,redSHOP.triggerCustomEvents("redShopJsTrigger",{arguments:arguments}),"object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)y+="&"+key+"="+getExtraParamsArray[key];request.open("POST",redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=cart&task=add",!1),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("X-Requested-With","XMLHttpRequest");var E={show_final_cart_box:!0};request.onreadystatechange=function(){if(4==request.readyState){var e=request.responseText;if("0"==(e=e.split("`"))[1])return"block_message"==e[2]&&(document.getElementById("minimum_total_message")&&e[1]?document.getElementById("minimum_total_message").style.display="block":alert(e[2])),!1;document.attbox&&document.attbox.close(),document.getElementById("minimum_total_message")&&e[2]&&(document.getElementById("minimum_total_message").style.display="none"),document.getElementById("mod_cart_total")&&e[1]&&(document.getElementById("mod_cart_total").innerHTML=e[1]),document.getElementById("rs_promote_free_shipping_div")&&e[2]&&(document.getElementById("rs_promote_free_shipping_div").innerHTML=e[2]),document.getElementById("mod_cart_checkout_ajax")&&(document.getElementById("mod_cart_checkout_ajax").style.display=""),redSHOP.triggerCustomEvents("onAfterSubmitAjaxCartdetail",{responce:e,product_id:t,params:y,aj_flag:E,totAttribute:l,totAccessory:o});var a=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&pid="+t+"&r_template=cartbox";(request_inner=getHTTPObject()).onreadystatechange=function(){if(4==request_inner.readyState&&200==request_inner.status&&E.show_final_cart_box){var e=request_inner.responseText;E.show_final_cart_box=!1;var r={url:a,handler:"html",size:{x:parseInt(redSHOP.RSConfig._("AJAX_BOX_WIDTH")),y:parseInt(redSHOP.RSConfig._("AJAX_BOX_HEIGHT"))},htmldata:e,onOpen:function(){redSHOP.triggerCustomEvents("onDisplayAjaxCartBox",{params:y,product_id:t}),redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME")>0&&(function(){this.close()}).bind(this).delay(redSHOP.RSConfig._("AJAX_CART_DISPLAY_TIME"))}};redBOX.initialize({}),document.ajaxbox=redBOX.open(null,r)}},request_inner.open("GET",a,!0),request_inner.setRequestHeader("X-Requested-With","XMLHttpRequest"),request_inner.send(null)}},request.send(y)}function displayAddtocartProperty(e,t,a,r){return document.getElementById("attribute_data")&&(document.getElementById("attribute_data").value=a),document.getElementById("property_data")&&(document.getElementById("property_data").value=r),document.getElementById("subproperty_data")&&(document.getElementById("subproperty_data").value=""),!!setAddtocartForm(e,t)}function showallreviews(){document.getElementById("showreviews")&&("none"==document.getElementById("showreviews").style.display?(document.getElementById("showreviews").style.display="",jQuery(".show_reviews").css("display","none")):document.getElementById("showreviews").style.display="none")}function checkAddtocartwishlistValidation(e,t,a,r,l,o,c,s,u){if(0==t||""==t)return!1;if(1!=u)return submitAjaxCartdetail(e,t,a,r,o,c,s),!0;if(!userfieldValidation("extrafields"+t))return!1;var p=document.getElementById(e).requiedAttribute.value,m=document.getElementById(e).requiedProperty.value;return""!=p?(alert(p),!1):""==m||(alert(m),!1)}redSHOP.redShopJsTrigger=[];var mainpro_id=[],totatt=[],totcount_no_user_field=[];function productalladdprice(e){var t=1;mainpro_id=document.frm.product_id.value.split(","),totatt=document.frm.totacc_id.value.split(","),totcount_no_user_field=document.frm.totcount_no_user_field.value.split(","),mainpro_id.length=mainpro_id.length-1;for(var a=0;a<mainpro_id.length;a++)if(""!=mainpro_id[a]&&displayAddtocartForm("addtocart_prd_"+mainpro_id[a],mainpro_id[a],"0","0","user_fields_form")&&!checkAddtocartwishlistValidation("addtocart_prd_"+mainpro_id[a],mainpro_id[a],"0","0","user_fields_form",totatt[a],"",totcount_no_user_field[a],t))return!1;submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[0],mainpro_id[0],0,0,totatt[0],0,totcount_no_user_field[0],e)}var d=0;function submitAjaxwishlistCartdetail(e,t,a,r,l,o,c,s){displayAddtocartForm("addtocart_prd_"+mainpro_id[d],mainpro_id[d],"0","0","user_fields_form");var u=document.getElementById(e),p=[],m=jQuery("#"+e+' [name="requiedAttribute"]').val(),g=jQuery("#"+e+' [name="requiedProperty"]').val();if(!userfieldValidation("extrafields"+t))return!1;if(0!=m&&""!=m)return alert(m),!1;if(0!=g&&""!=g)return alert(g),!1;var y=redSHOP.updateAjaxCartExtraFields(jQuery('[name^="extrafields'+t+'"]'),t).join("&");if(jQuery("#hidden_subscription_id").length>0){if(0==(subId=jQuery("#hidden_subscription_id").val())||""==subId)return alert(Joomla.JText._("COM_REDSHOP_SELECT_SUBSCRIPTION_PLAN")),!1;p.push("subscription_id="+subId)}jQuery("#giftcard_id").length>0?(p.push("giftcard_id="+t),p.push("reciver_email="+jQuery("#reciver_email").val()),p.push("reciver_name="+jQuery("#reciver_name").val()),p.push("customer_amount="+jQuery("#customer_amount").val())):p.push("product_id="+t),request=getHTTPObject(),p.push("Itemid="+u.Itemid.value),p.push("category_id="+u.category_id.value),p.push("attribute_data="+u.attribute_data.value),p.push("property_data="+u.property_data.value),p.push("subproperty_data="+u.subproperty_data.value),p.push("requiedAttribute="+u.requiedAttribute.value),p.push("requiedProperty="+u.requiedProperty.value),p.push("accessory_data="+u.accessory_data.value),p.push("acc_quantity_data="+u.acc_quantity_data.value),p.push("acc_attribute_data="+u.acc_attribute_data.value),p.push("acc_property_data="+u.acc_property_data.value),p.push("acc_subproperty_data="+u.acc_subproperty_data.value),p.push("accessory_price="+u.accessory_price.value),p.push("sel_wrapper_id="+u.sel_wrapper_id.value),p.push("quantity=1"),p.push("pdcextraid="+u.pdcextraid.value),document.getElementById("calc_height")&&p.push("calcHeight="+u.calcHeight.value),document.getElementById("calc_width")&&p.push("calcWidth="+u.calcWidth.value),document.getElementById("calc_depth")&&p.push("calcDepth="+u.calcDepth.value),document.getElementById("calc_radius")&&p.push("calcRadius="+u.calcRadius.value),document.getElementById("calc_unit")&&p.push("calcUnit="+u.calcUnit.value);var E=p.join("&")+"&"+y;if(redSHOP.triggerCustomEvents("redShopJsTrigger",{arguments:arguments}),"object"==typeof getExtraParamsArray)for(key in getExtraParamsArray)E+="&"+key+"="+getExtraParamsArray[key];var v=redSHOP.RSConfig._("AJAX_BASE_URL");1==s||2==s?v+="&view=product&task=addtowishlist&wid=1&ajaxon=1":v+="&view=cart&task=add&ajax_cart_box=1",/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",v,!0):request.open("POST",v,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",E.length),request.setRequestHeader("Connection","close"),request.onreadystatechange=function(){if(request.readyState<4&&jQuery("#saveid, #allcart").html('<font size="1" color="red">Processing...</font>'),4==request.readyState){var e=request.responseText;if("0"==(e=e.split("`"))[1])return!1;if(document.attbox&&document.attbox.close(),++d<mainpro_id.length)""!=mainpro_id[d]&&submitAjaxwishlistCartdetail("addtocart_prd_"+mainpro_id[d],mainpro_id[d],0,0,totatt[d],0,totcount_no_user_field[d]);else if(1==s)window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?wishlist=1&option=com_redshop&view=login";else{if(2==s)return!1;window.location=redSHOP.RSConfig._("SITE_URL")+"index.php?option=com_redshop&view=cart"}jQuery("#saveid, #allcart").html(""),e[1]&&jQuery("#mod_cart_total").html(e[1]),e[2]&&jQuery("#rs_promote_free_shipping_div").html(e[2]),jQuery("#mod_cart_checkout_ajax").hide()}},request.send(E)}function addmywishlist(e,t,a){for(var r=document.getElementsByName("extrafields"+t+"[]"),l="",o="",c="",s="",u="",p="",m="",g=!1,y="",E=0;E<r.length;E++)if("checkbox"==r[E].type)u=redSHOP.filterExtraFieldName(r[E].id),""!=s&&s!=u&&""!=o&&(c+="&"+s+"="+o),s!=u&&(o="",s=u),r[E].checked&&(""!=o&&(o+=","),o+=r[E].value),E==r.length-1&&""!=o&&(c+="&"+u+"="+o),E<r.length-1&&"checkbox"!=r[E+1].type&&""!=o&&(c+="&"+u+"="+o);else if("radio"==r[E].type){if(m=redSHOP.filterExtraFieldName(r[E].id),""!=p&&p!=m&&!1==g&&(c+="&"+p+"="+o),p!=m){if(o="",p=m,g=!1,r[E].checked||!0==g){g=!0,c+="&"+p+"="+r[E].value;continue}}else if(r[E].checked){g=!0,c+="&"+m+"="+r[E].value;continue}}else if("select-multiple"==r[E].type){var v=r[E];o="",y=redSHOP.filterExtraFieldName(r[E].id);for(var f=0;f<v.options.length;f++)v.options[f].selected&&-1==o.search(String(v.options[f].value))&&(""!=o&&(o+=","),o+=String(v.options[f].value));o&&(c+="&"+y+"="+o)}else if("hidden"==r[E].type)c+="&"+(l=imgfieldNamefrmId=redSHOP.filterExtraFieldName(r[E].id))+"="+(o=r[E].value),o="";else if("text"==r[E].type)c+="&"+(l=r[E].id)+"="+(o=r[E].value);else{if(-1!=r[E].id.search("ajax")){var I=r[E].id.split("ajax"),h="";h=redSHOP.filterExtraFieldName(I[1]),r[E].id=h}c+="&"+(l=r[E].id)+"="+(o=r[E].value)}var R=RedgetElementsByClassName("calendar"),h="";for(cal_i=0;cal_i<R.length;cal_i++){n=(arr=R[cal_i].id.split("_img")).length;var B=arr[0];""!=B&&B.search(t)&&""!=document.getElementById(B).value&&(c+="&"+(h=redSHOP.filterExtraFieldName(B))+"="+document.getElementById(B).value)}request=getHTTPObject();var S="&view=product&task=addtowishlist&json=1&ajaxon=1";S=(S=(S=S+"&Itemid="+a)+"&product_id="+t)+"&userfield_id="+r.length,S+=c;var C=redSHOP.RSConfig._("AJAX_BASE_URL")+S;/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?request.open("POST",C,!0):request.open("POST",C,!1),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),request.setRequestHeader("Content-length",S.length),request.setRequestHeader("Connection","close"),request.onreadystatechange=function(){if(request.readyState<4&&(document.getElementById("myprohide_"+t).innerHTML='<font size="1" color="red">Loading...</font>'),4==request.readyState&&200==request.status){request.responseText;var e=document.getElementById("mypid").innerHTML;sp=request.responseText.split(":-:"),-1==e.search(sp[1])&&(document.getElementById("mypid").innerHTML+=sp[0],document.getElementById("wid").style.display="block",document.getElementById("myprohide_"+t).innerHTML="")}},request.send(S)}function getStocknotify(e,t,a,r){if(jQuery("#email_notify")){var l=jQuery("#email_notify").val();if(0==r&&!validateEmail(l))return alert(Joomla.JText._("COM_REDSHOP_PLEASE_ENTER_VALID_EMAIL_ADDRESS")),!1}var o=redSHOP.RSConfig._("AJAX_BASE_URL")+"&view=product&task=addNotifystock&product_id="+e;o=o+"&property_id="+t+"&subproperty_id="+a+"&email_not_login="+l,(request=getHTTPObject()).onreadystatechange=function(){if(4==request.readyState){var t=request.responseText;document.getElementById("notify_stock"+e)&&(document.getElementById("notify_stock"+e).innerHTML=t)}},request.open("GET",o,!0),request.setRequestHeader("X-Requested-With","XMLHttpRequest"),request.send()}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function removeSpaces(e){e.value=e.value.replace(/\s/g,"")}